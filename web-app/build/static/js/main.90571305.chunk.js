(this["webpackJsonpjp-obesity"]=this["webpackJsonpjp-obesity"]||[]).push([[0],{370:function(e,t,a){e.exports=a(497)},406:function(e,t){},408:function(e,t){},418:function(e,t){},420:function(e,t){},445:function(e,t){},446:function(e,t){},451:function(e,t){},453:function(e,t){},460:function(e,t){},479:function(e,t){},497:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),c=a(37),o=a.n(c),l=a(40),s=a(43),u=a(2),m=a(1),d=a.n(m),p=a(3),f=a(11),b=a(290),g=a(143),h=a(8),v=a(55),E=a(128),O=Object(b.a)({apiKey:"AIzaSyCxsE54VtCR9JdeAZBkaShFUTFNLVXaDXo",authDomain:"jp-obesity.firebaseapp.com",projectId:"jp-obesity",storageBucket:"jp-obesity.appspot.com",messagingSenderId:"701251105704",appId:"1:701251105704:web:8315c7efdb6d19d4eee39d",databaseURL:"https://jp-obesity-default-rtdb.europe-west1.firebasedatabase.app",measurementId:"G-7EHB4CQYRW"}),y=Object(E.a)(O),j=Object(g.b)(O),k=Object(v.c)(),_=Object(h.k)(),x={patients:Object(h.c)(_,"patients"),workouts:Object(h.c)(_,"workouts")},w=function(e){return Object(h.g)(_,"patients",e)},C=a(100),P=a.n(C),S=a(5),N=a(292),I=new(a.n(N).a)({en:{pageTitles:{therapy_status:"Therapy Status",notifications:"Notifications",nutritional_plan:"Nutritional Plan",physical_exercises:"Physical Exercises",patients:"Patients",add_patient:"Add patient",foods:"Foods",workouts:"Workouts",medical_visit:"Medical visit",details_patient:"Patient details",patient_statistics:"Patients statistics",export_data:"Export data",nutritional_plans:"Nutritional Plans",notes:"Notes",update_profile:"Update profile"},measures:{height:"Height",weight:"Weight",age:"Age",middle_age:"Middle age",steps:"Steps",minutes:"Minutes"},patient:{first_name:"First name",last_name:"Last name",full_name:"{0} {1}",gender:"Gender",email:"Email",dateOfBirth:"Date of birth",search:"Search patient...",occupation:"Occupation",educational_qualification:"Educational qualification",marital_status:"Marital status",ethnicity:"Ethnicity",overweight:"Overweight",diabetes:"Diabetes",heartAttack:"Heart attack",hypertension:"Hypertension",dyslipidemia:"Dyslipidemia",thyroid:"Thyroid",smoker:"Smoker",smoker_ex:"Ex smoker",alcoholic:"Alcohol",laxatives_uses:"Use laxatives",incontinence:"Incontinence",snoring:"Snoring",insomnia:"Insomnia",menopause:"Menopause",pregnancies:"Pregnacies",pregnant:"Pregnant",abortions:"Abortions",amount_cigarettes:"Amount of cigarettes",alvo:"Alvo",menstrual_cycles:"Menstrual cycles",patient_account:"Patient account",remove_patient:"Remove patient",patient_id:"Patient ID",patient_age:"Age"},therapy:{start:"Therapy start date",end:"Therapy end date"},account:{sign_in:"Sign in",sign_out:"Sign out",sign_up:"Sign up",forgot_password:"Forgot password?",have_account:"Already have an account?",password:"Password",confirm_password:"Confirm Password",confirm_email:"Confirm Email",avatar_upload:"Upload avatar",no_account:"Don't have an account?",remember_me:"Remember me",reset:"Reset",modify_profile:"Modify profile",verify_email:"Verify email",profile:"Profile",doctor:"Doctor",modify_patient_data:"Modify patient data",personal_data:"Personal data"},general:{cancel:"Cancel",error:"Error",done:"Done",confirm:"Confirm",modify:"Modify",save:"Save",create:"Create",from_patient_list:"from patient list",all_patient_data:"all patient data",select_choice_before_confirmation:"Select a choice before confirmation",select_day_time:"Select a day and time",create_new_appointment:"New appointment",male:"Male",female:"Female",anonym:"anonym",consent:"Patient informed consent",back:"Back",next:"Next",choose:"Choose",year:"Year",month:"Month",day:"Day",time:"Time",graphs:"Graphs",tables:"Tables",under_construction:"Working on...",data_saved:"All data has been saved",see_more:"See more",patients_number:"Patients number",phone_number:"Phone",empty_list:"Empty list",add:"Add"},days:{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},meals:{breakfast:"Breakfast",morning_break:"Morning",lunch:"Lunch",afternoon_break:"Afternoon break",dinner:"Dinner",meals:"Meals"},relationship:{father:"Father",mother:"Mother",siblings:"Siblings",uncle:"Uncles",grandparents:"Grandparents"},visit:{steps:{data_patient:"Patient Data",family_history:"Family History",physiological_anamnesis:"Physiological Anamnesis",pathological_anamnesis:"Pathological Anamnesis",physical_examination:"Physical Examination",blood_chemistry:"Blood chemistry test",calculation_metabolism:"Calculation Metabolism",bioimpedance:"Bioimpedance analysis",weight_history:"Weight history",food_anamnesis:"Food anamnesis data",eating_behavior:"Eating behavior",nutritional_plan:"Nutritional plan",allergies:"Allergies",test_performance:"Test performance",test_psychometric:"Test Psychometric"},eating_disorder:"Eating disorder",mood_disturbance:"Mood disturbance",anxiety_disorder:"Anxiety disorder",psychosis:"Psychosis",personality_disorder:"Personality disorder",pathologies_inprogress:"Pathologies in progress",pathologies_previous:"Previous pathologies",pathologies:"Pathologies",weight:"Weight",middleweight:"Middleweight",height:"Height",middleheight:"Middleheight",heart_tones:"Heart tones",heart_murmur:"",heart_rate:"Heart rate",mv_chest:"MV Chest",pathological_noises:"Pathological noises",murphy_blumberg:"",palpable_liver:"",palpable_thyroid:"",declining_edema:"Declining edema",carotid_murmurs:"",min_blood_pressure:"",max_blood_pressure:"",bmi:"BMI",nutrients:"Nutrients",under:"Under {age}",over:"Sopra {age}",new_visit:"Add new visit",no_visits:"No visits",visit_name:"Name medical visit",select_pathologies:"Select pathologies",patient_age:"Age",gender:"Sex"},nutrients:{carbs:"Carbohydrates",prots:"Proteins",fats:"Fats",calcium:"Calcium",energy:"Energy",chol:"Cholesterol"}},it:{nutrients:{carbs:"Carboidrati",prots:"Proteine",fats:"Grassi",calcium:"Calcio",energy:"Energia",chol:"Colesterolo"},pageTitles:{therapy_status:"Status terapia",notifications:"Notifiche",nutritional_plan:"Piano nutrizionale",physical_exercises:"Esercizi fisici",patients:"Pazienti",add_patient:"Aggiungi paziente",foods:"Pasti",workouts:"Allenamenti",medical_visit:"Visita medica",details_patient:"Dettagli paziente",patient_statistics:"Statistiche pazienti",export_data:"Esporta dati",nutritional_plans:"Piani nutrizionali",notes:"Note",update_profile:"Aggiorna profilo"},measures:{height:"Altezza",weight:"Peso",age:"Eta'",middle_age:"Eta' media",steps:"Passi",minutes:"Minuti"},patient:{first_name:"Nome",last_name:"Cognome",full_name:"{0} {1}",gender:"Genere",email:"Email",dateOfBirth:"Data di nascita",search:"Cerca paziente...",occupation:"Professione",educational_qualification:"Titolo di studio",marital_status:"Stato civile",ethnicity:"Etnia",overweight:"Sovrappeso",diabetes:"Diabete",heartAttack:"Infarto del cuore",hypertension:"Ipertensione",dyslipidemia:"Dislipidemia",thyroid:"Malattia della tiroide",smoker:"Fumatore",smoker_ex:"Ex fumatore",alcoholic:"Alcool",laxatives_uses:"Uso lassativi",incontinence:"Incontinenza",snoring:"Russamento",insomnia:"Insonnia",menopause:"Menopausa",pregnancies:"Gravidanze",pregnant:"Incinta",abortions:"Aborti",amount_cigarettes:"Quantita' sigarette",alvo:"Alvo",menstrual_cycles:"Cicli mestruali",patient_account:"Account paziente",remove_patient:"Rimuovi paziente",patient_id:"ID Paziente",patient_age:"Eta'"},therapy:{start:"Data inizio terapia",end:"Data fine terapia"},account:{sign_in:"Accedi",sign_out:"Esci",sign_up:"Registrati",forgot_password:"Password dimenticata?",have_account:"Sei gi\xe0 registrato?",password:"Password",confirm_password:"Conferma Password",confirm_email:"Conferma Email",avatar_upload:"Carica avatar",no_account:"Non sei registrato?",remember_me:"Ricorda",reset:"Reimposta",modify_profile:"Modifica profilo",verify_email:"Verifica email",profile:"Profilo",doctor:"Dottore",modify_patient_data:"Modifica dati paziente",personal_data:"Data anagrafici"},general:{cancel:"Annulla",error:"Errore",done:"Fatto",confirm:"Conferma",save:"Salva",modify:"Modifica",create:"Crea",from_patient_list:"dalla propria lista pazienti",all_patient_data:"tutti i dati del paziente",select_choice_before_confirmation:"Seleziona una voce prima di confermare",select_day_time:"Seleziona il giorno e l'ora",create_new_appointment:"Nuovo appuntamento",male:"Maschio",female:"Femmina",anonym:"anonimo",consent:"Consenso informato paziente",back:"Indietro",next:"Avanti",choose:"Seleziona",description:"Description",year:"Anno",month:"Mese",day:"Giorno",time:"Orario",tables:"Tabelle",graphs:"Grafici",under_construction:"Lavori in corso ...",data_saved:"Tutti i dati sono stati salvati",patients_number:"Numero di pazienti",see_more:"Vedi di piu'",phone_number:"Cellulare",empty_list:"Lista vuota",add:"Aggiungi"},days:{mon:"Luned\xec",tue:"Marted\xec",wed:"Mercoled\xec",thu:"Gioved\xec",fri:"Venerd\xec",sat:"Sabato",sun:"Domenica"},meals:{breakfast:"Colazione",morning_break:"Spuntino",lunch:"Pranzo",afternoon_break:"Pausa pomeridiana",dinner:"Cena",meals:"Pasti"},relationship:{father:"Padre",mother:"Madre",siblings:"Fratelli",uncle:"Zio",grandparents:"Nonni"},visit:(n={steps:{data_patient:"Dati paziente",family_history:"Anamnesi Familiare",physiological_anamnesis:"Anamnesi Fisiologica",pathological_anamnesis:"Anamnesi Patologica",physical_examination:"Esame Obiettivo",blood_chemistry:"Esami Ematochimici",calculation_metabolism:"Calcolo Metabolismo",bioimpedance:"Bioimpedenziometria",weight_history:"Storia del peso",food_anamnesis:"Dati anamnesi alimentare",eating_behavior:"Comportamento alimentare",nutritional_plan:"Piano nutrizionale",allergies:"Allergie",test_performance:"Test performance",test_psychometric:"Test psicometrici"},eating_disorder:"Disturbo alimentare",mood_disturbance:"Disturbo dell'umore",anxiety_disorder:"Disturbo di ansia",psychosis:"Psicosi",personality_disorder:"Disturbo di personalita'",pathologies_inprogress:"Patologie in atto",pathologies_previous:"Patologie pregresse",neck_circumference:"Circonferenza collo",waist_circumference:"Circonferenza vita",narrowest_point:"punto piu' stretto",waist_circumference_narrowest_point:"punto piu' stretto",iliac_spine_height:"altezza spina iliaca anterusperiore",waist_circumference_iliac_spine_height:"altezza spina iliaca anterusperiore",pathologies:"Patologie",select_pathologies:"Seleziona patologie",weight:"Peso",middleweight:"Peso medio",height:"Altezza",middleheight:"Altezza media",heart_tones:"Toni cardiaci",heart_murmur:"Soffio cardiaco",heart_rate:"Frequenza cardiaca",mv_chest:"MV al torace",pathological_noises:"Rumori patologici",murphy_blumberg:"Segni di Murphy e Blumberg",palpable_liver:"Fegato palpabile",palpable_thyroid:"Tiroide palpabile",declining_edema:"Edemi declivi",carotid_murmurs:"Soffi carotidei",min_blood_pressure:"Pressione arteriosa MIN",max_blood_pressure:"Pressione arteriosa MAX",bmi:"BMI",nutrients:"Nutrienti",under:"Sotto {age}",over:"Sopra {age}",new_visit:"Aggiungi nuova visita",no_visits:"Nessuna visita",visit_name:"Nome visita medica",patient_age:"Eta'",gender:"Sesso",patient_occupation:"Professione",educational_qualification:"Titolo di studio",marital_status:"Stato civile",ethnicity:"Etnia",smoker:"Fumatore",ex_smoker:"Ex fumatore",alcoholic:"Alcool",use_laxatives:"Uso lassativi",incontinence:"Incontinenza",snoring:"Russamento",insomnia:"Insonnia",menopause:"Menopausa",pregnancies:"Gravidanze",abortions:"Aborti",amount_cigarettes:"Quantita' sigaretta",alvo:"Alvo",menstrual_cycles:"Cicli mestruali",eating:"Disturbo alimentare",mood:"Disturbo dell'umore",anxiety:"Disturbo di ansia",personality:"Disturbo di personalita'",hb:"Hb (g/dl)",cholesterol:"Colesterolo totale (mg/dl)",hdl:"HDL (mg/dl)",ldl:"LDL (mg/dl)",triglycerides:"Trigliceridi (mg/dl)",glycemia:"Glicemia (mg/dl)",glycated_hb:"Hb glicata (mmol/mol Hb)",uric_acid:"Acido urico (mg/dl)",consent:"Consenso informato paziente",creatininemia:"Creatininemia (mg/dl)",alt:"Alt (U/I)",ggt:"GGT (U/I)",tsh:"TSH (mUI/I)",daily_energy_expenditure:"Disp. energ. gg a riposo kcal/die",tot_energy_expenditure:"Tot. disp. energ. kcal/die",body_fat:"Grasso corporeo %",body_water:"Acqua corporea %",lean_mass:"Masso magra %",yourselfDiets:"Diete fatte da te",proDiets:"Diete con professionista",heavyweight:"Peso massimo kg",weightMaintained:"Peso mantenuto kg",maximumWeightLoss:"Massima perdita di peso kg",yearGetFat:"Anno inizio aumento peso",diets:"Tot. diete fatte",weightGain:"Aumento graduale di peso si/no",weightLoss:"Cali di peso si/no",averageCalories:"Tot. cal. assunte in media"},Object(S.a)(n,"nutrients","Nutrienti"),Object(S.a)(n,"grams_carbs","Grammi nutrienti (carboidrati)"),Object(S.a)(n,"grams_lipidi","Grammi nutrienti (lipidi)"),Object(S.a)(n,"grams_prots","Grammi nutrienti (proteine)"),Object(S.a)(n,"alcoholCalories","Calorie da alcool"),Object(S.a)(n,"prandial_hyperphagia","Iperfagia prandiale"),Object(S.a)(n,"compulsive_binge","Abbuffata compulsiva (binge)"),Object(S.a)(n,"plucking","Piluccamento"),Object(S.a)(n,"emotional_eating","Emotional eating"),Object(S.a)(n,"night_eating","Night eating"),Object(S.a)(n,"selective_craving","Bramosia selettiva o craving"),Object(S.a)(n,"monthsGetFat","In quanti mesi"),Object(S.a)(n,"kcal_therapeutic_target","Target terapeutico"),Object(S.a)(n,"kcal_carb_target","Target % carboidrati"),Object(S.a)(n,"kcal_lipids_target","Target % lipidi"),Object(S.a)(n,"kcal_prot_target","Target % proteine"),Object(S.a)(n,"exercise_target","Target esericizio fisico"),Object(S.a)(n,"foods_text","Allimenti"),Object(S.a)(n,"medications_text","Farmaci"),Object(S.a)(n,"lifted_from_chair","lifted from chair"),Object(S.a)(n,"gate_speed","Camminata veloce"),Object(S.a)(n,"walking_test_meters","walking test meters"),Object(S.a)(n,"walking_test_time","walking test time"),Object(S.a)(n,"handgripMano","hand grip"),Object(S.a)(n,"som","som"),Object(S.a)(n,"obs_comp","obs comp"),Object(S.a)(n,"interp_sens"," interp sens"),Object(S.a)(n,"dep","dep"),Object(S.a)(n,"anx","anx"),Object(S.a)(n,"anger_host","anger host"),Object(S.a)(n,"phob","phob"),Object(S.a)(n,"paran","paran"),Object(S.a)(n,"psych","psych"),Object(S.a)(n,"sleep","sleep"),Object(S.a)(n,"tot_tefq51","tefq51 punteggio"),Object(S.a)(n,"tot_orwell","orwell punteggio"),Object(S.a)(n,"restriz","restriz"),Object(S.a)(n,"disinibiz","disinibiz"),Object(S.a)(n,"fame","fame"),Object(S.a)(n,"sint_fis","sint fis"),Object(S.a)(n,"impatto_psisoc","impatto psisoc."),Object(S.a)(n,"bes_score","bes punteggio"),Object(S.a)(n,"scl90_score","scl90 punteggio"),Object(S.a)(n,"free_desc_psycho_test","descrizione"),Object(S.a)(n,"scoreIpaq","ipaq punteggio"),Object(S.a)(n,"active","comportamento"),Object(S.a)(n,"exam_date","Data esame"),Object(S.a)(n,"createdAt","Data creazione visita"),Object(S.a)(n,"foods","Allimenti"),Object(S.a)(n,"medications","Farmaci"),Object(S.a)(n,"abdomen","Addome"),n)}}),D=a(293),T=a.n(D),z=i.a.createContext(),W="control_group_patients";function A(){return Object(r.useContext)(z)}function q(e){var t=e.children,a=Object(r.useState)(),n=Object(f.a)(a,2),c=n[0],o=n[1],l=Object(r.useState)(!0),s=Object(f.a)(l,2),m=s[0],b=s[1],O=Object(r.useState)(localStorage.getItem("lang")||T()()),C=Object(f.a)(O,2),S=C[0],N=C[1];function D(){return(D=Object(p.a)(d.a.mark((function e(t,a,n){var r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.firstname,i=n.lastname,e.next=3,Object(v.b)(k,t,a);case 3:return c=e.sent,Object(E.b)(y,"sign_up",{providerId:c.providerId}),e.abrupt("return",Object(v.l)(c.user,{displayName:"".concat(r," ").concat(i)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(p.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(h.c)(_,"patients"),n=Object(h.n)(a,Object(h.s)("email","==",null===t||void 0===t?void 0:t.email)),e.prev=2,e.next=5,Object(h.j)(n);case 5:if(!e.sent.empty){e.next=11;break}return r=Object(u.a)(Object(u.a)({},t),{},{doctorId:c.uid,createdAt:h.a.now()}),e.abrupt("return",Object(h.b)(a,r));case 11:throw new Error("There exists patient with the same email address");case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function q(){return(q=Object(p.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.abrupt("return",Object(v.g)(k,v.a).then(Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(v.h)(k,t,a).then((function(e){return Object(E.b)(y,"login",{providerId:e.providerId})})));case 1:case"end":return e.stop()}}),e)})))));case 4:return e.abrupt("return",Object(v.h)(k,t,a).then((function(e){return Object(E.b)(y,"login",{providerId:e.providerId})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){localStorage.setItem("lang",S),I.setLanguage(S)}),[S]),Object(r.useEffect)((function(){var e=Object(v.d)(k,(function(e){o((function(){return e})),b((function(){return!1}))}),(function(e){return console.error(e.message)}),(function(){return console.debug("Observer was removed")}));return function(){return e()}}),[]);var F={getPatientNotes:function(e){return Object(h.j)(Object(h.n)(Object(h.c)(_,"patients/".concat(e,"/notes")),Object(h.m)("time","desc")))},updatePatientNote:function(e,t,a){return Object(h.r)(Object(h.g)(_,"patients/".concat(e,"/notes"),t),a)},deletePatientNote:function(e,t){return Object(h.e)(Object(h.g)(_,"patients/".concat(e,"/notes"),t))},createPatientNote:function(e,t){return Object(h.b)(Object(h.c)(_,"patients/".concat(e,"/notes")),t)},currentUser:c,createPatient:function(e){return A.apply(this,arguments)},login:function(e,t,a){return q.apply(this,arguments)},signup:function(e,t,a){return D.apply(this,arguments)},logout:function(){return Object(v.i)(k)},resetPassword:function(e){return Object(v.f)(k,e)},updateEmail:function(e){return Object(v.j)(c,e)},updatePassword:function(e){return Object(v.k)(c,e)},createWorkout:function(e){return Object(h.b)(x.workouts,e)},updateWorkout:function(e,t){return Object(h.p)(Object(h.g)(_,"workouts",e),t)},getWorkouts:function(e){return Object(h.j)(Object(h.n)(x.workouts,Object(h.l)(e)))},deleteInBatch:function(e){var t=Object(h.t)(_);return e.forEach((function(e){return t.delete(Object(h.g)(_,"workouts",e))})),t.commit()},getPatientWorkouts:function(e,t){return Object(h.j)(Object(h.n)(Object(h.c)(_,"patients/".concat(e,"/workout_entry")),Object(h.m)("time","asc"),Object(h.l)(t)))},getPatients:function(){var e=Object(h.n)(Object(h.c)(_,"patients"),Object(h.s)("doctorId","==",c.uid),Object(h.m)("therapyStartDate","desc"));return Object(h.j)(e)},getPatient:function(e){return Object(h.i)(Object(h.g)(_,"patients",e))},removePatient:function(e){return Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.g)(_,"patients",e),t.next=3,a.get(n);case 3:if((r=t.sent).exists()){t.next=6;break}throw new Error("Patient with uid ".concat(e," does not exists"));case 6:if(i=r.data(),i.doctorId===c.uid){t.next=9;break}throw new Error("It's not your patient");case 9:a.set(Object(h.g)(Object(h.c)(_,"removed_patients")),Object(u.a)(Object(u.a)({},r.data()),{},{patientId:e})),a.delete(n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},unlinkPatient:function(e){return Object(h.r)(Object(h.g)(_,"patients",e),{doctorId:Object(h.f)()})},verifyEmail:function(){return Object(v.e)(c)},updateProfile:function(e){return Object(v.l)(c,e)},updateWorkoutEntry:function(e,t){return Object(h.r)(Object(h.g)(_,"workout_entry",e),t)},createWorkoutEntry:function(e){return Object(h.b)(Object(h.c)(_,"workout_entry"),e)},removeWorkoutEntry:function(e){return Object(h.e)(Object(h.g)(_,"workout_entry",e))},getPatientNutritionalPlan:function(e){return Object(h.j)(Object(h.c)(_,"patients/".concat(e,"/nutritional_plans")))},updatePatientNutritionalPlan:function(e,t,a){return Object(h.p)(Object(h.g)(_,"patients/".concat(t,"/nutritional_plans"),a),e)},createPatientNutritionalPlan:function(e,t){return Object(h.p)(e,t)},getFoods:function(){return Object(h.j)(Object(h.n)(Object(h.c)(_,"foods"),Object(h.m)("name","asc")))},getBackendFoods:function(){var e="https://iot4care.di.univr.it/".concat("all-foods");return P.a.get(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken),"Access-Control-Allow-Origin":"*"}})},getFoodEntries:function(e){return Object(h.j)(Object(h.n)(Object(h.c)(_,"patients/".concat(e,"/food_entry")),Object(h.m)("time","desc")))},newDocRef:function(e){return Object(h.g)(Object(h.c)(_,e))},pushPatientVisitData:function(e,t,a){return Object(h.o)(_,function(){var n=Object(p.a)(d.a.mark((function n(r){var i,o,l,s,u,m;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(h.g)(_,"patients",a),n.next=3,r.get(i);case 3:if(o=n.sent,l=!1,o.exists()){n.next=10;break}return l=!0,n.next=9,r.get(Object(h.g)(_,"control_group_patients",a));case 9:o=n.sent;case 10:if(s=o.data(),s.doctorId===c.uid){n.next=13;break}throw new Error("It is not your patient");case 13:if(!l){n.next=16;break}return u=Object(h.g)(_,"control_group_patients/".concat(a,"/visits"),t),n.abrupt("return",r.update(u,e));case 16:return m=Object(h.g)(_,"patients/".concat(a,"/visits"),t),n.abrupt("return",r.update(m,e));case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},pullPatientVisitData:function(e,t){return Object(h.o)(_,function(){var a=Object(p.a)(d.a.mark((function a(n){var r,i,o,l,s,u;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Object(h.g)(_,"patients",t),a.next=3,n.get(r);case 3:if(i=a.sent,o=!1,i.exists()){a.next=10;break}return o=!0,a.next=9,n.get(Object(h.g)(_,"control_group_patients",t));case 9:i=a.sent;case 10:if(l=i.data(),l.doctorId===c.uid){a.next=13;break}throw new Error("It is not your patient");case 13:if(!o){a.next=16;break}return s=Object(h.g)(_,"control_group_patients/".concat(t,"/visits"),e),a.abrupt("return",n.get(s));case 16:return u=Object(h.g)(_,"patients/".concat(t,"/visits"),e),a.abrupt("return",n.get(u));case 18:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getUrlNotificationIcon:function(){return Object(g.a)(Object(g.c)(j,"mobile/aovr.png"))},sendNotification:function(e){var t="https://iot4care.di.univr.it/".concat("notification");return P.a.post(t,e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken),"Access-Control-Allow-Origin":"*"}})},getNotifications:function(e){return Object(h.j)(Object(h.n)(Object(h.c)(_,"patients/".concat(e,"/notifications")),Object(h.m)("event_time","desc")))},createNotification:function(e,t){return Object(h.o)(_,function(){var a=Object(p.a)(d.a.mark((function a(n){var r,i,o,l;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Object(h.g)(_,"patients",t),a.next=3,n.get(r);case 3:if((i=a.sent).exists()){a.next=6;break}throw new Error("Patient does not exist");case 6:if(o=i.data(),o.doctorId===c.uid){a.next=9;break}throw new Error("It is not your patient");case 9:l=Object(h.g)(Object(h.c)(_,"patients/".concat(t,"/notifications"))),n.set(l,e);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},updateNotification:function(e,t,a){return Object(h.r)(Object(h.g)(_,"patients/".concat(t,"/notifications"),a),e)},getPathologies:function(){return Object(h.j)(Object(h.c)(_,"pathologies"))},listWorkouts:function(){return Object(h.j)(x.workouts)},updatePatientAppointments:function(e,t){return Object(h.o)(_,function(){var a=Object(p.a)(d.a.mark((function a(n){var r,i,o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Object(h.g)(_,"patients",t),a.next=3,n.get(r);case 3:if((i=a.sent).exists()){a.next=6;break}throw new Error("Patient does not exist");case 6:if(o=i.data(),o.doctorId===c.uid){a.next=9;break}throw new Error("It is not your patient");case 9:n.update(r,{appointments:e});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},updatePatientWorkouts:function(e,t){return Object(h.r)(w(t),e)},getPatientNotifications:function(){return Object(h.j)(Object(h.d)(_,"notifications"))},getPatientVisits:function(e){return Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i,c,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.g)(_,"patients",e),t.next=3,a.get(n);case 3:if(!t.sent.exists()){t.next=10;break}return r=Object(h.c)(_,"patients/".concat(e,"/visits")),i=Object(h.n)(r,Object(h.m)("createdAt","asc")),t.abrupt("return",Object(h.j)(i));case 10:return c=Object(h.c)(_,"control_group_patients/".concat(e,"/visits")),o=Object(h.n)(c,Object(h.m)("createdAt","asc")),t.abrupt("return",Object(h.j)(o));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getDailyPatientNutrients:function(e){var t="https://iot4care.di.univr.it/".concat("diet-stats"),a=new FormData;a.append("user_id",e.user_id),a.append("today_date",e.today_date);var n={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(c.accessToken),"Access-Control-Allow-Origin":"*"}};return P.a.post(t,a,n)},updateSeenNotificationStatus:function(e,t){return Object(h.o)(_,function(){var a=Object(p.a)(d.a.mark((function a(n){var r,i,c,o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Object(h.g)(_,"patients/".concat(e,"/notifications"),t),a.next=3,n.get(r);case 3:if((i=a.sent).exists()){a.next=6;break}throw new Error("Document does not exists.");case 6:c=i.data(),o=c.seen,n.update(r,{seen:!o});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getNutritionalPlanTemplates:function(){return Object(h.j)(Object(h.c)(_,"templates_nutritional_plan"))},updateNutritionalPlanTemplate:function(e,t){return Object(h.p)(Object(h.g)(_,"templates_nutritional_plan",t),e)},createNutritionalPlanTemplate:function(e,t){return Object(h.p)(e,t)},deleteNutritionalPlanTemplate:function(e){var t=Object(h.g)(_,"templates_nutritional_plan",e);return Object(h.e)(t)},currentLanguage:S,updateCurrentLanguage:function(e){N((function(){return e})),I.setLanguage(e)},getPatientNutrients:function(e){var t="https://iot4care.di.univr.it/".concat("nutrients-stats"),a={patient_id:e},n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken),"Access-Control-Allow-Origin":"*"}};return P.a.post(t,a,n)},getPatientKcals:function(e){var t="https://iot4care.di.univr.it/".concat("workouts-stats"),a={user_id:e},n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken),"Access-Control-Allow-Origin":"*"}};return P.a.post(t,a,n)},updatePatientStatus:function(e,t){return Object(h.o)(_,function(){var a=Object(p.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",n.update(w(e),{status:t}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getPatientVisit:function(e,t){var a=Object(h.g)(_,"patients/".concat(e,"/visits"),t);return Object(h.i)(a)},createPatientVisit:function(e,t){return Object(h.o)(_,function(){var a=Object(p.a)(d.a.mark((function a(n){var r,i,o,l;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Object(h.g)(_,"patients",e),a.next=3,n.get(r);case 3:if(i=a.sent,o=i.data(),l=o.doctorId,!i.exists()||l!==c.uid){a.next=9;break}return a.abrupt("return",n.set(Object(h.g)(Object(h.c)(_,"patients/".concat(e,"/visits"))),t));case 9:return a.abrupt("return",n.set(Object(h.g)(Object(h.c)(_,"control_group_patients/".concat(e,"/visits"))),t));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},removePatientVisit:function(e,t){var a=Object(h.g)(_,"patients/".concat(e,"/visits"),t);return Object(h.e)(a)},updatePatient:function(e,t){return Object(h.o)(_,function(){var a=Object(p.a)(d.a.mark((function a(n){var r,i,o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Object(h.g)(_,"patients",e),a.next=3,n.get(r);case 3:if((i=a.sent).exists()){a.next=6;break}throw new Error("Patient does not exists");case 6:if(o=i.data(),o.doctorId===c.uid){a.next=9;break}throw new Error("It's not your patient");case 9:return a.abrupt("return",n.update(r,t));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getPatientProtected:function(e){return Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.g)(_,"patients",e),t.next=3,a.get(n);case 3:if((r=t.sent).exists()){t.next=6;break}throw new Error("Patient does not exist");case 6:if((i=r.data()).doctorId===c.uid){t.next=11;break}throw new Error("It is not your patient");case 11:return t.abrupt("return",Object(u.a)(Object(u.a)({},i),{},{uid:r.id}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getStatistics:function(){var e="https://iot4care.di.univr.it/".concat("patients/statistics");return P.a.get(e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken),"Access-Control-Allow-Origin":"*"}})},dropOutPatient:function(e){return Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.g)(_,"patients",e),t.next=3,a.get(n);case 3:if((r=t.sent).exists()){t.next=6;break}throw new Error("Patient does not exist");case 6:if(i=r.data(),i.doctorId===c.uid){t.next=9;break}throw new Error("It is not your patient");case 9:a.set(Object(h.g)(_,"dropped_patients",e),Object(u.a)(Object(u.a)({},r.data()),{},{id:e,droppedAt:h.a.now()})).delete(n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getDroppedPatients:function(){var e=Object(h.n)(Object(h.c)(_,"dropped_patients"),Object(h.s)("doctorId","==",c.uid));return Object(h.j)(e)},createPatientGroupControl:function(e){var t=Object(h.c)(_,W),a=Object(h.g)(t);return Object(h.p)(a,Object(u.a)(Object(u.a)({},e),{},{doctorId:c.uid,createdAt:h.a.now()}))},removeControlGroupPatient:function(e){Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.forEach(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(h.g)(_,W,t),e.next=3,a.get(n);case 3:if(!(r=e.sent).exists()){e.next=15;break}return i=Object(h.g)(_,"patients",t),e.next=8,a.get(i);case 8:if(e.sent.exists()){e.next=12;break}a.set(i,r.data()),e.next=13;break;case 12:console.debug("patient already exist ",i.id);case 13:e.next=16;break;case 15:console.debug("patient does not exist ",t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getPatientById:function(e){return Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.g)(_,"patients",e),t.next=3,a.get(n);case 3:if(!(r=t.sent).exists()){t.next=8;break}return t.abrupt("return",r.data());case 8:return t.next=10,a.get(Object(h.g)(_,"control_group_patients",e));case 10:return t.abrupt("return",t.sent.data());case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removePathology:function(e){var t=Object(h.g)(_,"pathologies",e);return Object(h.e)(t)},createPathology:function(e,t){return Object(h.p)(e,t)},updateFood:function(e,t){return Object(h.r)(Object(h.g)(_,"foods",e),t)},getPathologyById:function(e){return Object(h.i)(Object(h.g)(_,"pathologies",e))},getFoodsAfter:function(e,t){var a=Object(h.n)(Object(h.c)(_,"foods"),Object(h.m)("name","asc"),Object(h.l)(e),Object(h.q)(t));return Object(h.j)(a)},getFoodsBefore:function(e,t){var a=Object(h.n)(Object(h.c)(_,"foods"),Object(h.m)("name","asc"),Object(h.l)(e),Object(h.h)(t));return Object(h.j)(a)},searchFoodByName:function(e){var t=Object(h.n)(Object(h.c)(_,"foods"),Object(h.m)("name","asc"),Object(h.s)("name","<=",e+"\uf8ff"),Object(h.s)("name",">=",e),Object(h.l)(25));return Object(h.j)(t)},getFoodsWithLimit:function(e){var t=Object(h.n)(Object(h.c)(_,"foods"),Object(h.m)("name","asc"),Object(h.l)(e));return Object(h.j)(t)},setPatientDroppedOut:function(e){return Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.g)(_,"patients",e),t.next=3,a.get(n);case 3:if((r=t.sent).exists()){t.next=6;break}throw new Error("Patient does not exist");case 6:if(i=r.data(),i.doctorId===c.uid){t.next=9;break}throw new Error("It is not your patient");case 9:a.update(n,{dropped:!0,droppedAt:h.a.now()});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},recoverDroppedPatient:function(e){return Object(h.o)(_,function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,i,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(h.g)(_,"patients",e),t.next=3,a.get(n);case 3:if((r=t.sent).exists()){t.next=6;break}throw new Error("Patient does not exist");case 6:if(i=r.data(),o=i.doctorId,l=i.dropped,o===c.uid){t.next=9;break}throw new Error("It is not your patient");case 9:void 0!==l&&l&&a.update(n,{dropped:!1});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},exportPatientVisits:function(e,t){var a="https://iot4care.di.univr.it/".concat("export-patient-visits"),n={patients:e,headers:t},r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.accessToken),"Access-Control-Allow-Origin":"*"}};return P.a.post(a,n,r)},modifyPatientVisit:function(e,t,a){return Object(h.o)(_,function(){var n=Object(p.a)(d.a.mark((function n(r){var i,o,l,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(h.g)(_,"patients",e),n.next=3,r.get(i);case 3:if((o=n.sent).exists()){n.next=6;break}throw new Error("Patient does not exist");case 6:if(l=o.data(),l.doctorId===c.uid){n.next=9;break}throw new Error("It is not your patient");case 9:s=Object(h.g)(_,"patients/".concat(e,"/visits"),t),r.update(s,a);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},deletePatientVisit:function(e,t){var a=Object(h.g)(_,"patients/".concat(e,"/visits"),t);return Object(h.e)(a)}};return i.a.createElement(z.Provider,{value:F},!m&&t)}var F=a(63);var L=a(30),R=["component"];function B(e){var t=e.component,a=Object(L.a)(e,R),n=A().currentUser;return i.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?i.a.createElement(t,e):i.a.createElement(s.a,{to:"/login"})}}))}var M=a(564),V=a(339),G=a(565),H=a(566),U=a(613),Q=a(621),$=a(567),K=a(569),J=a(571),Y=a(342),X=a(506),Z=a(105),ee=a.n(Z),te=a(106),ae=a.n(te),ne=a(335),re=a(562),ie=a(563),ce=a(616),oe=a(568),le=Object(ne.a)(),se=Object(re.a)((function(e){return{errorAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},mainLogo:{width:e.spacing(12),height:e.spacing(12)}}}));var ue=a(86),me=a.n(ue),de=(a(210),a(572)),pe=a(617);var fe=Object(ne.a)(),be=Object(re.a)((function(e){return{errorAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},mainLogo:{width:e.spacing(12),height:e.spacing(12)}}}));var ge=a(144),he=a(336),ve=a(573),Ee=a(574),Oe=a(575),ye=a(576),je=a(570),ke=a(507),_e=a(577),xe=a(12),we=(a(296),a(168)),Ce=a.n(we),Pe=(a(297),a(84)),Se=a.n(Pe),Ne=a(98),Ie=a.n(Ne),De=a(107),Te=a.n(De),ze=a(97),We=a.n(ze),Ae=a(122),qe=a.n(Ae),Fe=a(121),Le=a.n(Fe),Re=a(137),Be=a.n(Re),Me=["children"],Ve=["children"],Ge=["children"];Object(re.a)((function(e){return{skeleton:{paddingTop:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Object(xe.a)((function(){return{root:{color:"#ffc107"}}}))((function(e){e.children;var t=Object(L.a)(e,Me);return i.a.createElement(Le.a,t)})),Object(xe.a)((function(){return{root:{color:"#f44336"}}}))((function(e){e.children;var t=Object(L.a)(e,Ve);return i.a.createElement(qe.a,t)})),Object(xe.a)((function(){return{root:{color:"#4caf50"}}}))((function(e){e.children;var t=Object(L.a)(e,Ge);return i.a.createElement(We.a,t)}));var He=a(31),Ue=a(23),Qe=a(578),$e=a(579),Ke=a(580),Je=a(581),Ye=a(582),Xe=a(500),Ze=a(501),et=a(513),tt=a(505),at=a(584),nt=a(585),rt=a(586),it=a(587),ct=a(588),ot=a(589),lt=a(590),st=a(620),ut=a(75),mt=a.n(ut),dt=a(74),pt=a.n(dt),ft=a(171),bt=a.n(ft),gt=a(170),ht=a.n(gt),vt=a(123),Et=a.n(vt),Ot=[{id:"breakfast",label:"Breakfast"},{id:"morning_break",label:"Morning"},{id:"lunch",label:"Lunch"},{id:"afternoon_break",label:"Afternoon break"},{id:"dinner",label:"Dinner"}],yt=[{id:"mon",name:"Monday"},{id:"tue",name:"Tuesday"},{id:"wed",name:"Wednesday"},{id:"thu",name:"Thursday"},{id:"fri",name:"Friday"},{id:"sat",name:"Saturday"},{id:"sun",name:"Sunday"}],jt=a(6),kt=a(7),_t=a(16),xt=a(17),wt=a(619),Ct=function(e){Object(_t.a)(a,e);var t=Object(xt.a)(a);function a(){var e;Object(jt.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(t,a){"clickaway"!==a&&e.props.close()},e}return Object(kt.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.open,r=t.severity;return i.a.createElement(wt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,autoHideDuration:5e3,onClose:function(){return e.handleClose()},ContentProps:{"aria-describedby":"message-id"},action:[i.a.createElement(Y.a,{key:"close","aria-label":"Close",color:"inherit",onClick:function(){return e.handleClose()}},i.a.createElement(pt.a,null))]},i.a.createElement(ce.a,{severity:r,elevation:6,variant:"filled"},a))}}]),a}(i.a.Component);Ct.defaultProps={severity:"success"};var Pt=Ct,St=a(172),Nt=a.n(St),It=["children","onClose"],Dt=Object(re.a)((function(e){return{headerTable:{backgroundColor:"#f1f1f1"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},formControl:{margin:e.spacing(1),minWidth:120},foods:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},search:Object(S.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Ue.a)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(Ue.a)(e.palette.common.black,.05)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(S.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),Tt=Object(xe.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Qe.a),zt=Object(xe.a)((function(e){return{head:{backgroundColor:e.palette.common.white,color:e.palette.common.black},body:{fontSize:14}}}))($e.a),Wt=Object(xe.a)((function(){return{root:{backgroundColor:"#fff",color:"#000"}}}))(Ke.a),At=function(e){var t=e.children,a=e.onClose,n=Object(L.a)(e,It);return i.a.createElement(Wt,n,t,a?i.a.createElement(Y.a,{"aria-label":"close",onClick:a,style:{position:"absolute",right:8,top:8}},i.a.createElement(pt.a,null)):null)};var qt=a(124),Ft=a.n(qt),Lt=a(95),Rt=a.n(Lt),Bt=a(299),Mt=a.n(Bt),Vt=["children","onClose"],Gt=Object(re.a)((function(e){return{headerTable:{backgroundColor:"#f1f1f1"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},formControl:{margin:e.spacing(1),minWidth:120},foods:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},search:Object(S.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Ue.a)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(Ue.a)(e.palette.common.black,.05)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(S.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),Ht=Object(xe.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Qe.a),Ut=Object(xe.a)((function(e){return{head:{backgroundColor:e.palette.common.white,color:e.palette.common.black},body:{fontSize:14}}}))($e.a),Qt=Object(xe.a)((function(){return{root:{backgroundColor:"#fff",color:"#000"}}}))(Ke.a),$t=function(e){var t=e.children,a=e.onClose,n=Object(L.a)(e,Vt);return i.a.createElement(Qt,n,t,a?i.a.createElement(Y.a,{"aria-label":"close",onClick:a,style:{position:"absolute",right:8,top:8}},i.a.createElement(pt.a,null)):null)};var Kt=a(623),Jt=Object(re.a)({root:{width:"100%"},table:{minWidth:650},container:{maxHeight:640}});function Yt(e){var t=e.foods,a=e.handleModifyDialog,n=Jt(),r=i.a.useState(0),c=Object(f.a)(r,2),o=c[0],l=c[1],s=i.a.useState(25),u=Object(f.a)(s,2),m=u[0],d=u[1];return i.a.createElement(ge.a,{className:n.root},i.a.createElement(it.a,{className:n.container},i.a.createElement(ct.a,{size:"small","aria-label":"foods table",stickyHeader:!0},i.a.createElement(ot.a,null,i.a.createElement(Qe.a,null,i.a.createElement($e.a,null,I.pageTitles.foods),i.a.createElement($e.a,{align:"right"},I.nutrients.calcium),i.a.createElement($e.a,{align:"right"},I.nutrients.fats),i.a.createElement($e.a,{align:"right"},I.nutrients.carbs),i.a.createElement($e.a,{align:"right"},I.nutrients.chol),i.a.createElement($e.a,{align:"right"},I.nutrients.prots),i.a.createElement($e.a,{align:"right"},I.nutrients.energy),i.a.createElement($e.a,{align:"right"}))),i.a.createElement(lt.a,null,t.slice(o*m,o*m+m).map((function(e,t){return i.a.createElement(Qe.a,{key:e.uid},i.a.createElement($e.a,{component:"th",scope:"row"},"".concat(t+1+o*m,". ").concat(e.name)),i.a.createElement($e.a,{align:"right"},e.calcium),i.a.createElement($e.a,{align:"right"},e.fats),i.a.createElement($e.a,{align:"right"},e.carbs),i.a.createElement($e.a,{align:"right"},e.chol),i.a.createElement($e.a,{align:"right"},e.proteins),i.a.createElement($e.a,{align:"right"},e.energy),i.a.createElement($e.a,{align:"right"},i.a.createElement(Y.a,{onClick:function(){return a(e.id)},size:"small"},i.a.createElement(mt.a,{fontSize:"small"}))))}))))),i.a.createElement(Kt.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.length,rowsPerPage:m,page:o,onPageChange:function(e,t){l(t)},onRowsPerPageChange:function(e){d(parseInt(e.target.value,10)),l(0)}}))}var Xt=["inputMeal","handleChangeValues","open","onClose"],Zt=Object(re.a)((function(e){return{root:{margin:0},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));function ea(e){var t=e.inputMeal,a=(e.handleChangeValues,e.open),n=e.onClose,r=Object(L.a)(e,Xt),c=Zt(),o=i.a.useState({calcium:0,carbs:0,chol:0,energy:0,fats:0,proteins:0,name:"",id:"",uid:""}),l=Object(f.a)(o,2),s=l[0],m=l[1];i.a.useEffect((function(){a&&m((function(){return{calcium:t.calcium,carbs:t.carbs,chol:t.chol,energy:t.energy,fats:t.fats,proteins:t.proteins,name:t.name,id:t.id,uid:t.uid}}))}),[a,t]);var d=function(e){var t=e.target;m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))};return i.a.createElement(Je.a,Object.assign({maxWidth:"xs",fullWidth:!0,open:a,scroll:"paper"},r),i.a.createElement(Ke.a,{className:c.root},i.a.createElement(F.a,{variant:"button",color:"textPrimary"},"Modifica pasto alimentare"),i.a.createElement(Y.a,{className:c.closeButton,onClick:function(){return n()}},i.a.createElement(pt.a,null))),i.a.createElement(Ye.a,null,i.a.createElement(K.a,{id:"name",name:"name",type:"text",size:"small",margin:"dense",label:"Nome",fullWidth:!0,variant:"outlined",value:s.name,onChange:d}),i.a.createElement(K.a,{id:"calcium",name:"calcium",type:"number",inputProps:{step:"0.01"},size:"small",margin:"dense",label:I.nutrients.calcium,fullWidth:!0,variant:"outlined",value:s.calcium,onChange:d}),i.a.createElement(K.a,{id:"carbs",name:"carbs",type:"number",inputProps:{step:"0.01"},size:"small",margin:"dense",label:I.nutrients.carbs,fullWidth:!0,variant:"outlined",value:s.carbs,onChange:d}),i.a.createElement(K.a,{id:"chol",name:"chol",type:"number",inputProps:{step:"0.01"},size:"small",margin:"dense",label:I.nutrients.chol,fullWidth:!0,variant:"outlined",value:s.chol,onChange:d}),i.a.createElement(K.a,{id:"energy",name:"energy",type:"number",inputProps:{step:"0.01"},size:"small",margin:"dense",label:I.nutrients.energy,fullWidth:!0,variant:"outlined",value:s.energy,onChange:d}),i.a.createElement(K.a,{id:"fats",name:"fats",type:"number",inputProps:{step:"0.01"},size:"small",margin:"dense",label:I.nutrients.fats,fullWidth:!0,variant:"outlined",value:s.fats,onChange:d}),i.a.createElement(K.a,{id:"proteins",name:"proteins",type:"number",inputProps:{step:"0.01"},size:"small",margin:"dense",label:I.nutrients.prots,fullWidth:!0,variant:"outlined",value:s.proteins,onChange:d})),i.a.createElement(at.a,null,i.a.createElement(X.a,{variant:"text",color:"secondary",onClick:function(){return n()}},"Annulla"),i.a.createElement(X.a,{color:"primary",variant:"contained",onClick:function(){return n(s)}},"Conferma")))}var ta=Object(re.a)({root:{width:"100%"},table:{minWidth:650},container:{maxHeight:640}});function aa(e){var t=e.workouts,a=ta(),n=i.a.useState(0),r=Object(f.a)(n,2),c=r[0],o=r[1],l=i.a.useState(25),s=Object(f.a)(l,2),u=s[0],m=s[1];return i.a.createElement(ge.a,{className:a.root},i.a.createElement(it.a,{className:a.container},i.a.createElement(ct.a,{size:"small","aria-label":"workouts table",stickyHeader:!0},i.a.createElement(ot.a,null,i.a.createElement(Qe.a,null,i.a.createElement($e.a,null,I.pageTitles.workouts),i.a.createElement($e.a,{align:"right"},"MET"),i.a.createElement($e.a,{align:"right"},"ID"))),i.a.createElement(lt.a,null,t.slice(c*u,c*u+u).map((function(e,t){return i.a.createElement(Qe.a,{key:"".concat(e.uid),hover:!0},i.a.createElement($e.a,{component:"th",scope:"row"},"".concat(t+1+c*u,". ").concat(e.name)),i.a.createElement($e.a,{align:"right"},e.MET),i.a.createElement($e.a,{align:"right"},e.id))}))))),i.a.createElement(Kt.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.length,rowsPerPage:u,page:c,onPageChange:function(e,t){o(t)},onRowsPerPageChange:function(e){m(parseInt(e.target.value,10)),o(0)}}))}var na=a(592),ra=a(593),ia=a(514),ca=a(509);function oa(e){var t=e.handleGenderChange,a=e.handleTextFieldChange,n=e.handlePregnantChange,r=e.gender,c=e.lastName,o=e.firstName,l=e.dateOfBirth,s=e.isPregnant;return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"h6",gutterBottom:!0},"Dati anagrafici"),i.a.createElement($.a,{container:!0,spacing:3},i.a.createElement($.a,{item:!0,xs:12,sm:6},i.a.createElement(K.a,{required:!0,id:"firstName",name:"firstName",label:I.patient.first_name,fullWidth:!0,autoComplete:"given-name",value:o,type:"text",onChange:a,variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12,sm:6},i.a.createElement(K.a,{required:!0,id:"lastName",name:"lastName",label:I.patient.last_name,fullWidth:!0,autoComplete:"family-name",value:c,type:"text",onChange:a,variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12,sm:6},i.a.createElement(Xe.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(Ze.a,{id:"select-gender-label"},I.patient.gender),i.a.createElement(et.a,{fullWidth:!0,required:!0,labelId:"select-gender-label",id:"select-gender",inputProps:{name:"gender"},value:r,onChange:t,variant:"outlined",label:I.patient.gender},i.a.createElement(ve.a,{value:""},"-"),i.a.createElement(ve.a,{value:"male"}," ",I.general.male),i.a.createElement(ve.a,{value:"female"}," ",I.general.female)))),i.a.createElement($.a,{item:!0,xs:12,sm:6},i.a.createElement(K.a,{InputLabelProps:{shrink:!0},fullWidth:!0,required:!0,name:"dateOfBirth",type:"date",label:I.patient.dateOfBirth,value:l,onChange:a,variant:"outlined",helperText:"es. 01/01/1999"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ca.a,{row:!0},i.a.createElement(de.a,{disabled:"female"!==r,label:"Incinta",control:i.a.createElement(pe.a,{checked:s,onChange:n,name:"isPregnant",color:"secondary"})})))))}oa.defaultProps={pageName:I.visit.steps.data_patient};var la=oa;var sa=function(e){var t=e.handleTextFieldChange,a=e.height,n=e.weight,r=e.therapyStartDate,c=e.therapyEndDate,o=e.handleGroupChange,l=e.controlGroup;return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"h6",gutterBottom:!0},"Altri dettagli"),i.a.createElement($.a,{container:!0,spacing:3},i.a.createElement($.a,{item:!0,xs:12,md:6},i.a.createElement(K.a,{fullWidth:!0,required:!0,name:"height",type:"number",label:"Altezza",helperText:"cm",value:a,onChange:t,variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12,md:6},i.a.createElement(K.a,{fullWidth:!0,required:!0,name:"weight",type:"number",label:"Peso",helperText:"kg",value:n,onChange:t,variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12,md:6},i.a.createElement(K.a,{InputLabelProps:{shrink:!0},fullWidth:!0,required:!0,name:"therapyStartDate",type:"date",label:"Data inizio terapia",value:r,onChange:t,variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12,md:6},i.a.createElement(K.a,{InputLabelProps:{shrink:!0},fullWidth:!0,name:"therapyEndDate",type:"date",label:"Data fine terapia",value:c,onChange:t,variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(de.a,{control:i.a.createElement(pe.a,{color:"primary",name:"controlGroup",checked:l,onChange:o}),label:"Gruppo di Controllo"}))))};var ua=function(e){var t=e.email,a=e.password,n=e.handleTextFieldChange,c=e.phoneNumber,o=Object(r.useState)(!1),l=Object(f.a)(o,2),s=l[0],u=l[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"h6",gutterBottom:!0},I.patient.patient_account),i.a.createElement($.a,{container:!0,spacing:3,direction:"row"},i.a.createElement($.a,{item:!0,xs:!0},i.a.createElement(K.a,{fullWidth:!0,name:"email",label:I.patient.email,value:t,onChange:n,variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:!0},i.a.createElement(K.a,{fullWidth:!0,name:"password",type:s?"text":"password",id:"patient-account-password",autoComplete:"new-password",label:I.account.password,value:a,onChange:n,variant:"outlined",InputProps:{endAdornment:i.a.createElement(J.a,{position:"end"},i.a.createElement(Y.a,{"aria-label":"toggle password visibility",onClick:function(){u((function(e){return!e}))},onMouseDown:function(e){e.preventDefault()}},s?i.a.createElement(ee.a,null):i.a.createElement(ae.a,null)))}})),i.a.createElement($.a,{item:!0,xs:!0},i.a.createElement(K.a,{fullWidth:!0,type:"tel",name:"phoneNumber",label:"Cellulare",value:c,onChange:n,variant:"outlined"}))))};function ma(e){var t=e.message,a=e.error,n=e.firstName,r=e.lastName,c=e.gender,o=e.height,l=e.weight,s=e.email,u=e.therapyStartDate,m=e.therapyEndDate,d=e.dateOfBirth,p=e.phoneNumber,f=e.isPregnant;return i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"h6",gutterBottom:!0,color:"textPrimary"},I.visit.steps.data_patient),i.a.createElement($.a,{container:!0,spacing:3},i.a.createElement($.a,{item:!0,xs:12},a&&i.a.createElement(ce.a,{severity:"error"},i.a.createElement(oe.a,null,a)),t&&i.a.createElement(ce.a,{severity:"success"},i.a.createElement(oe.a,null,t))),i.a.createElement($.a,{item:!0,xs:12,md:6},i.a.createElement(je.a,{dense:!0},i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.patient.first_name,primary:n})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.patient.last_name,primary:r})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.patient.dateOfBirth,primary:d})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.patient.gender,primary:"male"===c?I.general.male:I.general.female})),f?i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:I.patient.pregnant})):i.a.createElement(ke.a,null),i.a.createElement(ye.a,null),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.measures.height,primary:"".concat(o," cm")})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.measures.weight,primary:"".concat(l," kg")})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.therapy.start,primary:u})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.therapy.end,primary:m})),i.a.createElement(ye.a,null),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:"Cellulare",primary:p})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.patient.email,primary:s}))))))}var da=Object(re.a)((function(e){return{layout:{width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},paper:Object(S.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var pa=function(){var e=da(),t=i.a.useState(0),a=Object(f.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(new Set),l=Object(f.a)(o,2),s=l[0],m=l[1],b=function(e){return 1===e},g=function(e){return s.has(e)},v=i.a.useState({gender:"",lastName:"",firstName:"",dateOfBirth:"",height:"",weight:"",therapyStartDate:"",therapyEndDate:"",email:"",password:"",backdrop:!1,isPregnant:!1,phoneNumber:"",controlGroup:!1}),E=Object(f.a)(v,2),O=E[0],y=E[1],j=Object(r.useState)(""),k=Object(f.a)(j,2),_=k[0],x=k[1],w=Object(r.useState)(""),C=Object(f.a)(w,2),P=C[0],N=C[1],D=Object(r.useRef)(null),T=A(),z=T.createPatient,W=(T.createPatientGroupControl,[I.account.personal_data,I.patient.patient_account,I.pageTitles.details_patient]),q=function(e){var t=e.target;y((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},L=function(e){var t=e.target;y((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},R=function(e){var t=e.target;y((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.checked))}))};i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,i,c,o,l,s,m,p,f,b,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.dateOfBirth,a=O.email,n=O.password,r=O.height,i=O.weight,c=O.firstName,o=O.lastName,l=O.gender,s=O.therapyEndDate,m=O.therapyStartDate,p=O.isPregnant,f=O.phoneNumber,b=O.controlGroup,D.current&&(x((function(){return""})),N((function(){return""})),y((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})}))),g={height:parseInt(r),weight:[{value:parseInt(i),time:h.a.now()}],name:c,surname:o,gender:l,dateOfBirth:h.a.fromDate(new Date(t)),therapyStartDate:h.a.fromDate(new Date(m)),therapyEndDate:h.a.fromDate(new Date(s)),isPregnant:p,phoneNumber:f,status:"green",controlGroup:b,email:String(a).trim().toLowerCase(),password:me.a.hashSync(n,me.a.genSaltSync(10)).toString()},e.prev=3,e.next=6,z(g);case 6:D.current&&(N((function(){return"Il paziente e' stato correttamente creato."})),y((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),D.current&&(y((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),x((function(){return e.t0.message})));case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return D.current=!0,n===W.length&&e(),function(){return D.current=!1}}),[n,W.length]);var B=function(e){y((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},e.target.name,e.target.checked))}))},H=O.backdrop;return H?i.a.createElement(V.a,{open:H,className:e.backdrop},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:"md"},i.a.createElement($.a,{container:!0,direction:"row",spacing:1,justifyContent:"flex-start",alignItems:"center"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ge.a,{className:e.paper},i.a.createElement(F.a,{variant:"h5",align:"center",gutterBottom:!0},I.pageTitles.add_patient),i.a.createElement(na.a,{activeStep:n,className:e.stepper},W.map((function(e,t){var a={},n={};return b(t)&&(n.optional=i.a.createElement(F.a,{variant:"caption"},"Opzionale")),g(t)&&(a.completed=!1),i.a.createElement(ra.a,Object.assign({key:e},a),i.a.createElement(ia.a,n,e))}))),i.a.createElement("div",{id:"step-wrapper"},n===W.length?i.a.createElement(ma,{firstName:O.firstName,lastName:O.lastName,gender:O.gender,height:O.height,weight:O.weight,email:O.email,therapyStartDate:O.therapyStartDate,therapyEndDate:O.therapyEndDate,error:_,message:P,dateOfBirth:O.dateOfBirth,phoneNumber:O.phoneNumber,isPregnant:O.isPregnant}):i.a.createElement("div",{id:"step-content"},function(e){var t=O.gender,a=O.firstName,n=O.lastName,r=O.height,c=O.weight,o=O.therapyEndDate,l=O.therapyStartDate,s=O.email,u=O.password,m=O.dateOfBirth,d=O.isPregnant,p=O.phoneNumber,f=O.controlGroup;switch(e){case 0:return i.a.createElement(la,{handleTextFieldChange:L,handleGenderChange:q,handlePregnantChange:R,gender:t,firstName:a,lastName:n,dateOfBirth:m,isPregnant:d});case 1:return i.a.createElement(ua,{email:s,phoneNumber:p,password:u,handleTextFieldChange:L});case 2:return i.a.createElement(sa,{height:r,weight:c,controlGroup:f,therapyStartDate:l,therapyEndDate:o,handleTextFieldChange:L,handleGroupChange:B});default:throw new Error("Unknown step")}}(n),i.a.createElement("div",{className:e.buttons,id:"step-action-buttons"},0!==n&&i.a.createElement(X.a,{onClick:function(){c((function(e){return e-1}))},className:e.button},I.general.back),b(n)&&i.a.createElement(X.a,{className:e.button,variant:"contained",color:"primary",onClick:function(){if(!b(n))throw new Error("You cannot skip a step that is not optional.");c((function(e){return e+1})),m((function(e){var t=new Set(e.values());return t.add(n),t}))}},"Skip"),i.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){var e=s;g(n)&&(e=new Set(e.values())).delete(n),c((function(e){return e+1})),m(e)},className:e.button,disabled:!(O.firstName.length&&O.lastName.length&&O.gender.length&&O.dateOfBirth.length)},n===W.length-1?I.general.add:I.general.next))))))))},fa=a(594),ba=a(595),ga=a(60),ha=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},paper:{margin:e.spacing(3),borderRadius:24},card:{minHeight:160}}}));var va=a(614),Ea=a(596),Oa=a(597),ya=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ja(e){var t=i.a.useState({labels:[],data:[],backdropOpen:!1}),a=Object(f.a)(t,2),n=a[0],r=a[1],c=ya(),o=i.a.useRef(null),l=A(),s=l.getPatient,m=l.currentLanguage,b=i.a.useCallback((function(e){return s(e)}),[s]),g=e.patientId;i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],i=[],o.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!0})})),e.prev=3,e.next=6,b(t);case 6:(c=e.sent).exists&&c.data().weight.sort((function(e,t){return e.time.toDate()-t.time.toDate()})).forEach((function(e){var t=e.time.toDate();i.push(e.value),n.push(t.toLocaleDateString(a))})),o.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{labels:n,data:i,backdropOpen:!1})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),o.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!1})}));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}();return o.current=!0,e(g,m),function(){return o.current=!1}}),[g,m,b]);var h=n.backdropOpen,v=n.labels,E=n.data;return h?i.a.createElement(V.a,{className:c.backdrop,open:h},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:"md"},E.length?i.a.createElement(ga.c,{data:{labels:v,datasets:[{label:"".concat(I.measures.weight," (kg)"),data:E,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)",borderWidth:1}]}}):i.a.createElement(i.a.Fragment,null))}var ka=a(301),_a=a.n(ka),xa=a(300),wa=a.n(xa),Ca=a(129),Pa=a.n(Ca),Sa=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Na(e){var t=i.a.useState({labels:[],data_fats:[],data_proteins:[],data_carbs:[],data_sum:[],data:[{label:h.a.now(),carbs:0,fats:0,prots:0}],filter:"day",backdropOpen:!1,kcal_today_limit:841,kcal_actual:0,kcal_carbs_actual:0,kcal_proteins_actual:0,kcal_fats_actual:0,kcal_carbs_today_limit:74,kcal_proteins_today_limit:106,kcal_fats_today_limit:660,food_entries:[{id:"",time:"",type:1,quantity:1}],foods:[],group_day:{labels:[],total_kcal:[],kcal_carb:[],kcal_prot:[],kcal_fat:[]},group_month:{labels:[],total_kcal:[],kcal_carb:[],kcal_prot:[],kcal_fat:[]},group_year:{labels:[],total_kcal:[],kcal_carb:[],kcal_prot:[],kcal_fat:[]}}),a=Object(f.a)(t,2),n=a[0],c=a[1],o=e.patientId,l=i.a.useRef(null),s=A(),m=s.getBackendFoods,b=s.getFoodEntries,g=s.getDailyPatientNutrients,v=s.getPatientNutrients,E=s.currentLanguage,O=i.a.useState(new Date),y=Object(f.a)(O,2),j=y[0],k=y[1];i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r,i,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.getTimezoneOffset(),r=new Date(t.getTime()-60*n*1e3).toISOString().split("T")[0],i={user_id:a,today_date:r},e.next=6,g(i);case 6:o=e.sent,s=o.data,l.current&&c((function(e){return Object(u.a)(Object(u.a)({},e),s)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}();return l.current=!0,void 0!==j&&e(j,o),function(){return l.current=!1}}),[j,o]),i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,i,o,s,p,g,h,E,O,y,j,k,_,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.current&&c((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!0})})),a=[],n=[],r=[],i=[],o=[],s=new Date,p=s.getTimezoneOffset(),s=new Date(s.getTime()-60*p*1e3).toISOString().split("T")[0],e.prev=5,e.next=8,Promise.all([m(),b(t),v(t)]);case 8:g=e.sent,h=Object(f.a)(g,3),E=h[0].data,O=h[1],y=h[2].data,j=[],O.docs.forEach((function(e){var t=e.data(),c=E.find((function(e){return e.id===t.food_id}));if(void 0!==c){var l=t.time;o.push(l.toDate().toLocaleDateString());var s=t.quantity,u=9*c.fats*s/100;a.push(u);var m=4*c.proteins*s/100;n.push(m);var d=4*c.carbs*s/100;r.push(d),i.push(u+m+d),j.push({label:l,fats:u,prots:m,carbs:d})}})),k={labels:[],total_kcal:[],kcal_carb:[],kcal_prot:[],kcal_fat:[]},_={labels:[],total_kcal:[],kcal_carb:[],kcal_prot:[],kcal_fat:[]},x={labels:[],total_kcal:[],kcal_carb:[],kcal_prot:[],kcal_fat:[]},Object.keys(y.day).forEach((function(e){var t=y.day[e];k.kcal_carb.push(t.kcal_carb),k.kcal_fat.push(t.kcal_fat),k.kcal_prot.push(t.kcal_prot),k.total_kcal.push(t.total_kcal),k.labels.push(e)})),Object.keys(y.month).forEach((function(e){var t=y.month[e];_.kcal_carb.push(t.kcal_carb),_.kcal_fat.push(t.kcal_fat),_.kcal_prot.push(t.kcal_prot),_.total_kcal.push(t.total_kcal),_.labels.push(e)})),Object.keys(y.year).forEach((function(e){var t=y.year[e];x.kcal_carb.push(t.kcal_carb),x.kcal_fat.push(t.kcal_fat),x.kcal_prot.push(t.kcal_prot),x.total_kcal.push(t.total_kcal),x.labels.push(e)})),l.current&&c((function(e){return Object(u.a)(Object(u.a)({},e),{},{labels:k.labels,data_carbs:k.kcal_carb,data_fats:k.kcal_fat,data_proteins:k.kcal_prot,data_sum:k.total_kcal,data:j,backdropOpen:!1,foods:E,group_year:x,group_day:k,group_month:_})})),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),console.error(e.t0),l.current&&c((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!1})}));case 26:case"end":return e.stop()}}),e,null,[[5,22]])})));return function(t){return e.apply(this,arguments)}}();return l.current=!0,e(o),function(){return l.current=!1}}),[o]);var _=Object(r.useState)(!1),x=Object(f.a)(_,2),w=x[0],C=x[1],P=Sa(),N=n.backdropOpen,D=n.kcal_fats_actual,T=n.kcal_carbs_actual,z=n.kcal_proteins_actual,W=n.kcal_fats_today_limit,q=n.kcal_carbs_today_limit,F=n.kcal_proteins_today_limit;return N?i.a.createElement(V.a,{className:P.backdrop,open:N},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:w?"lg":"md"},i.a.createElement($.a,{container:!0,direction:"row",spacing:2,justifyContent:"space-between"},i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Xe.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(Ze.a,{id:"id-label-select"},"Filtro"),i.a.createElement(et.a,{labelId:"id-label-select",id:"id-select",label:"Filtro",name:"filter",value:n.filter,onChange:function(e){var t=e.target;c((function(e){var a=t.name,n=t.value,r=(e.data,e.group_day),i=e.group_month,c=e.group_year;switch(n){case"day":var o;return Object(u.a)(Object(u.a)({},e),{},(o={},Object(S.a)(o,a,n),Object(S.a)(o,"data_carbs",r.kcal_carb),Object(S.a)(o,"data_fats",r.kcal_fat),Object(S.a)(o,"data_proteins",r.kcal_prot),Object(S.a)(o,"labels",r.labels),Object(S.a)(o,"data_sum",r.total_kcal),o));case"year":var l;return Object(u.a)(Object(u.a)({},e),{},(l={},Object(S.a)(l,a,n),Object(S.a)(l,"labels",c.labels),Object(S.a)(l,"data_carbs",c.kcal_carb),Object(S.a)(l,"data_fats",c.kcal_fat),Object(S.a)(l,"data_proteins",c.kcal_prot),Object(S.a)(l,"data_sum",c.total_kcal),l));case"month":var s;return Object(u.a)(Object(u.a)({},e),{},(s={},Object(S.a)(s,a,n),Object(S.a)(s,"labels",i.labels),Object(S.a)(s,"data_carbs",i.kcal_carb),Object(S.a)(s,"data_fats",i.kcal_fat),Object(S.a)(s,"data_proteins",i.kcal_prot),Object(S.a)(s,"data_sum",i.total_kcal),s));default:return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},a,n))}}))}},i.a.createElement(ve.a,{value:"year"},I.general.year),i.a.createElement(ve.a,{value:"month"},I.general.month),i.a.createElement(ve.a,{value:"day"},I.general.day)))),i.a.createElement($.a,{item:!0},i.a.createElement(Y.a,{"aria-label":"set page size",onClick:function(){return C((function(e){return!e}))}},w?i.a.createElement(wa.a,null):i.a.createElement(_a.a,null))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ga.c,{data:{labels:n.labels,datasets:[{label:I.nutrients.carbs,data:n.data_carbs,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:I.nutrients.prots,data:n.data_proteins,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1},{label:I.nutrients.fats,data:n.data_fats,backgroundColor:"rgba(255, 159, 64, 0.2)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1},{label:"Tot.",data:n.data_sum,backgroundColor:"rgba(255, 1, 1, 0.2)",borderColor:"rgba(255, 1, 1, 1)",borderWidth:1}]}})),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(ga.b,{data:{labels:[I.nutrients.fats,I.nutrients.prots,I.nutrients.carbs],datasets:[{label:"limit",data:[W,F,q],backgroundColor:["rgba(255, 159, 64, 0.2)","rgba(153, 102, 255, 0.2)","rgba(75, 192, 192, 0.2)"],borderColor:["rgba(255, 159, 64, 1)","rgba(153, 102, 255, 1)","rgba(75, 192, 192, 1)"]},{label:"actual",data:[D,z,T],backgroundColor:["rgba(255, 159, 64, 0.2)","rgba(153, 102, 255, 0.2)","rgba(75, 192, 192, 0.2)"]}]},options:{plugins:{legend:{display:!0,labels:{usePointStyle:!0,pointStyle:"rect",textAlign:"left"},title:{display:!0,text:I.general.description,padding:1},position:"bottom",align:"start"},title:{text:"Nutrienti consumati del paziente",display:!0},tooltip:{callbacks:{footer:function(e){var t=e[0],a=t.dataIndex,n=t.dataset.data,r=n[a],i=n.reduce((function(e,t){return e+t}),0);return parseFloat(100*r/i).toFixed(2).concat("%")}}}}}})),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(K.a,{id:"current-date",label:"Data",type:"date",style:{marginLeft:"8px",marginRight:"8px",width:200},InputLabelProps:{shrink:!0},defaultValue:(new Date).toISOString().split("T")[0],onChange:function(e){var t=e.target.valueAsDate;Pa()(t).isValid()&&k((function(){return t}))}}),i.a.createElement(je.a,null,n.food_entries.length?n.food_entries.map((function(e){var t,a=e.id,r=e.type,c=e.quantity,o=e.time,l=null===(t=n.foods.find((function(e){return e.id===r})))||void 0===t?void 0:t.name,s=new Date(o).toLocaleString(E);return i.a.createElement(ke.a,{key:a,dense:!0,divider:!0},i.a.createElement(Oe.a,{primary:"".concat(l," - ").concat(c,"g"),secondary:s}))})):null))))}var Ia=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Da(e){var t=i.a.useState({labels:[],data:[],weight:0,list_patient_workouts:[{name:"",duration:0,time:""}],backdropOpen:!1}),a=Object(f.a)(t,2),n=a[0],r=a[1],c=Ia(),o=i.a.useRef(null),l=A(),s=l.currentLanguage,m=l.getPatientKcals,b=i.a.useCallback((function(e){return m(e)}),[m]),g=e.patientId;i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,i,c,l,s,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!0})})),e.prev=1,e.next=4,b(t);case 4:n=e.sent,i=n.data,c=n.status,n.statusText,200===c&&console.debug(i.length),l=null===i||void 0===i?void 0:i.map((function(e){return e.date})),s=null===i||void 0===i?void 0:i.map((function(e){return e.tot_kcal})),m=null===i||void 0===i||null===(a=i.map((function(e){return e.workouts?e:Object(u.a)(Object(u.a)({},e),{},{workouts:[]})})))||void 0===a?void 0:a.map((function(e){var t=e.workouts;if(t)return null===t||void 0===t?void 0:t.map((function(e){return{name:e[0],time:e[1],duration:e[2]}}))})),o.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{labels:l,data:s,list_patient_workouts:(null===m||void 0===m?void 0:m.flat())||[],backdropOpen:!1})})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!1})})),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return o.current=!0,void 0!==g&&e(g),function(){return o.current=!1}}),[g,b]);var h=n.list_patient_workouts,v=n.data,E=n.labels,O=n.backdropOpen;return O?i.a.createElement(V.a,{className:c.backdrop,open:O},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:"md"},i.a.createElement($.a,{container:!0,justifyContent:"center",spacing:2,direction:"row"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ga.c,{data:{labels:E,datasets:[{label:"kcal",data:v,backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]}})),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(je.a,{dense:!0},h.length?h.map((function(e,t){var a=e.name,n=e.time,r=e.duration,c="PASSI"===a?"":I.measures.minutes.toLowerCase();return i.a.createElement(ke.a,{key:"entry-key-".concat(t),divider:h.length!==t},i.a.createElement(Oe.a,{primary:"".concat(a," - ").concat(r," ").concat(c),secondary:new Date(n).toLocaleString(s)}))})):i.a.createElement(ke.a,null)))))}var Ta=a(302),za=a.n(Ta),Wa=a(303),Aa=a.n(Wa),qa=a(304),Fa=a.n(qa),La=["children","value","index","vertical"],Ra=Object(re.a)((function(e){return{root:{backgroundColor:"transparent"},fullWidth:{width:"100%"}}}));function Ba(e){var t=e.children,a=e.value,n=e.index,r=e.vertical,c=Object(L.a)(e,La),o=Ra();return i.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"tabpanel-".concat(n),"aria-labelledby":"tab-".concat(n),className:za()(r?o.root:"",o.fullWidth)},c),a===n&&i.a.createElement(U.a,{p:3},t))}function Ma(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}var Va=Object(re.a)((function(e){return{root:{flexGrow:1,display:"flex",height:"100%"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),Ga=Object(re.a)((function(e){return{root:{backgroundColor:"transparent",width:"100%"}}}));Object(re.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}));function Ha(e){var t=Ga(),a=i.a.useState(0),n=Object(f.a)(a,2),r=n[0],c=n[1];return i.a.createElement("div",{className:t.root},i.a.createElement(Oa.a,{position:"static",color:"default"},i.a.createElement(va.a,{value:r,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",centered:!0,"aria-label":"full width tabs example"},i.a.createElement(Ea.a,Object.assign({label:I.measures.weight},Ma(0))),i.a.createElement(Ea.a,Object.assign({label:I.visit.nutrients},Ma(1))),i.a.createElement(Ea.a,Object.assign({label:I.pageTitles.workouts},Ma(2))))),i.a.createElement(Ba,{value:r,index:0,vertical:!0},i.a.createElement(ja,e)),i.a.createElement(Ba,{value:r,index:1,vertical:!0},i.a.createElement(Na,e)),i.a.createElement(Ba,{value:r,index:2,vertical:!0},i.a.createElement(Da,e)))}var Ua=a(598),Qa=a(599),$a=a(305),Ka=a.n($a),Ja=a(173),Ya=a.n(Ja),Xa=a(622),Za=Object(re.a)((function(e){return{input:{color:"red"},cardActions:{display:"flex",justifyContent:"flex-end"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var en=function(e){var t,a,n=Object(s.g)().patientId,r=null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.token,c=i.a.useState({notifications:[],nextFetch:1,image:"",date:new Date,backdrop:!1,filtered:[],filter:"all",tokenError:""}),o=Object(f.a)(c,2),l=o[0],m=o[1],b=i.a.useState({title:"",emptyTitle:!1,description:"",emptyDescription:!1}),g=Object(f.a)(b,2),v=g[0],E=g[1],O=A(),y=O.getNotifications,j=O.createNotification,k=(O.getUrlNotificationIcon,O.sendNotification),_=O.updateSeenNotificationStatus,x=i.a.useCallback((function(e){return y(e)}),[y]),w=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.title,a=v.description,0!==(null===t||void 0===t?void 0:t.length)){e.next=3;break}return e.abrupt("return",E((function(e){return Object(u.a)(Object(u.a)({},e),{},{emptyTitle:!0})})));case 3:if(0!==(null===a||void 0===a?void 0:a.length)){e.next=5;break}return e.abrupt("return",E((function(e){return Object(u.a)(Object(u.a)({},e),{},{emptyDescription:!0})})));case 5:void 0!==r&&null!==r&&"undefined"!==r&&"null"!==r?k({notification:{title:t,body:a},registrationToken:r},r).then((function(e){var r={title:t,body:a,event_time:h.a.now(),category:"manual"};j(r,n).then((function(){E((function(e){return Object(u.a)(Object(u.a)({},e),{},{title:"",description:"",emptyDescription:!1,emptyTitle:!1})})),m((function(e){return Object(u.a)(Object(u.a)({},e),{},{nextFetch:e.nextFetch+1,tokenError:""})}))})).catch((function(e){console.error(e),m((function(t){return Object(u.a)(Object(u.a)({},t),{},{tokenError:e.message})}))}))})).catch((function(e){console.error(e),m((function(e){return Object(u.a)(Object(u.a)({},e),{},{tokenError:"not possibile to send notification, check for patient token"})}))})):m((function(e){return Object(u.a)(Object(u.a)({},e),{},{tokenError:"no device token is present"})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){switch(e){case"manual":m((function(e){var t=e.notifications;return Object(u.a)(Object(u.a)({},e),{},{filtered:t.filter((function(e){return"manual"===e.category})),filter:"manual"})}));break;case"alert":m((function(e){var t=e.notifications;return Object(u.a)(Object(u.a)({},e),{},{filtered:t.filter((function(e){return"alert"===e.category})),filter:"alert"})}));break;case"scheduled":m((function(e){var t=e.notifications;return Object(u.a)(Object(u.a)({},e),{},{filtered:t.filter((function(e){return"scheduled"===e.category})),filter:"scheduled"})}));break;default:m((function(e){return Object(u.a)(Object(u.a)({},e),{},{filtered:e.notifications,filter:"all"})}))}},P=Za(),N=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,x(t);case 4:a=e.sent,n=a.docs.map((function(e){var t=e.data(),a=e.id,n=t.event_time,r=h.a.fromDate(new Date);return r=n instanceof h.a?n:h.a.fromDate(new Date(n)),Object(u.a)(Object(u.a)({},t),{},{uid:a,event_time:r.toDate().toLocaleString()})})),N.current&&m((function(e){var t=e.filter;return"all"!==t?Object(u.a)(Object(u.a)({},e),{},{notifications:n,backdrop:!1,filtered:n.filter((function(e){return e.category===t}))}):Object(u.a)(Object(u.a)({},e),{},{notifications:n,backdrop:!1,filtered:n})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),N.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return N.current=!0,e(n),function(){return N.current=!1}}),[l.nextFetch,n,x]);var I=function(e){var t=e.target;return E((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},D=l.filtered;return i.a.createElement(M.a,{maxWidth:"md"},i.a.createElement($.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",spacing:2},i.a.createElement($.a,{item:!0,xs:6,style:{position:"sticky",top:"96px"}},i.a.createElement(fa.a,null,i.a.createElement(Ua.a,{avatar:i.a.createElement(Q.a,{style:{backgroundColor:"transparent"}},i.a.createElement(mt.a,{style:{color:"black"}})),title:"Crea una notifica",subheader:"Invia ora la notifica al paziente"}),i.a.createElement(ba.a,null,i.a.createElement("div",{id:"alert-messages"},l.tokenError.length?i.a.createElement(ce.a,{severity:"warning"},i.a.createElement(oe.a,null,"Warning"),l.tokenError):null,v.emptyTitle||v.emptyDescription?i.a.createElement(ce.a,{severity:"warning"},i.a.createElement(oe.a,null,"Warning"),"fill the required * fields "):null),i.a.createElement(K.a,{id:"title",name:"title",label:"Titolo",type:"text",error:v.emptyTitle,onChange:I,color:"primary",variant:"outlined",margin:"normal",fullWidth:!0,required:!0,value:v.title}),i.a.createElement(K.a,{id:"body",label:"Messaggio",name:"description",type:"text",error:v.emptyDescription,onChange:I,value:v.description,required:!0,color:"primary",variant:"outlined",margin:"normal",fullWidth:!0,multiline:!0,maxRows:5,minRows:3})),i.a.createElement(Qa.a,{className:P.cardActions},i.a.createElement(X.a,{endIcon:i.a.createElement(Ka.a,null),id:"create-notification",key:"crate-notification-button",variant:"text",color:"primary",onClick:w},"Invia")))),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement("div",{style:{paddingBottom:16}},i.a.createElement(Xa.a,{id:"manual-filter",label:"Manual",onClick:function(){return C("manual")},variant:"manual"===l.filter?"default":"outlined"}),i.a.createElement(Xa.a,{id:"alert-filter",label:"Alert",onClick:function(){return C("alert")},variant:"alert"===l.filter?"default":"outlined"}),i.a.createElement(Xa.a,{id:"scheduled-filter",label:"Scheduled",onClick:function(){return C("scheduled")},variant:"scheduled"===l.filter?"default":"outlined"}),i.a.createElement(Xa.a,{id:"all-filter",label:"All",onClick:function(){return C("all")},variant:"all"===l.filter?"default":"outlined"})),D.length?D.map((function(e){return i.a.createElement(fa.a,{key:e.uid,style:e.seen?{marginBottom:12}:{marginBottom:12,backgroundColor:"#e3e3e3"}},i.a.createElement(Ua.a,{action:i.a.createElement(Y.a,{onClick:Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_(n,e.uid);case 3:m((function(e){return Object(u.a)(Object(u.a)({},e),{},{nextFetch:e.nextFetch+1})})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))},i.a.createElement(Ya.a,null)),avatar:i.a.createElement(Q.a,null,i.a.createElement(Te.a,null)),title:e.title,subheader:e.event_time}),i.a.createElement(ba.a,null,i.a.createElement(F.a,{variant:"body2",component:"p",color:"inherit"},e.body)))})):i.a.createElement(V.a,{open:l.backdrop,className:P.backdrop},i.a.createElement(G.a,{color:"inherit"})))))},tn=a(9),an=a(600),nn=a(601),rn=a(79),cn=a.n(rn),on=["title","description","time","id","deleteRequest"],ln=Object(re.a)((function(e){return{expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function sn(e){var t,a=e.title,n=e.description,c=e.time,o=e.id,l=e.deleteRequest,m=(Object(L.a)(e,on),ln()),b=Object(r.useState)({title:"",newTitle:"",description:"",newDescription:"",time:void 0,id:"",open:!1}),g=Object(f.a)(b,2),h=g[0],v=g[1],E=Object(s.g)().patientId,O=Object(r.useRef)(null),y=A().updatePatientNote,j=Object(r.useCallback)((function(e,t,a){return y(e,t,a)}),[y]),k=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:h.newTitle,description:h.newDescription},e.prev=1,e.next=4,j(E,h.id,t);case 4:v((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1},t)})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),v((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1})})),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return O.current=!0,v((function(e){return Object(u.a)(Object(u.a)({},e),{},{title:a,newTitle:a,newDescription:n,description:n,time:c,id:o})})),function(){return O.current=!1}}),[a,n,c,o]);var _=i.a.useState(!0),x=Object(f.a)(_,2),w=x[0],C=x[1],P=function(e){var t=e.target;return v((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},N=function(){return v((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1})}))};return i.a.createElement(fa.a,{variant:"outlined"},i.a.createElement(Ua.a,{title:h.title,subheader:null===(t=h.time)||void 0===t?void 0:t.toDate().toLocaleString()}),i.a.createElement(Qa.a,{disableSpacing:!0},i.a.createElement(Y.a,{onClick:function(){v((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!0})}))}},i.a.createElement(mt.a,null)),i.a.createElement(Y.a,{onClick:l(h.id)},i.a.createElement(Rt.a,null)),i.a.createElement(Y.a,{className:Object(tn.a)(m.expand,Object(S.a)({},m.expandOpen,w)),onClick:function(){C((function(e){return!e}))},"aria-expanded":w,"aria-label":"show more"},i.a.createElement(cn.a,null)),i.a.createElement(Je.a,{fullWidth:!0,maxWidth:"xs",open:h.open,onClose:N},i.a.createElement(Ke.a,null,"Modifica nota"),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(an.a,null,"Modifica nota selezionata"),i.a.createElement(K.a,{onChange:P,value:h.newTitle,name:"newTitle",type:"text",fullWidth:!0,label:"Titolo",id:"title-note",variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{onChange:P,value:h.newDescription,name:"newDescription",type:"text",fullWidth:!0,id:"description-note",label:"Descrizione",margin:"normal",multiline:!0,variant:"outlined",maxRows:5,minRows:2})),i.a.createElement(at.a,null,i.a.createElement(X.a,{variant:"text",color:"secondary",onClick:N},"Annulla"),i.a.createElement(X.a,{variant:"contained",color:"primary",onClick:k},"Modifica")))),i.a.createElement(nn.a,{in:w,timeout:"auto",unmountOnExit:!0},i.a.createElement(ba.a,{style:{paddingTop:0}},i.a.createElement(F.a,{paragraph:!0},h.description))))}var un=a(591),mn=a(624),dn=a(125),pn=a.n(dn),fn=a(174),bn=a.n(fn),gn=a(306),hn=a.n(gn),vn=["children"],En=["children"],On=["children"],yn=Object(re.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2),borderRadius:24,padding:e.spacing(3)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),jn=Object(xe.a)((function(){return{root:{color:"#ffc107"}}}))((function(e){e.children;var t=Object(L.a)(e,vn);return i.a.createElement(Le.a,Object.assign({},t,{fontSize:"small"}))})),kn=Object(xe.a)((function(){return{root:{color:"#f44336"}}}))((function(e){e.children;var t=Object(L.a)(e,En);return i.a.createElement(qe.a,Object.assign({},t,{fontSize:"small"}))})),_n=Object(xe.a)((function(){return{root:{color:"#4caf50"}}}))((function(e){e.children;var t=Object(L.a)(e,On);return i.a.createElement(We.a,Object.assign({},t,{fontSize:"small"}))})),xn="yellow",wn="green",Cn="red",Pn=Object(re.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.primary.main,backgroundColor:Object(Ue.e)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.primary.dark},title:{flex:"1 1 100%"}}}));function Sn(e){var t=e.numSelected,a=e.handleSearch,n=e.onRequestDropOut,r=e.onRequestNotes,c=e.onRequestVisit,o=e.onRequestChangeStatus,l=e.onRequestRecoverDropped,s=Pn();return i.a.createElement(un.a,{className:Object(tn.a)(s.root,Object(S.a)({},s.highlight,t>0))},t>0?i.a.createElement(F.a,{className:s.title,color:"inherit",variant:"subtitle1",component:"div"},t," selezionato/i"):i.a.createElement(F.a,{className:s.title,variant:"h6",id:"tableTitle",component:"div"},"Pazienti"),function(e){switch(e){case 0:return i.a.createElement(K.a,{id:"search",type:"search",onChange:function(e){return a(e.target.value)},name:"search",margin:"none",size:"small",label:"Cerca",variant:"outlined",InputProps:{endAdornment:i.a.createElement(J.a,{position:"end"},i.a.createElement(Y.a,{"aria-label":"search patient"},i.a.createElement(Ie.a,null)))}});case 1:return i.a.createElement(i.a.Fragment,null,i.a.createElement(rt.a,{title:"Recover Dropped"},i.a.createElement(Y.a,{onClick:l},i.a.createElement(hn.a,null))),i.a.createElement(rt.a,{title:"Torna regolare"},i.a.createElement(Y.a,{onClick:o},i.a.createElement(_n,null))),i.a.createElement(rt.a,{title:"Drop Out"},i.a.createElement(Y.a,{onClick:n},i.a.createElement(Ce.a,null))),i.a.createElement(rt.a,{title:"Note"},i.a.createElement(Y.a,{onClick:r},i.a.createElement(pn.a,null))),i.a.createElement(rt.a,{title:"Visita medica"},i.a.createElement(Y.a,{onClick:c},i.a.createElement(Se.a,null))));default:return}}(t))}function Nn(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,r=e.orderBy,c=e.numSelected,o=e.rowCount,l=e.onRequestSort,s=e.headCells;return i.a.createElement(ot.a,null,i.a.createElement(Qe.a,null,i.a.createElement($e.a,{padding:"checkbox"},i.a.createElement(pe.a,{indeterminate:c>0&&c<o,checked:o>0&&c===o,onChange:a,inputProps:{"aria-label":"select all desserts"},color:"primary"})),s.map((function(e){return i.a.createElement($e.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:r===e.id&&n},i.a.createElement(mn.a,{active:r===e.id,direction:r===e.id?n:"asc",onClick:(a=e.id,function(e){l(e,a)})},e.label,r===e.id?i.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))}function In(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Dn(e){var t=e.rows,a=e.headCells,n=e.history,r=e.handleSearch,c=e.handleDropout,o=e.changePatientStatus,l=e.recoverDropped,s=e.classes,u=i.a.useState("desc"),m=Object(f.a)(u,2),d=m[0],p=m[1],b=i.a.useState("createdAt"),g=Object(f.a)(b,2),h=g[0],v=g[1],E=i.a.useState([]),O=Object(f.a)(E,2),y=O[0],j=O[1],k=i.a.useState(0),_=Object(f.a)(k,2),x=_[0],w=(_[1],i.a.useState(!1)),C=Object(f.a)(w,2),P=C[0],S=(C[1],i.a.useState(10)),N=Object(f.a)(S,2),D=N[0],T=(N[1],function(e){return-1!==y.indexOf(e)}),z=D-Math.min(D,t.length-x*D),W=Object(ne.a)();return W.overrides={MuiTableRow:{root:{"&$selected, &$selected:hover":{backgroundColor:Object(Ue.a)(W.palette.primary.main,W.palette.action.selectedOpacity)}}}},i.a.createElement("div",{className:s.root},i.a.createElement(ie.a,{theme:W},i.a.createElement(ge.a,{className:s.paper},i.a.createElement(Sn,{numSelected:y.length,handleSearch:r,onRequestDropOut:function(){c(y[0])},onRequestNotes:function(){var e=y[0];n.push("/".concat(e,"/notes"),{patientId:e,titlePage:I.pageTitles.notes})},onRequestVisit:function(){var e=y[0];n.push("/".concat(e,"/medical-visit"),{patientId:e,titlePage:I.pageTitles.medical_visit})},onRequestChangeStatus:function(){o(y[0])},onRequestRecoverDropped:function(){l(y[0])}}),i.a.createElement(it.a,null,i.a.createElement(ct.a,{className:s.table,size:P?"small":"medium"},i.a.createElement(Nn,{classes:s,numSelected:y.length,order:d,orderBy:h,onSelectAllClick:function(e){if(e.target.checked){var a=t.map((function(e){return e.uid}));j(a)}else j([])},onRequestSort:function(e,t){p(h===t&&"asc"===d?"desc":"asc"),v(t)},rowCount:t.length,headCells:a}),i.a.createElement(lt.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return In(e,a,t)}:function(e,a){return-In(e,a,t)}}(d,h)).map((function(e,t){return i.a.createElement(Qe.a,{tabIndex:-1,key:e.uid,selected:T(e.uid),hover:!0},i.a.createElement($e.a,{padding:"checkbox"},i.a.createElement(pe.a,{onClick:function(t){return function(e,t){var a=y.indexOf(t),n=[];-1===a?n=n.concat(y,t):0===a?n=n.concat(y.slice(1)):a===y.length-1?n=n.concat(y.slice(0,-1)):a>0&&(n=n.concat(y.slice(0,a),y.slice(a+1))),j(n)}(0,e.uid)},checked:T(e.uid),inputProps:{"aria-labelledby":"enhanced-table-checkbox-".concat(t)},color:"primary"})),i.a.createElement($e.a,{align:"left"},e.name),i.a.createElement($e.a,{align:"left"},e.surname),i.a.createElement($e.a,{align:"right"},e.therapyStartDate),i.a.createElement($e.a,{align:"right"},e.therapyEndDate),i.a.createElement($e.a,{align:"right"},function(e){return"undefined"!==typeof e.dropped&&e.dropped}(a=e)?a.droppedAt.toDate().toLocaleDateString():""),i.a.createElement($e.a,{align:"right"},i.a.createElement(Y.a,{disabled:!0,size:"small"},function(e){switch(e){case wn:return i.a.createElement(_n,null);case Cn:return i.a.createElement(kn,null);case xn:return i.a.createElement(jn,null);default:return}}(e.status))),i.a.createElement($e.a,{align:"right"},i.a.createElement(Y.a,{onClick:function(t){return a=e.uid,void n.push("/".concat(a,"/patient-details"),{patientId:a,titlePage:I.pageTitles.details_patient});var a},size:"small"},i.a.createElement(bn.a,{fontSize:"small"}))));var a})),z>0&&i.a.createElement(Qe.a,{style:{height:(P?33:53)*z}},i.a.createElement($e.a,{colSpan:8}))))))))}var Tn=a(602),zn=a(603),Wn=a(175),An=a.n(Wn),qn=a(307),Fn=a.n(qn),Ln=a(77),Rn=Object(ne.a)();Rn.overrides={MuiSwitch:{root:{},colorSecondary:{"&$checked":{color:"#2e7d32","&:hover":{backgroundColor:"#4caf50","@media (hover: none)":{backgroundColor:"transparent"}}},"&$checked + $track":{backgroundColor:"#1b5e20"}}}};var Bn=Object(ne.a)(),Mn=Object(re.a)((function(e){return{errorAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},avatar:{width:e.spacing(7),height:e.spacing(7)},form:{width:"100%",marginTop:e.spacing(1)},paper:{marginTop:e.spacing(1),display:"flex",flexDirection:"column",alignItems:"center"},mainLogo:{width:e.spacing(12),height:e.spacing(12)}}}));var Vn=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var Gn=Object(ne.a)(),Hn=Object(re.a)((function(e){return{errorAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},avatar:{width:e.spacing(7),height:e.spacing(7)},form:{width:"100%",marginTop:e.spacing(1)},paper:{marginTop:e.spacing(1),display:"flex",flexDirection:"column",alignItems:"center"},innerBox:{padding:e.spacing(2),borderRadius:"8px"}}})),Un=a(211),Qn=a.n(Un),$n=a(308),Kn=a.n($n),Jn=a(309),Yn=a.n(Jn),Xn=a(310),Zn=a.n(Xn),er=a(311),tr=a.n(er),ar=a(312),nr=a.n(ar),rr=a(313),ir=a.n(rr),cr=a(176),or=a.n(cr),lr=["open","onClose"],sr=["visitId","visitName","icon"];function ur(e){var t=e.open,a=e.onClose,n=Object(L.a)(e,lr);return i.a.createElement(Je.a,Object.assign({maxWidth:"xs",open:t,fullWidth:!0},n,{"aria-labelledby":"confirmation-dialog-title"}),i.a.createElement(Ke.a,{"aria-labelledby":"confirmation-dialog-title"},"Conferma"),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(an.a,null,"Eliminazione visita medica")),i.a.createElement(at.a,null,i.a.createElement(X.a,{autoFocus:!0,color:"primary",onClick:function(){a(!1)}},"Annulla"),i.a.createElement(X.a,{color:"primary",onClick:function(){a(!0)}},"Conferma")))}var mr=Object(re.a)((function(e){return{formControl:{margin:e.spacing(1)},paper:{marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2),borderRadius:24},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),dr="error",pr="success";var fr=a(511),br=a(605),gr=a(315),hr=a.n(gr),vr=a(583),Er=["children"],Or=Object(xe.a)({root:{}})((function(e){var t=e.children,a=Object(L.a)(e,Er);return i.a.createElement(F.a,Object.assign({},a,{variant:"h5",color:"textPrimary",gutterBottom:!0}),t)})),yr=a(38),jr=a.n(yr),kr=a(36),_r=a.n(kr),xr=["children"],wr=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},paper:{borderRadius:24,padding:e.spacing(3)}}})),Cr=Object(xe.a)((function(e){return{root:{borderRadius:"10px",padding:e.spacing(1),backgroundColor:"#f1f1f1"}}}))((function(e){var t=e.children,a=Object(L.a)(e,xr);return i.a.createElement(ge.a,Object.assign({},a,{variant:"outlined"}),t)}));function Pr(e){var t=e.pageName,a=e.onClickBack,n=e.onClickNext,r=e.patient,c=e.visit,o=i.a.useState({obesity:{},diabetes:{},heartAttack:{},hypertension:{},dyslipidemia:{},thyroid:{},backdrop:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=i.a.useState({obesity:{},diabetes:{},heartAttack:{},hypertension:{},dyslipidemia:{},thyroid:{}}),g=Object(f.a)(b,2),h=g[0],v=g[1],E=A(),O=E.pushPatientVisitData,y=E.pullPatientVisitData,j=i.a.useCallback((function(e,t){return y(e,t)}),[y]),k=wr(),_=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={selection:{obesity:h.obesity,diabetes:h.diabetes,heartAttack:h.heartAttack,hypertension:h.hypertension,dyslipidemia:h.dyslipidemia,thyroid:h.thyroid},over:{obesity:s.obesity,diabetes:s.diabetes,heartAttack:s.heartAttack,hypertension:s.hypertension,dyslipidemia:s.dyslipidemia,thyroid:s.thyroid}},e.prev=1,e.next=4,O(t,c,r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:n();case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),x=i.a.useRef(null);if(i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,j(t,a);case 4:(n=e.sent).exists()?(r=n.data(),x.current&&(v((function(e){return Object(u.a)(Object(u.a)({},e),r.selection)})),m((function(e){return Object(u.a)(Object(u.a)(Object(u.a)({},e),r.over),{},{backdrop:!1})})))):x.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return x.current=!0,void 0!==c&&void 0!==r&&e(c,r),function(){return x.current=!1}}),[c,r,j]),s.backdrop)return i.a.createElement(V.a,{className:k.backdrop,open:s.backdrop},i.a.createElement(G.a,{color:"inherit"}));var w=I.formatString(I.visit.under,{age:55}),C=I.formatString(I.visit.over,{age:55}),P=[{value:"father",label:I.relationship.father},{value:"mother",label:I.relationship.mother},{value:"siblings",label:I.relationship.siblings},{value:"uncle",label:I.relationship.uncle},{value:"grandparents",label:I.relationship.grandparents}];return i.a.createElement($.a,{id:"visit-step",container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:3},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,t)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Cr,null,i.a.createElement(je.a,{subheader:i.a.createElement(vr.a,null,I.patient.overweight)},P.map((function(e){var t=e.value,a=e.label,n=!!s.obesity[t],r=!!h.obesity[t];return i.a.createElement(ke.a,{key:t},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{edge:"start",checked:r,name:t,onChange:function(e){var t=e.target,a=t.name,n=t.checked;v((function(e){var t=e.obesity;return Object(u.a)(Object(u.a)({},e),{},{obesity:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))},tabIndex:-1,disableRipple:!0})),i.a.createElement(Oe.a,{primary:a,secondary:n?w:C}),i.a.createElement(_e.a,null,i.a.createElement(zn.a,{edge:"end",name:t,disabled:!r,checked:n,onChange:function(e){var t=e.target,a=t.name,n=t.checked;m((function(e){var t=e.obesity;return Object(u.a)(Object(u.a)({},e),{},{obesity:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))}})))}))))),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Cr,null,i.a.createElement(je.a,{subheader:i.a.createElement(vr.a,null,I.patient.diabetes)},P.map((function(e){var t=e.value,a=e.label,n=!!s.diabetes[t],r=!!h.diabetes[t];return i.a.createElement(ke.a,{key:t},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{edge:"start",name:t,checked:r,onChange:function(e){var t=e.target,a=t.name,n=t.checked;v((function(e){var t=e.diabetes;return Object(u.a)(Object(u.a)({},e),{},{diabetes:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))},tabIndex:-1,disableRipple:!0})),i.a.createElement(Oe.a,{primary:a,secondary:n?w:C}),i.a.createElement(_e.a,null,i.a.createElement(zn.a,{edge:"end",name:t,disabled:!r,checked:n,onChange:function(e){var t=e.target,a=t.name,n=t.checked;m((function(e){var t=e.diabetes;return Object(u.a)(Object(u.a)({},e),{},{diabetes:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))}})))}))))),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Cr,null,i.a.createElement(je.a,{subheader:i.a.createElement(vr.a,null,I.patient.heartAttack)},P.map((function(e){var t=e.value,a=e.label,n=!!s.heartAttack[t],r=!!h.heartAttack[t];return i.a.createElement(ke.a,{key:t},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{edge:"start",checked:r,name:t,onChange:function(e){var t=e.target,a=t.name,n=t.checked;v((function(e){var t=e.heartAttack;return Object(u.a)(Object(u.a)({},e),{},{heartAttack:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))},tabIndex:-1,disableRipple:!0})),i.a.createElement(Oe.a,{primary:a,secondary:n?w:C}),i.a.createElement(_e.a,null,i.a.createElement(zn.a,{edge:"end",disabled:!r,name:t,checked:n,onChange:function(e){var t=e.target,a=t.name,n=t.checked;m((function(e){var t=e.heartAttack;return Object(u.a)(Object(u.a)({},e),{},{heartAttack:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))}})))}))))),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Cr,null,i.a.createElement(je.a,{subheader:i.a.createElement(vr.a,null,I.patient.hypertension)},P.map((function(e){var t=e.value,a=e.label,n=!!s.hypertension[t],r=!!h.hypertension[t];return i.a.createElement(ke.a,{key:t},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{edge:"start",checked:r,onChange:function(e){var t=e.target,a=t.name,n=t.checked;v((function(e){var t=e.hypertension;return Object(u.a)(Object(u.a)({},e),{},{hypertension:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))},name:t,tabIndex:-1,disableRipple:!0})),i.a.createElement(Oe.a,{primary:a,secondary:n?w:C}),i.a.createElement(_e.a,null,i.a.createElement(zn.a,{edge:"end",disabled:!r,checked:n,name:t,onChange:function(e){var t=e.target,a=t.name,n=t.checked;m((function(e){var t=e.hypertension;return Object(u.a)(Object(u.a)({},e),{},{hypertension:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))}})))}))))),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Cr,null,i.a.createElement(je.a,{subheader:i.a.createElement(vr.a,null,I.patient.dyslipidemia)},P.map((function(e){var t=e.value,a=e.label,n=!!s.dyslipidemia[t],r=!!h.dyslipidemia[t];return i.a.createElement(ke.a,{key:t},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{edge:"start",checked:r,name:t,onChange:function(e){var t=e.target,a=t.name,n=t.checked;v((function(e){var t=e.dyslipidemia;return Object(u.a)(Object(u.a)({},e),{},{dyslipidemia:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))},tabIndex:-1,disableRipple:!0})),i.a.createElement(Oe.a,{primary:a,secondary:n?w:C}),i.a.createElement(_e.a,null,i.a.createElement(zn.a,{edge:"end",disabled:!r,checked:n,name:t,onChange:function(e){var t=e.target,a=t.name,n=t.checked;m((function(e){var t=e.dyslipidemia;return Object(u.a)(Object(u.a)({},e),{},{dyslipidemia:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))}})))}))))),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Cr,null,i.a.createElement(je.a,{subheader:i.a.createElement(vr.a,null,I.patient.thyroid)},P.map((function(e){var t=e.value,a=e.label,n=!!s.thyroid[t],r=!!h.thyroid[t];return i.a.createElement(ke.a,{key:t},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{edge:"start",checked:r,name:t,onChange:function(e){var t=e.target,a=t.name,n=t.checked;v((function(e){var t=e.thyroid;return Object(u.a)(Object(u.a)({},e),{},{thyroid:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))},tabIndex:-1,disableRipple:!0})),i.a.createElement(Oe.a,{primary:a,secondary:n?w:C}),i.a.createElement(_e.a,null,i.a.createElement(zn.a,{edge:"end",disabled:!r,name:t,checked:n,onChange:function(e){var t=e.target,a=t.name,n=t.checked;m((function(e){var t=e.thyroid;return Object(u.a)(Object(u.a)({},e),{},{thyroid:Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},a,n))})}))}})))}))))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return a()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:_,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}Pr.defaultProps={pageName:I.visit.steps.family_history,visit:"first"};var Sr=a(615),Nr=a(604),Ir=a(502);function Dr(e){var t=e.name,a=e.value,n=e.values,r=e.onChange,c=i.a.useState({name:t,value:a}),o=Object(f.a)(c,2),l=o[0],s=o[1];i.a.useEffect((function(){s((function(e){return Object(u.a)(Object(u.a)({},e),{},{value:a,name:t})}))}),[a,t]);return i.a.createElement(Xe.a,{component:"fieldset"},i.a.createElement(Ir.a,{component:"legend"},"Sesso"),i.a.createElement(Nr.a,{"aria-label":"gender",name:l.name,value:l.value,onChange:function(e){var t=e.target,a=t.value,n=t.name;r(n,a),console.debug(n,a),s((function(e){return Object(u.a)(Object(u.a)({},e),{},{value:a,name:n})}))},row:!0},n.map((function(e){var t=e.value,a=e.label,n=e.color;return i.a.createElement(de.a,{key:t,value:t,control:i.a.createElement(Sr.a,{color:n}),label:a})}))))}function Tr(e){var t=e.name,a=e.label,n=e.checked,r=e.onChange;return i.a.createElement(ca.a,{row:!0},i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:n,name:t,onChange:function(e){r(e.target.name,e.target.checked)},color:"primary"}),label:a,labelPlacement:"end"}))}var zr=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},paper:{borderRadius:24,padding:e.spacing(3)}}}));function Wr(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({patientId:n,patientAge:0,gender:"male",patientOccupation:"",educationalQualification:"",maritalStatus:"",ethnicity:"",consent:!1,backdrop:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=zr(),g=A(),h=g.pushPatientVisitData,v=g.pullPatientVisitData,E=(g.currentLanguage,function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))}),O=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,v(c,t);case 4:(a=e.sent).exists()?(n=a.data(),O.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,patientAge:n.patient_age||"",gender:n.gender||"male",patientOccupation:n.patient_occupation||"",educationalQualification:n.educational_qualification||"",maritalStatus:n.marital_status||"",ethnicity:n.ethnicity||"",consent:n.consent||!1})}))):O.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),O.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return O.current=!0,e(n),function(){return O.current=!1}}),[c,n,v]);var y=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l,u,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.patientAge,r=s.patientOccupation,i=s.educationalQualification,o=s.maritalStatus,l=s.ethnicity,u=s.consent,m=s.gender,p={patient_age:parseInt(t),patient_occupation:r,educational_qualification:i,marital_status:o,ethnicity:l,consent:u,gender:m},e.prev=2,e.next=5,h(p,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),j=s.backdrop;return j?i.a.createElement(V.a,{timeout:1e3,className:b.backdrop,open:j},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{id:"visit-step",container:!0,spacing:1,direction:"row",justifyContent:"flex-start",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"patient-id",name:"patientId",value:s.patientId,InputProps:{readOnly:!0},fullWidth:!0,variant:"outlined",type:"text",label:"Patient ID",margin:"normal",helperText:"(non modificabile)"}),i.a.createElement(K.a,{id:"patient-age",name:"patientAge",label:I.measures.age,value:s.patientAge,onChange:E,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"patient-occupation",name:"patientOccupation",label:I.patient.occupation,value:s.patientOccupation,onChange:E,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"educational-qualification",name:"educationalQualification",label:I.patient.educational_qualification,value:s.educationalQualification,onChange:E,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"marital-status",name:"maritalStatus",label:I.patient.marital_status,value:s.maritalStatus,onChange:E,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"ethnicity",name:"ethnicity",label:I.patient.ethnicity,value:s.ethnicity,onChange:E,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Dr,{name:"gender",value:s.gender,values:[{value:"male",label:I.general.male,color:"primary"},{value:"female",label:I.general.female,color:"secondary"}],onChange:function(e,t){return m((function(a){return Object(u.a)(Object(u.a)({},a),{},Object(S.a)({},e,t))}))}}),i.a.createElement(Tr,{label:I.general.consent,name:"consent",checked:s.consent,onChange:function(e,t){return m((function(a){return Object(u.a)(Object(u.a)({},a),{},Object(S.a)({},e,t))}))}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{disabled:!0,onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{disabled:!s.consent,onClick:y,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}Wr.defaultProps={pageName:I.visit.steps.data_patient,visit:"first"};var Ar=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function qr(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({smoker:!1,exSmoker:!1,alcoholic:!1,useLaxatives:!1,incontinence:!1,snoring:!1,insomnia:!1,menopause:!1,pregnancies:!1,abortions:!1,amountCigarettes:0,alvo:"",menstrualCycles:"",backdrop:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=A(),g=b.pushPatientVisitData,h=b.pullPatientVisitData,v=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l,u,m,p,f,b,h,v,E,O;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.smoker,r=s.exSmoker,i=s.alcoholic,o=s.useLaxatives,l=s.incontinence,u=s.snoring,m=s.insomnia,p=s.menopause,f=s.pregnancies,b=s.abortions,h=s.amountCigarettes,v=s.alvo,E=s.menstrualCycles,O={smoker:t,ex_smoker:r,alcoholic:i,use_laxatives:o,incontinence:l,snoring:u,insomnia:m,menopause:p,pregnancies:f,abortions:b,amount_cigarettes:parseInt(h,10),alvo:v,menstrual_cycles:E},e.prev=2,e.next=5,g(O,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.checked))}))},O=function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},y=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,h(c,t);case 4:(a=e.sent).exists()?(n=a.data(),y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,smoker:n.smoker||!1,exSmoker:n.ex_smoker||!1,alcoholic:n.alcoholic||!1,useLaxatives:n.use_laxatives||!1,incontinence:n.incontinence||!1,snoring:n.snoring||!1,insomnia:n.insomnia||!1,menopause:n.menopause||!1,pregnancies:n.pregnancies||!1,abortions:n.abortions||!1,amountCigarettes:n.amount_cigarettes||0,alvo:n.alvo||"",menstrualCycles:n.menstrual_cycles||""})}))):y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return y.current=!0,e(n),function(){return y.current=!1}}),[n]);var j=Ar(),k=s.smoker,_=s.exSmoker,x=s.alcoholic,w=s.useLaxatives,C=s.incontinence,P=s.snoring,N=s.insomnia,D=s.menopause,T=s.pregnancies,z=s.abortions,W=s.backdrop;return W?i.a.createElement(V.a,{timeout:1e3,className:j.backdrop,open:W},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{id:"visit-step",container:!0,spacing:1,direction:"row",justifyContent:"flex-start",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Xe.a,{component:"fieldset",fullWidth:!0},i.a.createElement(ca.a,{"aria-label":"direction",row:!0},i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:k,onChange:E,name:"smoker",color:"primary"}),label:I.patient.smoker}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:_,onChange:E,name:"exSmoker",color:"primary"}),label:I.patient.smoker_ex}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:x,onChange:E,name:"alcoholic",color:"primary"}),label:I.patient.alcoholic}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:w,onChange:E,name:"useLaxatives",color:"primary"}),label:I.patient.laxatives_uses}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:C,onChange:E,name:"incontinence",color:"primary"}),label:I.patient.incontinence}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:P,onChange:E,name:"snoring",color:"primary"}),label:I.patient.snoring}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:N,onChange:E,name:"insomnia",color:"primary"}),label:I.patient.insomnia}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:D,onChange:E,name:"menopause",color:"primary"}),label:I.patient.menopause}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:T,onChange:E,name:"pregnancies",color:"primary"}),label:I.patient.pregnancies}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:z,onChange:E,name:"abortions",color:"primary"}),label:I.patient.abortions})))),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{margin:"normal",id:"amount-cigarettes",name:"amountCigarettes",value:s.amountCigarettes,type:"number",onChange:function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},disabled:!s.smoker,label:I.patient.amount_cigarettes,fullWidth:!0,variant:"outlined"}),i.a.createElement(Xe.a,{variant:"outlined",fullWidth:!0,margin:"normal"},i.a.createElement(Ze.a,{id:"alvo-select-label"},"Alvo"),i.a.createElement(et.a,{labelId:"alvo-select-label",id:"alvo-select",value:s.alvo,name:"alvo",label:I.patient.alvo,onChange:O,fullWidth:!0},i.a.createElement(ve.a,{value:""},i.a.createElement("em",null,"-")),i.a.createElement(ve.a,{key:"key-menu-item-stiptico",id:"item-menu-stiptico",value:"stiptico"},"stiptico"),i.a.createElement(ve.a,{key:"key-menu-item-regolare",id:"item-menu-regolare",value:"regolare"},"regolare"),i.a.createElement(ve.a,{key:"key-menu-item-diarroico",id:"item-menu-diarroico",value:"diarroico"},"diarroico"),i.a.createElement(ve.a,{key:"key-menu-item-alterno",id:"item-menu-alterno",value:"alterno"},"alterno"))),i.a.createElement(Xe.a,{variant:"outlined",fullWidth:!0,margin:"normal"},i.a.createElement(Ze.a,{id:"menstrual-cycles-select-label"},I.patient.menstrual_cycles),i.a.createElement(et.a,{labelId:"menstrual-cycles-select-label",id:"menstrual-cycles-select",value:s.menstrualCycles,name:"menstrualCycles",label:I.patient.menstrual_cycles,onChange:O,fullWidth:!0},i.a.createElement(ve.a,{value:""},i.a.createElement("em",null,"-")),i.a.createElement(ve.a,{key:"key-menu-item-regolari",id:"item-menu-regolari",value:"regolari"},"regolari"),i.a.createElement(ve.a,{key:"key-menu-item-irregolari",id:"item-menu-irregolari",value:"irregolari"},"irregolari"),i.a.createElement(ve.a,{key:"key-menu-item-amenorrea",id:"item-menu-amenorrea",value:"amenorrea"},"amenorrea")))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:v,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}qr.defaultProps={pageName:I.visit.steps.family_history,visit:"first"};var Fr=["children"],Lr=Object(xe.a)({root:{}})((function(e){var t=e.children,a=Object(L.a)(e,Fr);return i.a.createElement(F.a,Object.assign({},a,{variant:"h6",color:"textSecondary",gutterBottom:!0}),t)})),Rr=["onClose","open","data"],Br=Object(re.a)((function(e){return{root:{margin:0},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));function Mr(e){var t=e.onClose,a=e.open,n=e.data,c=Object(L.a)(e,Rr),o=i.a.useState([]),l=Object(f.a)(o,2),s=l[0],m=l[1],b=i.a.useState([]),g=Object(f.a)(b,2),h=g[0],v=g[1],E=Br(),O=Object(r.useState)(""),y=Object(f.a)(O,2),j=y[0],k=y[1],_=A(),x=_.getPathologies,w=(_.removePathology,_.createPathology),C=_.newDocRef,P=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=C("pathologies"),e.next=4,w(t,{name:j,description:""});case 4:v((function(e){return[].concat(Object(He.a)(e),[{name:j,description:"",id:t.id}])})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=Object(r.useCallback)((function(){return x()}),[]),N=i.a.useRef(null);i.a.useEffect((function(){a||m((function(){return n.map((function(e){return e.id}))}));var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:t=e.sent,a=t.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})})),N.current&&v((function(){return a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return N.current=!0,e(),function(){return N.current=!1}}),[a,n,S]);var D=function(){return t()};return i.a.createElement(Je.a,Object.assign({maxWidth:"xs",fullWidth:!0},c,{open:a,scroll:"paper"}),i.a.createElement(Ke.a,{className:E.root},i.a.createElement(F.a,{variant:"button",color:"textPrimary"},I.visit.pathologies),i.a.createElement(Y.a,{className:E.closeButton,onClick:D},i.a.createElement(pt.a,null))),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(an.a,null,I.visit.select_pathologies),i.a.createElement(K.a,{id:"pathology-name",name:"pathologyName",type:"text",variant:"outlined",margin:"normal",fullWidth:!0,label:"Nome Nuova Patologia",helperText:"Aggiungi nuova patologia se non in elenco",onChange:function(e){var t=e.target;return k((function(){return t.value}))},value:j}),i.a.createElement(X.a,{variant:"text",fullWidth:!0,color:"default",onClick:function(){return P()},disabled:!j.trim().length},"Conferma"),i.a.createElement(je.a,{dense:!0},h.map((function(e){var t=e.id,a=e.name;return i.a.createElement(ke.a,{key:t,button:!0,onClick:function(){return function(e){var t=s.indexOf(e),a=Object(He.a)(s);-1===t?a.push(e):a.splice(t,1),m((function(){return a}))}(t)}},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{edge:"start",checked:-1!==s.indexOf(t),disableRipple:!0,tabIndex:-1})),i.a.createElement(Oe.a,{primary:a,secondary:t}))})))),i.a.createElement(at.a,null,i.a.createElement(X.a,{variant:"text",color:"secondary",onClick:function(){return D()}},I.general.cancel),i.a.createElement(X.a,{color:"primary",variant:"contained",onClick:function(){return function(){var e=[];s.forEach((function(t){var a=h.find((function(e){return e.id===t}));void 0!==a&&e.push(a)})),t(e)}()}},I.general.choose)))}Mr.defaultProps={data:[]};var Vr=Object(re.a)((function(e){return{paper:{maxHeight:435},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},root:{"& hr":{margin:e.spacing(0,.5)}}}}));function Gr(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({open:!1,previous_pathologies:[],previous_dialog_open:!1,inprogress_pathologies:[],inprogess_dialog_open:!1,backdrop:!1,pathologies:[]}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=A(),g=b.pushPatientVisitData,h=b.pullPatientVisitData,v=i.a.useCallback((function(e,t){return h(e,t)}),[h]),E=i.a.useState({eating:!1,mood:!1,anxiety:!0,psychosis:!0,personality:!1}),O=Object(f.a)(E,2),y=O[0],j=O[1],k=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l,u,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.eating,r=y.mood,i=y.anxiety,o=y.psychosis,l=y.personality,u=s.previous_pathologies,m=s.inprogress_pathologies,p={eating:t,mood:r,anxiety:i,psychosis:o,personality:l,inprogress_pathologies:m,previous_pathologies:u},e.prev=3,e.next=6,g(p,c,n);case 6:a(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),_=function(e){var t=e.target;return j((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.checked))}))},x=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,v(t,a);case 4:(n=e.sent).exists()?(r=n.data(),x.current&&(j((function(e){return Object(u.a)(Object(u.a)({},e),{},{eating:r.eating||!1,mood:r.mood||!1,anxiety:r.anxiety||!1,psychosis:r.psychosis||!1,personality:r.personality||!1})})),m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,previous_pathologies:r.previous_pathologies||[],inprogress_pathologies:r.inprogress_pathologies||[]})})))):x.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return x.current=!0,void 0!==c&&void 0!==n&&e(c,n),function(){return x.current=!1}}),[c,n,v]);var w=Vr(),C=s.backdrop;if(C)return i.a.createElement(V.a,{timeout:1e3,className:w.backdrop,open:C},i.a.createElement(G.a,{color:"inherit"}));var P=y.eating,N=y.mood,D=y.anxiety,T=y.psychosis,z=y.personality;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Mr,{key:"inprogess_pathologies_dialog",data:s.inprogress_pathologies,open:s.inprogess_dialog_open,onClose:function(e){m(e?function(t){return Object(u.a)(Object(u.a)({},t),{},{inprogess_dialog_open:!1,inprogress_pathologies:e})}:function(e){return Object(u.a)(Object(u.a)({},e),{},{inprogess_dialog_open:!1})})},classes:{paper:w.paper}}),i.a.createElement(Mr,{key:"previous_pathologies_dialog",data:s.previous_pathologies,open:s.previous_dialog_open,onClose:function(e){m(e?function(t){return Object(u.a)(Object(u.a)({},t),{},{previous_dialog_open:!1,previous_pathologies:e})}:function(e){return Object(u.a)(Object(u.a)({},e),{},{previous_dialog_open:!1})})},classes:{paper:w.paper}}),i.a.createElement($.a,{id:"visit-stop",container:!0,direction:"row",spacing:1,className:w.root,justifyContent:"flex-start",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Xe.a,{component:"fieldset",fullWidth:!0},i.a.createElement(ca.a,{"aria-label":"direction",row:!0},i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:P,onChange:_,name:"eating",color:"primary"}),label:I.visit.eating_disorder}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:N,onChange:_,name:"mood",color:"primary"}),label:I.visit.mood_disturbance}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:D,onChange:_,name:"anxiety",color:"primary"}),label:I.visit.anxiety_disorder}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:T,onChange:_,name:"psychosis",color:"primary"}),label:I.visit.psychosis}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:z,onChange:_,name:"personality",color:"primary"}),label:I.visit.personality_disorder})))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Lr,null,I.visit.pathologies)),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(F.a,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0},I.visit.pathologies_inprogress),i.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){return m((function(e){return Object(u.a)(Object(u.a)({},e),{},{inprogess_dialog_open:!0})}))}},I.general.choose),i.a.createElement(je.a,{dense:!0},s.inprogress_pathologies.length?s.inprogress_pathologies.map((function(e,t){return i.a.createElement(ke.a,{divider:!0,key:e.id,name:e.value},i.a.createElement(Oe.a,{primary:e.name}))})):i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:I.general.empty_list})))),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(F.a,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0},I.visit.pathologies_previous),i.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){return m((function(e){return Object(u.a)(Object(u.a)({},e),{},{previous_dialog_open:!0})}))}},I.general.choose),i.a.createElement(je.a,{dense:!0},s.previous_pathologies.length?s.previous_pathologies.map((function(e){return i.a.createElement(ke.a,{divider:!0,key:e.id,name:e.value},i.a.createElement(Oe.a,{primary:e.name}))})):i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:I.general.empty_list})))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:k,endIcon:i.a.createElement(_r.a,null)},I.general.next)))))}Gr.defaultProps={pageName:I.visit.steps.pathological_anamnesis,visit:"first"};var Hr=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Ur(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({weight:0,height:0,bmi:"",neck_circumference:0,waist_circumference:0,heart_tones:!1,heart_murmur:!1,heart_rate:0,mv_chest:!0,pathological_noises:!0,murphy_blumberg:!1,palpable_liver:!0,palpable_thyroid:!0,declining_edema:!1,carotid_murmurs:!1,min_blood_pressure:0,max_blood_pressure:0,backdrop:!1,abdomen:"",waist_circumference_narrowest_point:0,waist_circumference_iliac_spine_height:0}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=Hr(),g=A(),h=g.pushPatientVisitData,v=g.pullPatientVisitData,E=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({weight:s.weight,height:s.height,bmi:s.bmi,neck_circumference:s.neck_circumference,waist_circumference:s.waist_circumference,heart_tones:s.heart_tones,heart_murmur:s.heart_murmur,heart_rate:s.heart_rate,mv_chest:s.mv_chest,pathological_noises:s.pathological_noises,murphy_blumberg:s.murphy_blumberg,palpable_liver:s.palpable_liver,palpable_thyroid:s.palpable_thyroid,declining_edema:s.declining_edema,carotid_murmurs:s.carotid_murmurs,min_blood_pressure:s.min_blood_pressure,max_blood_pressure:s.max_blood_pressure,abdomen:s.abdomen,waist_circumference_narrowest_point:s.waist_circumference_narrowest_point,waist_circumference_iliac_spine_height:s.waist_circumference_iliac_spine_height},c,n);case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),O=function(e){var t=e.target;m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},y=function(e){m((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(S.a)({},e.target.name,e.target.checked))}))},j=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,v(c,n);case 4:(t=e.sent).exists()?(a=t.data(),j.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{weight:a.weight||0,height:a.height||0,bmi:a.bmi||"",neck_circumference:a.neck_circumference||0,waist_circumference:a.waist_circumference||0,heart_tones:a.heart_tones||!1,heart_murmur:a.heart_murmur||!1,heart_rate:a.heart_rate||0,mv_chest:a.mv_chest||!1,pathological_noises:a.pathological_noises||!1,murphy_blumberg:a.murphy_blumberg||!1,palpable_liver:a.palpable_liver||!1,palpable_thyroid:a.palpable_thyroid||!1,declining_edema:a.declining_edema||!1,carotid_murmurs:a.carotid_murmurs||!1,min_blood_pressure:a.min_blood_pressure||0,max_blood_pressure:a.max_blood_pressure||0,backdrop:!1,abdomen:a.abdomen||"",waist_circumference_iliac_spine_height:a.waist_circumference_iliac_spine_height||0,waist_circumference_narrowest_point:a.waist_circumference_narrowest_point||0})}))):j.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),j.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return j.current=!0,e(),function(){return j.current=!1}}),[n,c]);var k=s.heart_tones,_=s.heart_murmur,x=s.mv_chest,w=s.pathological_noises,C=s.murphy_blumberg,P=s.palpable_liver,N=s.palpable_thyroid,D=s.declining_edema,T=s.carotid_murmurs,z=s.backdrop;return z?i.a.createElement(V.a,{timeout:1e3,className:b.backdrop,open:z},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{id:"visit-step",container:!0,direction:"row",spacing:1,justifyContent:"flex-start",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{variant:"h5",color:"textPrimary",gutterBottom:!0},r)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"weight",name:"weight",label:I.measures.weight,helperText:"kg",onChange:O,value:s.weight,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"height",name:"height",label:I.measures.height,helperText:"cm",onChange:O,value:s.height,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"bmi",name:"bmi",label:"BMI",onChange:O,value:s.bmi,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"neck_circumference",name:"neck_circumference",label:I.visit.neck_circumference,helperText:"cm",onChange:O,value:s.neck_circumference,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"waist_circumference",name:"waist_circumference",label:I.visit.waist_circumference,onChange:O,value:s.waist_circumference,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"waist-circumference-narrowest-point",name:"waist_circumference_narrowest_point",label:I.visit.waist_circumference,helperText:I.visit.narrowest_point,onChange:O,value:s.waist_circumference_narrowest_point,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"waist-circumference-narrowest-point",name:"waist_circumference_iliac_spine_height",label:I.visit.waist_circumference,helperText:I.visit.iliac_spine_height,onChange:O,value:s.waist_circumference_iliac_spine_height,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"abdomen",name:"abdomen",label:"Addome",onChange:O,value:s.abdomen,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"min_blood_pressure",name:"min_blood_pressure",label:"Pressione arteriosa MIN",helperText:"mm Hg",onChange:O,value:s.min_blood_pressure,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"max_blood_pressure",name:"max_blood_pressure",label:"Pressione arteriosa MAX",helperText:"mm Hg",onChange:O,value:s.max_blood_pressure,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"heart_rate",name:"heart_rate",label:"Frequenza cardiaca",helperText:"nr. battiti/min",onChange:O,value:s.heart_rate,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"})),i.a.createElement($.a,{item:!0},i.a.createElement(Xe.a,{component:"fieldset",fullWidth:!0},i.a.createElement(ca.a,{"aria-label":"direction"},i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:k,onChange:y,name:"heart_tones",color:"primary"}),label:"Toni cardiaci validi e ritmici"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:_,onChange:y,name:"heart_murmur",color:"primary"}),label:"Soffio cardiaco"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:x,onChange:y,name:"mv_chest",color:"primary"}),label:"MV al torace"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:w,onChange:y,name:"pathological_noises",color:"primary"}),label:"Rumori patologici"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:C,onChange:y,name:"murphy_blumberg",color:"primary"}),label:"Segni di Murphy e Blumberg"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:P,onChange:y,name:"palpable_liver",color:"primary"}),label:"Fegato palpabile"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:N,onChange:y,name:"palpable_thyroid",color:"primary"}),label:"Tiroide palpabile"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:D,onChange:y,name:"declining_edema",color:"primary"}),label:"Edemi declivi"}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:T,onChange:y,name:"carotid_murmurs",color:"primary"}),label:"Soffi carotidei"})))),i.a.createElement($.a,{item:!0,xs:4}),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained",size:"large"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:E,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}Ur.defaultProps={pageName:I.visit.steps.physical_examination,visit:"first"};var Qr=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function $r(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({date:"2020-01-01",hb:"",cholesterol:0,hdl:0,ldl:0,triglycerides:0,glycemia:0,glycated_hb:0,uric_acid:0,creatininemia:0,alt:"",ggt:"",tsh:"",backdrop:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=A(),g=b.pushPatientVisitData,h=b.pullPatientVisitData,v=i.a.useCallback((function(e,t){return h(e,t)}),[h]),E=Qr(),O=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l,u,m,p,f,b,h,v,E,O;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.hb,r=s.cholesterol,i=s.hdl,o=s.ldl,l=s.triglycerides,u=s.glycemia,m=s.glycated_hb,p=s.uric_acid,f=s.creatininemia,b=s.alt,h=s.ggt,v=s.tsh,E=s.date,O={hb:t,cholesterol:parseInt(r,10),hdl:parseInt(i,10),ldl:parseInt(o,10),triglycerides:parseInt(l,10),glycemia:parseInt(u,10),glycated_hb:parseInt(m,10),uric_acid:parseInt(p,10),creatininemia:parseInt(f,10),alt:b,ggt:h,tsh:v,exam_date:E},e.prev=2,e.next=5,g(O,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),y=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,v(t,a);case 4:(n=e.sent).exists()?(r=n.data(),y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,hb:r.hb||"",cholesterol:r.cholesterol||0,hdl:r.hdl||0,ldl:r.ldl||0,triglycerides:r.triglycerides||0,glycemia:r.glycemia||0,glycated_hb:r.glycated_hb||0,uric_acid:r.uric_acid||0,creatininemia:r.creatininemia||0,alt:r.alt||"",ggt:r.ggt||"",tsh:r.tsh||"",date:r.exam_date||"2020-01-01"})}))):y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return y.current=!0,void 0!==n&&void 0!==c&&e(c,n),function(){return y.current=!1}}),[c,n,v]);var j=function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},k=s.backdrop;return k?i.a.createElement(V.a,{timeout:1e3,className:E.backdrop,open:k},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{id:"visit-step",container:!0,direction:"row",spacing:1,justifyContent:"flex-start",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(K.a,{id:"date",name:"date",helperText:"Data",onChange:j,value:s.date,type:"date",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"hb",name:"hb",label:"Hb",helperText:"g/dl",onChange:j,value:s.hb,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"cholesterol",name:"cholesterol",label:"Colosterolo totale",helperText:"mg/dl",onChange:j,value:s.cholesterol,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"hdl",name:"hdl",label:"HDL",helperText:"mg/dl",onChange:j,value:s.hdl,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"uric_acid",name:"uric_acid",label:"Acido urico",helperText:"mg/dl",onChange:j,value:s.uric_acid,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"})),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(K.a,{id:"ldl",name:"ldl",label:"LDL",helperText:"mg/dl",onChange:j,value:s.ldl,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"triglycerides",name:"triglycerides",label:"Trigliceridi",helperText:"mg/dl",onChange:j,value:s.triglycerides,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"glycemia",name:"glycemia",label:"Glicemia",helperText:"mg/dl",onChange:j,value:s.glycemia,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"glycated_hb",name:"glycated_hb",label:"Hb glicata",helperText:"mmol/mol Hb",onChange:j,value:s.glycated_hb,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"})),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(K.a,{id:"creatininemia",name:"creatininemia",label:"Creatininemia",helperText:"mg/dl",onChange:j,value:s.creatininemia,type:"number",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"alt",name:"alt",label:"Alt",helperText:"U/I",onChange:j,value:s.alt,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"ggt",name:"ggt",label:"GGT",helperText:"U/I",onChange:j,value:s.ggt,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{id:"tsh",name:"tsh",label:"TSH",helperText:"U/I",onChange:j,value:s.tsh,type:"text",fullWidth:!0,variant:"outlined",margin:"normal"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:O,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}$r.defaultProps={pageName:I.visit.steps.blood_chemistry,visit:"first"};var Kr=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Jr(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=(e.pageName,e.visit),c=i.a.useState({daily:"",tot:"",backdrop:!1}),o=Object(f.a)(c,2),l=o[0],s=o[1],m=A(),b=m.pushPatientVisitData,g=m.pullPatientVisitData,h=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.current&&s((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,g(r,n);case 4:(t=e.sent).exists()?(a=t.data(),h.current&&s((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,daily:a.daily_energy_expenditure||"",tot:a.tot_energy_expenditure||""})}))):h.current&&s((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),h.current&&s((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return h.current=!0,e(),function(){return h.current=!1}}),[]);var v=function(){var e=Object(p.a)(d.a.mark((function e(){var t,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=l.daily,i=l.tot,c={daily_energy_expenditure:t,tot_energy_expenditure:i},e.next=5,b(c,r,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),E=Kr(),O=function(e){var t=e.target;return s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},y=l.backdrop;return y?i.a.createElement(V.a,{className:E.backdrop,open:y,timeout:1e3},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:1},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Or,null,"Calcolo metabolismo basale tramite formula di Harris and Benedict")),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"daily-energy-expenditure",name:"daily",type:"text",label:"Dispendio energetico",helperText:"giornaliero a riposo (kcal/die)",value:l.daily,onChange:O,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"tot-energy-expenditure",name:"tot",type:"text",label:"Dispendio energetico",helperText:"totale (kcal/die)",value:l.tot,onChange:O,fullWidth:!0,margin:"normal",variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:v,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}Jr.defaultProps={pageName:I.visit.steps.calculation_metabolism,visit:"first"};var Yr=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Xr(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({bodyFat:0,bodyWater:0,leanMass:0,backdrop:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=A(),g=b.pushPatientVisitData,h=b.pullPatientVisitData,v=i.a.useCallback((function(e,t){return h(e,t)}),[h]),E=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,v(t,a);case 4:(n=e.sent).exists()?(r=n.data(),E.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,bodyFat:r.body_fat||"",bodyWater:r.body_water||"",leanMass:r.lean_mass||""})}))):E.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),E.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return E.current=!0,e(c,n),function(){return E.current=!1}}),[c,n,v]);var O=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=s.bodyFat,r=s.bodyWater,i=s.leanMass,o={body_fat:t,lean_mass:i,body_water:r},e.next=5,g(o,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),y=Yr(),j=function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},k=s.backdrop;return k?i.a.createElement(V.a,{className:y.backdrop,open:k,timeout:1e3},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{container:!0,direction:"row",spacing:1},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"body-fat",name:"bodyFat",type:"number",label:"Grasso corporeo",helperText:"%",value:s.bodyFat,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"body-water",name:"bodyWater",type:"number",label:"Acqua corporeo",helperText:"%",value:s.bodyWater,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"lean-mass",name:"leanMass",type:"number",label:"Massa magra",helperText:"%",value:s.leanMass,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:O,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}function Zr(e){var t=e.name,a=e.checked,n=e.label,r=e.onChange;return i.a.createElement(ca.a,{row:!0},i.a.createElement(de.a,{control:i.a.createElement(zn.a,{checked:a,onChange:function(e){var t=e.target.checked,a=e.target.name;r(a,t)},name:t,color:"primary"}),label:n,labelPlacement:"start"}))}Xr.defaultProps={pageName:I.visit.steps.bioimpedance,visit:"first"},Zr.defaultProps={name:"",checked:!1,label:""};var ei=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ti(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({yourselfDiets:!1,proDiets:!1,weightLoss:!1,weightGain:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=function(e,t){m((function(a){return Object(u.a)(Object(u.a)({},a),{},Object(S.a)({},e,t))}))},g=ei(),h=A(),v=h.pushPatientVisitData,E=h.pullPatientVisitData,O=i.a.useCallback((function(e,t){return E(e,t)}),[E]),y=i.a.useState({heavyweight:"",weightMaintained:"",maximumWeightLoss:"",yearGetFat:"",monthsGetFat:"",diets:"",backdrop:!1}),j=Object(f.a)(y,2),k=j[0],_=j[1],x=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.current&&_((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,O(t,a);case 4:(n=e.sent).exists()?(r=n.data(),x.current&&(_((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,heavyweight:r.heavyweight||"",weightMaintained:r.weightMaintained||"",maximumWeightLoss:r.maximumWeightLoss||"",yearGetFat:r.yearGetFat||"",diets:r.diets||"",monthsGetFat:r.monthsGetFat||""})})),m((function(e){return Object(u.a)(Object(u.a)({},e),{},{yourselfDiets:r.yourselfDiets||!1,proDiets:r.proDiets||!1,weightLoss:r.weightLoss||!1,weightGain:r.weightGain||!1})})))):x.current&&_((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x.current&&_((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return x.current=!0,e(c,n),function(){return x.current=!1}}),[c,n,O]);var w=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({yourselfDiets:s.yourselfDiets,proDiets:s.proDiets,weightLoss:s.weightLoss,weightGain:s.weightGain,heavyweight:k.heavyweight,weightMaintained:k.weightMaintained,maximumWeightLoss:k.maximumWeightLoss,yearGetFat:k.yearGetFat,diets:k.diets,monthsGetFat:k.monthsGetFat},c,n);case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error();case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t=e.target;return _((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))};return k.backdrop?i.a.createElement(V.a,{timeout:1e3,className:g.backdrop,open:k.backdrop},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{container:!0,direction:"column",spacing:1},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"heavyweight",name:"heavyweight",type:"number",label:"Peso massimo",helperText:"Peso massimo dal completamento lo sviluppo",placeholder:"Kg",value:k.heavyweight,onChange:C,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"weight-maintained",name:"weightMaintained",type:"number",label:"Peso mantenuto",helperText:"Peso mantenuto piu' a lungo nella vita adulta",placeholder:"Kg",value:k.weightMaintained,onChange:C,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"maximum-weight-loss",name:"maximumWeightLoss",type:"number",label:"Massima perdita",helperText:"Massima perdita di peso",placeholder:"Kg",value:k.maximumWeightLoss,onChange:C,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"months-get-fat",name:"monthsGetFat",type:"number",label:"Mesi",helperText:"In quanto tempo",placeholder:"2",value:k.monthsGetFat,onChange:C,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"year-get-fat",name:"yearGetFat",type:"number",label:"Anno",helperText:"Anno inizio aumento peso",placeholder:"2011",value:k.yearGetFat,onChange:C,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"diets-done",name:"diets",type:"number",label:"Diete",helperText:"Diete fatte durante la vita",placeholder:"#",value:k.diets,onChange:C,fullWidth:!0,margin:"normal",variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:!0},i.a.createElement(Zr,{name:"weightGain",checked:s.weightGain,onChange:b,label:"Aumento graduale del peso"}),i.a.createElement(Zr,{name:"weightLoss",checked:s.weightLoss,onChange:b,label:"Cali di peso"}),i.a.createElement(Zr,{name:"proDiets",checked:s.proDiets,onChange:b,label:"Diete con l'aiuto di un professionista"}),i.a.createElement(Zr,{name:"yourselfDiets",checked:s.yourselfDiets,onChange:b,label:"Diete fai da te"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:w,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}ti.defaultProps={pageName:I.visit.steps.weight_history,visit:"first"};var ai=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ni(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({averageCalories:"",nutrients:"",alcoholCalories:0,open:!1,proteins:0,carbohydrates:0,lipids:0,label:"",value:0,backdrop:!1,grams_carbs:"",grams_lipidi:"",grams_prots:""}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=A(),g=b.pushPatientVisitData,h=b.pullPatientVisitData,v=i.a.useCallback((function(e,t){return h(e,t)}),[h]),E=ai(),O=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l,u,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=s.averageCalories,r=s.nutrients,i=s.alcoholCalories,o=s.grams_carbs,l=s.grams_prots,u=s.grams_lipidi,m={averageCalories:t,nutrients:r,alcoholCalories:parseInt(i,10),grams_carbs:o,grams_lipidi:u,grams_prots:l},e.next=5,g(m,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(){return m((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1})}))},j=function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},k=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,v(t,a);case 4:(n=e.sent).exists()?(r=n.data(),k.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,averageCalories:r.averageCalories||"",nutrients:r.nutrients||"",alcoholCalories:r.alcoholCalories||0,grams_carbs:void 0===r.grams_carbs?"":r.grams_carbs,grams_lipidi:void 0===r.grams_lipidi?"":r.grams_lipidi,grams_prots:void 0===r.grams_prots?"":r.grams_prots})}))):k.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),k.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return k.current=!0,e(c,n),function(){return k.current=!1}}),[c,n,v]);var _=s.backdrop;return _?i.a.createElement(V.a,{timeout:1e3,className:E.backdrop,open:_},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(i.a.Fragment,null,i.a.createElement($.a,{container:!0,spacing:1},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"grams-carbs",name:"grams_carbs",value:s.grams_carbs,helperText:"grammi nutrienti (carboidrati)",onChange:j,fullWidth:!0,variant:"outlined",label:I.nutrients.carbs,margin:"normal"}),i.a.createElement(K.a,{id:"grams-prots",name:"grams_prots",value:s.grams_prots,helperText:"grammi nutrienti (proteine)",onChange:j,fullWidth:!0,variant:"outlined",label:I.nutrients.prots,margin:"normal"}),i.a.createElement(K.a,{id:"grams-lipidi",name:"grams_lipidi",value:s.grams_lipidi,helperText:"grammi nutrienti (lipidi)",onChange:j,fullWidth:!0,variant:"outlined",label:"Lipidi",margin:"normal"}),i.a.createElement(K.a,{id:"average-calories",name:"averageCalories",type:"text",label:"Calorie assunte",helperText:"Totale calorie assunte in media",value:s.averageCalories,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"nutrients",name:"nutrients",type:"text",label:"Nutrienti",placeholder:"%",value:s.nutrients,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined"}),i.a.createElement(K.a,{id:"alcoholCalories",name:"alcoholCalories",type:"number",label:"Calorie da alcool",value:s.alcoholCalories,onChange:j,fullWidth:!0,margin:"normal",variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:O,endIcon:i.a.createElement(_r.a,null)},I.general.next)))),i.a.createElement(Je.a,{maxWidth:"xs",open:s.open,onClose:y,fullWidth:!0},i.a.createElement(Ke.a,null,"Modifica nutrienti"),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(K.a,{id:s.label,name:s.label,variant:"outlined",label:s.label,helperText:"grams",key:"key-text-field",margin:"normal",size:"medium",fullWidth:!0,value:s.value,onChange:function(e){var t=e.target;return m((function(e){var a;return Object(u.a)(Object(u.a)({},e),{},(a={},Object(S.a)(a,t.name,t.value),Object(S.a)(a,"value",t.value),a))}))}})),i.a.createElement(at.a,null,i.a.createElement(X.a,{variant:"text",color:"secondary",size:"medium",onClick:y},"Cancel"),i.a.createElement(X.a,{variant:"text",color:"primary",size:"medium",onClick:y},"Ok"))))}ni.defaultProps={pageName:I.visit.steps.food_anamnesis,visit:"first"};var ri=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ii(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({prandial_hyperphagia:!1,compulsive_binge:!1,plucking:!1,emotional_eating:!1,night_eating:!1,selective_craving:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=i.a.useState({backdrop:!1}),g=Object(f.a)(b,2),h=g[0],v=g[1],E=ri(),O=A(),y=O.pushPatientVisitData,j=O.pullPatientVisitData,k=i.a.useCallback((function(e,t){return j(e,t)}),[j]),_=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.current&&v((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,k(t,a);case 4:(n=e.sent).exists()?(r=n.data(),_.current&&(m((function(e){return Object(u.a)(Object(u.a)({},e),{},{prandial_hyperphagia:r.prandial_hyperphagia||!1,compulsive_binge:r.compulsive_binge||!1,plucking:r.plucking||!1,emotional_eating:r.emotional_eating||!1,night_eating:r.night_eating||!1,selective_craving:r.selective_craving||!1})})),v((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})))):_.current&&v((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),_.current&&v((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}();return _.current=!0,e(c,n),function(){return _.current=!1}}),[c,n,k]);var x=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l,u,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=s.prandial_hyperphagia,r=s.compulsive_binge,i=s.plucking,o=s.emotional_eating,l=s.night_eating,u=s.selective_craving,m={prandial_hyperphagia:t,compulsive_binge:r,plucking:i,emotional_eating:o,night_eating:l,selective_craving:u},e.next=5,y(m,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(e,t){return m((function(a){return Object(u.a)(Object(u.a)({},a),{},Object(S.a)({},e,t))}))},C=h.backdrop;return C?i.a.createElement(V.a,{timeout:1e3,className:E.backdrop,open:C},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{container:!0,justifyContent:"flex-start",spacing:1},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:!0},i.a.createElement(Zr,{name:"prandial_hyperphagia",checked:s.prandial_hyperphagia,onChange:w,label:"Iperfagia prandiale"}),i.a.createElement(Zr,{name:"compulsive_binge",checked:s.compulsive_binge,onChange:w,label:"Abbuffata compulsiva"}),i.a.createElement(Zr,{name:"plucking",checked:s.plucking,onChange:w,label:"Piluccamento"}),i.a.createElement(Zr,{name:"emotional_eating",checked:s.emotional_eating,onChange:w,label:"Emotional eating"}),i.a.createElement(Zr,{name:"night_eating",checked:s.night_eating,onChange:w,label:"Night eating"}),i.a.createElement(Zr,{name:"selective_craving",checked:s.selective_craving,onChange:w,label:"Selective craving"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:x,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}ii.defaultProps={pageName:I.visit.steps.eating_behavior,visit:"first"};var ci=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function oi(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.visit,c=ci(),o=A(),l=o.pushPatientVisitData,s=o.pullPatientVisitData,m=i.a.useState({backdrop:!1,kcal_therapeutic_target:"",kcal_carb_target:"",kcal_prot_target:"",kcal_lipids_target:"",exercise_target:""}),b=Object(f.a)(m,2),g=b[0],h=b[1],v=function(e){var t=e.target;return h((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},E=function(){var e=Object(p.a)(d.a.mark((function e(){var t,i,c,o,s,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=g.kcal_therapeutic_target,i=g.kcal_carb_target,c=g.kcal_lipids_target,o=g.kcal_prot_target,s=g.exercise_target,u={kcal_therapeutic_target:t,kcal_carb_target:i,kcal_lipids_target:c,kcal_prot_target:o,exercise_target:s},e.next=5,l(u,r,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.current&&h((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,s(r,t);case 4:(a=e.sent).exists()?(n=a.data(),O.current&&h((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,kcal_therapeutic_target:n.kcal_therapeutic_target||"",kcal_carb_target:n.kcal_carb_target||"",kcal_lipids_target:n.kcal_lipids_target||"",kcal_prot_target:n.kcal_prot_target||"",exercise_target:n.exercise_target||""})}))):O.current&&h((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),O.current&&h((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return O.current=!0,void 0!==n&&e(n),function(){return O.current=!1}}),[n]);var y=g.backdrop;return y?i.a.createElement(V.a,{className:c.backdrop,open:y,timeout:1e3},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:1},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Or,null,"Piano nutrizionale")),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{variant:"outlined",id:"kcal_therapeutic_target",name:"kcal_therapeutic_target",key:"kcal_therapeutic_target",label:"Target terapeutico",placeholder:"kcal",fullWidth:!0,type:"number",margin:"normal",value:g.kcal_therapeutic_target,onChange:v}),i.a.createElement(K.a,{variant:"outlined",margin:"normal",key:"exercise_target",placeholder:"kcal",type:"number",label:"Target esericizio fisico",fullWidth:!0,helperText:"Dispendio attivita' motorie consiglaita",id:"exercise_target",name:"exercise_target",value:g.exercise_target,onChange:v})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{color:"textSecondary",variant:"h6"},"Target nutrienti")),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{margin:"normal",fullWidth:!0,id:"kcal_carb_target",key:"kcal_carb_target",variant:"outlined",label:"Carboidrati",helperText:"Target % carboidrati",placeholder:"kcal",name:"kcal_carb_target",value:g.kcal_carb_target,onChange:v,type:"number"}),i.a.createElement(K.a,{id:"kcal_prot_target",key:"kcal_prot_target",margin:"normal",size:"medium",fullWidth:!0,variant:"outlined",label:"Proteine",helperText:"Target % proteine",placeholder:"kcal",name:"kcal_prot_target",value:g.kcal_prot_target,onChange:v,type:"number"}),i.a.createElement(K.a,{id:"kcal_lipids_target",key:"kcal_lipids_target",variant:"outlined",size:"medium",fullWidth:!0,margin:"normal",label:"Lipidi",helperText:"Target % lipidi",placeholder:"kcal",name:"kcal_lipids_target",value:g.kcal_lipids_target,onChange:v,type:"number"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:E,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}var li=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function si(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({medications:!1,medications_text:"",foods:!1,foods_text:"",backdrop:!1}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=li(),g=A(),h=g.pushPatientVisitData,v=g.pullPatientVisitData,E=function(e,t){return m((function(a){return Object(u.a)(Object(u.a)({},a),{},Object(S.a)({},e,t))}))},O=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=s.medications,r=s.medications_text,i=s.foods,o=s.foods_text,l={foods:i,foods_text:o,medications:t,medications_text:r},e.next=5,h(l,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),y=i.a.useRef(null);i.a.useState((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.prev=1,e.next=4,v(c,t);case 4:(a=e.sent).exists()?(n=a.data(),y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,medications:n.medications||!1,foods:n.foods||!1,medications_text:n.medications_text||"",foods_text:n.foods_text||""})}))):y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),y.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return y.current=!0,e(n),function(){return y.current=!1}}),[n]);var j=s.backdrop;return j?i.a.createElement(V.a,{className:b.backdrop,open:j,timeout:1e3},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement($.a,{container:!0,direction:"row",justifyContent:"flex-start",spacing:1,alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12,id:"title-page-name"},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Lr,null,"Farmaci"),i.a.createElement(Tr,{label:"Farmaci",name:"medications",checked:s.medications,onChange:E}),i.a.createElement(K.a,{disabled:!s.medications,fullWidth:!0,id:"medications_textfield",name:"medications_text",value:s.medications_text,variant:"outlined",multiline:!0,minRows:2,maxRows:6,label:"Farmaci",helperText:"Descrizione",onChange:function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))}})),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(Lr,null,"Alimenti"),i.a.createElement(Tr,{label:"Alimenti",name:"foods",checked:s.foods,onChange:E}),i.a.createElement(K.a,{disabled:!s.foods,fullWidth:!0,id:"foods_textfield",name:"foods_text",value:s.foods_text,variant:"outlined",multiline:!0,minRows:2,maxRows:6,label:"Alimenti",helperText:"Descrizione",onChange:function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:O,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}function ui(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,r=e.pageName,c=e.visit,o=i.a.useState({liftedFromChair:"",gateSpeed:0,walkingTestMeters:0,walkingTestTime:0,handgripMano:""}),l=Object(f.a)(o,2),s=l[0],m=l[1],b=A(),g=b.pushPatientVisitData,h=b.pullPatientVisitData,v=i.a.useCallback((function(e,t){return h(e,t)}),[h]),E=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.liftedFromChair,r=s.gateSpeed,i=s.walkingTestMeters,o=s.walkingTestTime,l=s.handgripMano,u={lifted_from_chair:t,gate_speed:r,walking_test_meters:i,walking_test_time:o,handgripMano:l},e.prev=2,e.next=5,g(u,c,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),O=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t,a);case 3:if((n=e.sent).exists()){e.next=7;break}return console.debug("empty"),e.abrupt("return");case 7:r=n.data(),i={liftedFromChair:r.lifted_from_chair,gateSpeed:r.gate_speed,walkingTestMeters:r.walking_test_meters,walkingTestTime:r.walking_test_time,handgripMano:r.handgripMano},c={},Object.keys(i).forEach((function(e){c[e]=void 0===i[e]?0:i[e]})),O.current&&m((function(e){return Object(u.a)(Object(u.a)({},e),c)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}();return O.current=!0,e(c,n),function(){return O.current=!1}}),[c,n,v]);var y=function(e){var t=e.target;m((function(e){var a=Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value)),n=a.walkingTestMeters,r=a.walkingTestTime;return Object(u.a)(Object(u.a)({},a),{},{gateSpeed:parseFloat(n/r).toFixed(2)})}))},j=s.liftedFromChair,k=s.gateSpeed,_=s.walkingTestMeters,x=s.walkingTestTime,w=s.handgripMano;return i.a.createElement($.a,{container:!0,direction:"row",spacing:1,justifyContent:"flex-start",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Or,null,r)),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"lifted-from-chair",name:"liftedFromChair",label:"lifted from chair",helperText:"lifted from the chair",type:"text",variant:"outlined",fullWidth:!0,margin:"normal",value:j,onChange:function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))}}),i.a.createElement(K.a,{id:"walking-test-meters",name:"walkingTestMeters",label:"walking test",helperText:"metri",type:"number",variant:"outlined",fullWidth:!0,margin:"normal",value:_,onChange:y}),i.a.createElement(K.a,{id:"walking-test-time",name:"walkingTestTime",label:"walking test",helperText:"tempo",type:"number",variant:"outlined",fullWidth:!0,margin:"normal",value:x,onChange:y}),i.a.createElement(K.a,{id:"gate-speed",name:"gateSpeed",label:"camminata veloce",helperText:"gate speed",type:"number",variant:"filled",fullWidth:!0,margin:"normal",value:k,InputProps:{readOnly:!0},inputProps:{step:"0.01"}}),i.a.createElement(K.a,{id:"handgrip-mano",name:"handgripMano",label:"handgrip-mano",helperText:"handgrip-mano",type:"text",fullWidth:!0,variant:"outlined",margin:"normal",value:w,onChange:function(e){var t=e.target;return m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:E,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}si.defaultProps={pageName:I.visit.steps.allergies,visit:"first"},ui.defaultProps={pageName:"Test di performance e di autonomia funzionale",visit:"first"};var mi=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function di(e){var t=e.onClickBack,a=e.onClickNext,n=e.patient,c=e.pageName,o=e.visit,l=mi(),s=Object(r.useState)({som:0,obs_comp:0,interp_sens:0,dep:0,anx:0,anger_host:0,phob:0,paran:0,psych:0,sleep:0,tot_tefq51:0,tot_orwell:0,restriz:0,disinibiz:0,fame:0,sint_fis:0,impatto_psisoc:0,scl90_score:"",bes_score:"",free_desc_psycho_test:"",scoreIpaq:"",active:"",openBackdrop:!1}),m=Object(f.a)(s,2),b=m[0],g=m[1],h=A(),v=h.pushPatientVisitData,E=h.pullPatientVisitData,O=Object(r.useCallback)((function(e,t){return E(e,t)}),[E]),y=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r,i,c,l,s,u,m,p,f,g,h,E,O,y,j,k,_,x,w,C,P,S;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.som,r=b.obs_comp,i=b.interp_sens,c=b.dep,l=b.anx,s=b.anger_host,u=b.phob,m=b.paran,p=b.psych,f=b.sleep,g=b.tot_tefq51,h=b.restriz,E=b.disinibiz,O=b.fame,y=b.sint_fis,j=b.impatto_psisoc,k=b.bes_score,_=b.scl90_score,x=b.free_desc_psycho_test,w=b.scoreIpaq,C=b.active,P=b.tot_orwell,S={som:t,obs_comp:r,interp_sens:i,dep:c,anx:l,anger_host:s,phob:u,paran:m,psych:p,sleep:f,tot_tefq51:g,tot_orwell:P,restriz:h,disinibiz:E,fame:O,sint_fis:y,impatto_psisoc:j,bes_score:k,scl90_score:_,free_desc_psycho_test:x,scoreIpaq:w,active:C},e.prev=2,e.next=5,v(S,o,n);case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),j=i.a.useRef(null);i.a.useEffect((function(){var e=function(e){return void 0===e||"number"!==typeof e&&"string"!==typeof e||isNaN(e)||null===e||"null"===e||"undefined"===e?0:parseFloat(e)},t=function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,i,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O(a,n);case 3:if((r=t.sent).exists()){t.next=6;break}return t.abrupt("return",console.debug("empty"));case 6:i=r.data(),c={som:e(i.som),obs_comp:e(i.obs_comp),interp_sens:e(i.interp_sens),dep:e(i.dep),anx:e(i.anx),anger_host:e(i.anger_host),phob:e(i.phob),paran:e(i.paran),psych:e(i.psych),sleep:e(i.sleep),tot_tefq51:e(i.tot_tefq51),tot_orwell:e(i.tot_orwell),disinibiz:e(i.disinibiz),restriz:e(i.restriz),fame:e(i.fame),sint_fis:e(i.sint_fis),impatto_psisoc:e(i.impatto_psisoc),bes_score:e(i.bes_score),scl90_score:e(i.scl90_score),free_desc_psycho_test:i.free_desc_psycho_test||"",scoreIpaq:e(i.scoreIpaq),active:i.active||""},j.current&&g((function(e){return Object(u.a)(Object(u.a)({},e),c)})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}();return j.current=!0,void 0!==o&&void 0!==n&&t(o,n),function(){return j.current=!1}}),[o,n,O]);var k=function(e){return e.reduce((function(e,t){return e+t}),0)},_=function(e){var t=e.target;g((function(e){var a=Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,parseFloat(t.value))),n=a.sint_fis,r=a.impatto_psisoc;return Object(u.a)(Object(u.a)({},a),{},{tot_orwell:k([n,r])})}))},x=function(e){var t=e.target;g((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,parseFloat(t.value)))}))},w=function(e){var t=e.target;g((function(e){var a=Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,parseFloat(t.value))),n=a.disinibiz,r=a.fame,i=a.restriz;return Object(u.a)(Object(u.a)({},a),{},{tot_tefq51:k([n,r,i])})}))},C=b.openBackdrop;if(C)return i.a.createElement(V.a,{className:l.backdrop,open:C},i.a.createElement(G.a,{color:"inherit"}));var P=b.som,N=b.obs_comp,D=b.interp_sens,T=b.dep,z=b.anx,W=b.anger_host,q=b.phob,L=b.paran,R=b.psych,B=b.sleep,M=b.disinibiz,H=b.fame,U=b.restriz,Q=b.tot_tefq51,J=b.sint_fis,Y=b.impatto_psisoc,Z=b.tot_orwell,ee=b.bes_score,te=b.scl90_score,ae=b.free_desc_psycho_test,ne=b.active;return i.a.createElement($.a,{container:!0,spacing:1,direction:"row"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Or,{paragraph:!0},c)),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{paragraph:!0,variant:"h6",color:"textSecondary"},"SCL punteggio")),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(K.a,{id:"score-scl90",key:"score-scl90",name:"scl90_score",label:"SCL90 Punteggio",helperText:"SCL90 punteggio",type:"number",variant:"outlined",value:te,onChange:x,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"som",key:"som",name:"som",label:"Som",helperText:"som",type:"number",variant:"outlined",value:P,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"obs-comp",key:"obs-comp",name:"obs_comp",label:"Obs Comp",helperText:"obs comp",type:"number",variant:"outlined",value:N,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"interp-sens",key:"interp-sens",name:"interp_sens",label:"Interp Sens",helperText:"interp sens",type:"number",variant:"outlined",value:D,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"dep",key:"dep",name:"dep",label:"Dep",helperText:"dep",type:"number",variant:"outlined",value:T,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"anx",key:"anx",name:"anx",label:"Anx",helperText:"anx",type:"number",variant:"outlined",value:z,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"anger-host",key:"anger-host",name:"anger_host",label:"Anger Host",helperText:"anger host",type:"number",variant:"outlined",value:W,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"phob",key:"phob",name:"phob",label:"Phob",helperText:"phob",type:"number",variant:"outlined",value:q,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"paran",key:"paran",name:"paran",label:"Paran",helperText:"paran",type:"number",variant:"outlined",value:L,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"psych",key:"psych",name:"psych",label:"Psych",helperText:"psych",type:"number",variant:"outlined",value:R,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"sleep",key:"sleep",name:"sleep",label:"Sleep",helperText:"sleep",type:"number",variant:"outlined",value:B,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{paragraph:!0,variant:"h6",color:"textSecondary"},"BES punteggio")),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"bes-score",key:"bes-score",name:"bes_score",label:"BES punteggio",helperText:"bes punteggio",type:"number",variant:"outlined",value:ee,onChange:x,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{paragraph:!0,variant:"h6",color:"textSecondary"},"TEFQ51 punteggio")),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"restriz",key:"restriz",name:"restriz",label:"Restriz.",helperText:"restriz",type:"number",variant:"outlined",value:U,onChange:w,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"disinibiz",key:"disinibiz",name:"disinibiz",label:"Disinibiz.",helperText:"disinibiz",type:"number",variant:"outlined",value:M,onChange:w,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"fame",key:"fame",name:"fame",label:"Fame",helperText:"fame",type:"number",variant:"outlined",value:H,onChange:w,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"tot_tefq51",key:"tot_tefq51",name:"tot_tefq51",label:"TEFQ51 Punteggio",helperText:"tefq51 punteggio",type:"number",variant:"filled",value:Q,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{paragraph:!0,variant:"h6",color:"textSecondary"},"ORWELL punteggio")),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"sint-fis",key:"sint-fis",name:"sint_fis",label:"Sint fis.",helperText:"sint fis",type:"number",variant:"outlined",value:J,onChange:_,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"impatto_psisoc",key:"impatto_psisoc",name:"impatto_psisoc",label:"Impatto psisoc.",helperText:"impatto psisoc.",type:"number",variant:"outlined",value:Y,onChange:_,fullWidth:!0,margin:"normal"})),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"tot_orwell",key:"tot_orwell",name:"tot_orwell",label:"ORWELL punteggio",helperText:"tot orwell",type:"number",variant:"filled",value:Z,fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Or,{paragraph:!0},"Abitudini Motorie"),i.a.createElement(F.a,{paragraph:!0,variant:"h6",color:"textSecondary"},"IPAQ punteggio")),i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(K.a,{id:"ipaq-score",key:"ipaq-score",name:"scoreIpaq",label:"IPAQ punteggio",helperText:"ipaq punteggio",type:"number",variant:"outlined",value:b.scoreIpaq,onChange:x,fullWidth:!0,margin:"normal"}),i.a.createElement(Xe.a,{fullWidth:!0,variant:"outlined"},i.a.createElement(Ze.a,{id:"demo-simple-select-label"},"Comportamento"),i.a.createElement(et.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",name:"active",value:ne,onChange:function(e){var t=e.target;return g((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},fullWidth:!0,label:"Comportamento",variant:"outlined"},i.a.createElement(ve.a,{value:""},i.a.createElement("em",null,"-")),i.a.createElement(ve.a,{value:"idle"},"Inattivo"),i.a.createElement(ve.a,{value:"suff_active"},"Sufficientemente attivo"),i.a.createElement(ve.a,{value:"active"},"Attivo o molto attivo"))),i.a.createElement(K.a,{type:"text",minRows:2,maxRows:5,multiline:!0,name:"free_desc_psycho_test",id:"free_desc_psycho_test",value:ae,onChange:function(e){var t=e.target;return g((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},label:"Nota",fullWidth:!0,variant:"outlined",margin:"normal"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained"},i.a.createElement(X.a,{onClick:function(){return t()},startIcon:i.a.createElement(jr.a,null)},I.general.back),i.a.createElement(X.a,{onClick:y,endIcon:i.a.createElement(_r.a,null)},I.general.next))))}var pi=a(510);a(314);function fi(e){return i.a.createElement(fr.a,Object.assign({},e,{direction:"left"}))}Object(xe.a)({alternativeLabel:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},active:{"& $line":{borderColor:"#784af4"}},completed:{"& $line":{borderColor:"#784af4"}},line:{borderColor:"#eaeaf0",borderTopWidth:3,borderRadius:1}})(pi.a),Object(re.a)({root:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},active:{color:"#784af4"},circle:{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"},completed:{color:"#784af4",zIndex:1,fontSize:18}});var bi=Object(re.a)((function(e){return{stepper:{padding:e.spacing(3,0,5),backgroundColor:"transparent"},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},root:{width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},paper:{padding:e.spacing(3),borderRadius:24}}}));var gi=a(316),hi=a.n(gi),vi=a(625),Ei=a(607),Oi=a(606),yi=a(317),ji=a.n(yi),ki=Object(re.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var _i=a(319),xi=a.n(_i),wi=a(318),Ci=a.n(wi),Pi=a(320),Si=a.n(Pi),Ni=Object(re.a)({root:{"& > *":{borderBottom:"unset"}},tableContainer:{maxHeight:640}});function Ii(e){var t=e.patient,a=i.a.useState(!1),n=Object(f.a)(a,2),r=n[0],c=n[1],o=Ni(),l=i.a.useRef(null),s=A(),m=s.getPatientVisits,b=s.currentLanguage,g=i.a.useState({visits:[],headers:[],values:[]}),h=Object(f.a)(g,2),v=h[0],E=h[1];i.a.useEffect((function(){return l.current=!0,function(){return l.current=!1}}),[]),i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n=[],e.prev=2,e.next=5,m(t);case 5:e.sent.docs.forEach((function(e){var t=e.data(),r={patient_age:t.patient_age,gender:t.gender,patient_occupation:t.patient_occupation,educational_qualification:t.educational_qualification,marital_status:t.marital_status,ethnicity:t.ethnicity,consent:t.consent,smoker:t.smoker,ex_smoker:t.ex_smoker,alcoholic:t.alcoholic,use_laxatives:t.use_laxatives,incontinence:t.incontinence,snoring:t.snoring,insomnia:t.insomnia,menopause:t.menopause,pregnancies:t.pregnancies,abortions:t.abortions,amount_cigarettes:t.amount_cigarettes,alvo:t.alvo,menstrual_cycles:t.menstrual_cycles,eating:t.eating,mood:t.mood,anxiety:t.anxiety,psychosis:t.psychosis,personality:t.personality,weight:t.weight,height:t.height,bmi:t.bmi,neck_circumference:t.neck_circumference,waist_circumference:t.waist_circumference,heart_tones:t.heart_tones,heart_murmur:t.heart_murmur,heart_rate:t.heart_rate,mv_chest:t.mv_chest,pathological_noises:t.pathological_noises,murphy_blumberg:t.murphy_blumberg,palpable_liver:t.palpable_liver,palpable_thyroid:t.palpable_thyroid,declining_edema:t.declining_edema,carotid_murmurs:t.carotid_murmurs,min_blood_pressure:t.min_blood_pressure,max_blood_pressure:t.max_blood_pressure,abdomen:t.abdomen,waist_circumference_iliac_spine_height:t.waist_circumference_iliac_spine_height,waist_circumference_narrowest_point:t.waist_circumference_narrowest_point,hb:t.hb,cholesterol:t.cholesterol,hdl:t.hdl,ldl:t.ldl,triglycerides:t.triglycerides,glycemia:t.glycemia,glycated_hb:t.glycated_hb,uric_acid:t.uric_acid,creatininemia:t.creatininemia,alt:t.alt,ggt:t.ggt,tsh:t.tsh,exam_date:t.exam_date,daily_energy_expenditure:t.daily_energy_expenditure,tot_energy_expenditure:t.tot_energy_expenditure,body_fat:t.body_fat,lean_mass:t.lean_mass,body_water:t.body_water,yourselfDiets:t.yourselfDiets,proDiets:t.proDiets,weightLoss:t.weightLoss,weightGain:t.weightGain,heavyweight:t.heavyweight,weightMaintained:t.weightMaintained,maximumWeightLoss:t.maximumWeightLoss,yearGetFat:t.yearGetFat,monthsGetFat:t.monthsGetFat,diets:t.diets,averageCalories:t.averageCalories,nutrients:t.nutrients,alcoholCalories:t.alcoholCalories,grams_carbs:t.grams_carbs,grams_lipidi:t.grams_lipidi,grams_prots:t.grams_prots,prandial_hyperphagia:t.prandial_hyperphagia,compulsive_binge:t.compulsive_binge,plucking:t.plucking,emotional_eating:t.emotional_eating,night_eating:t.night_eating,selective_craving:t.selective_craving,createdAt:t.createdAt.toDate().toLocaleDateString(b),kcal_therapeutic_target:t.kcal_therapeutic_target,kcal_carb_target:t.kcal_carb_target,kcal_lipids_target:t.kcal_lipids_target,kcal_prot_target:t.kcal_prot_target,exercise_target:t.exercise_target,foods:t.foods,foods_text:t.foods_text,medications:t.medications,medications_text:t.medications_text,lifted_from_chair:t.lifted_from_chair,gate_speed:t.gate_speed,walking_test_meters:t.walking_test_meters,walking_test_time:t.walking_test_time,handgripMano:t.handgripMano,som:t.som,obs_comp:t.obs_comp,interp_sens:t.interp_sens,dep:t.dep,anx:t.anx,anger_host:t.anger_host,phob:t.phob,paran:t.paran,psych:t.psych,sleep:t.sleep,tot_tefq51:t.tot_tefq51,tot_orwell:t.tot_orwell,restriz:t.restriz,disinibiz:t.disinibiz,fame:t.fame,sint_fis:t.sint_fis,impatto_psisoc:t.impatto_psisoc,bes_score:t.bes_score,scl90_score:t.scl90_score,free_desc_psycho_test:t.free_desc_psycho_test,scoreIpaq:t.scoreIpaq,active:t.active},i=t.inprogress_pathologies,c=t.previous_pathologies;void 0!==c&&c.length>0&&(r=Object(u.a)(Object(u.a)({},r),{},{pathologies_previous:c.map((function(e){return e.name.trim().toLowerCase()})).join(",")})),void 0!==i&&i.length>0&&(r=Object(u.a)(Object(u.a)({},r),{},{pathologies_inprogress:i.map((function(e){return e.name.trim().toLowerCase()})).join(",")})),Object.keys(r).forEach((function(e){n.includes(e)||n.push(e)})),a.push(r)})),l.current&&E((function(e){return Object(u.a)(Object(u.a)({},e),{},{headers:n,values:a})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return l.current=!0,e(t.uid),function(){return l.current=!1}}),[t,b]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qe.a,{className:o.root},i.a.createElement($e.a,null,i.a.createElement(Y.a,{"aria-label":"expand row",size:"small",onClick:function(){return c(!r)}},r?i.a.createElement(Ci.a,null):i.a.createElement(xi.a,null))),i.a.createElement($e.a,{component:"th",scope:"row"},"".concat(t.name," ").concat(t.surname)),i.a.createElement($e.a,{align:"right"},"".concat(t.dateOfBirth)),i.a.createElement($e.a,{align:"right"},t.therapyStartDate),i.a.createElement($e.a,{align:"right"},t.therapyEndDate),i.a.createElement($e.a,{align:"right"},t.email),i.a.createElement($e.a,null,i.a.createElement(rt.a,{title:"Esporta"},i.a.createElement(Y.a,{onClick:function(){var e=v.values,a=v.headers,n="data:text/csv;charset=utf-8,";n+=a.join(";").concat("\n"),e.forEach((function(e){a.forEach((function(t){void 0!==e[t]&&(n+="".concat(e[t])),n+=";"})),n+="\n"}));var r=document.createElement("a");r.setAttribute("href",encodeURI(n)),r.setAttribute("download","".concat(t.uid,".csv").toLowerCase()),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)},size:"small"},i.a.createElement(Si.a,{fontSize:"small"}))))),i.a.createElement(Qe.a,null,i.a.createElement($e.a,{style:{paddingBottom:0,paddingTop:0},colSpan:7},i.a.createElement(nn.a,{in:r,timeout:"auto",unmountOnExit:!0},i.a.createElement(U.a,{margin:1},i.a.createElement(it.a,{className:o.tableContainer},i.a.createElement(ct.a,{size:"small","aria-label":"purchases",style:{width:"100%"},stickyHeader:!0},i.a.createElement(ot.a,null,i.a.createElement(Qe.a,null,i.a.createElement($e.a,null),v.values.map((function(e,t){return i.a.createElement($e.a,{key:"header-visit-key".concat(t+1),style:{fontWeight:"bold"}},e.createdAt)})))),i.a.createElement(lt.a,null,v.headers.map((function(e,t){var a=I.visit[e];if("createdAt"!==e)return i.a.createElement(Qe.a,{key:"row-".concat(t+1),hover:!0},i.a.createElement($e.a,null,"".concat(t+1,". ").concat(a)),v.values.map((function(a,n){if(void 0===a[e])return i.a.createElement($e.a,{key:"row-".concat(t+1,"-cell-").concat(n+1)},"-");if("boolean"===typeof a[e])return a[e]?i.a.createElement($e.a,{key:"row-".concat(t+1,"-cell-").concat(n+1)},i.a.createElement(Ya.a,{fontSize:"small"})):i.a.createElement($e.a,{key:"row-".concat(t+1,"-cell-").concat(n+1)},i.a.createElement(pt.a,{fontSize:"small"}));if("string"===typeof a[e]){var r=a[e];return"male"===r?i.a.createElement($e.a,{key:"row-".concat(t+1,"-cell-").concat(n+1)},I.general.male):"female"===r?i.a.createElement($e.a,{key:"row-".concat(t+1,"-cell-").concat(n+1)},I.general.female):i.a.createElement($e.a,{key:"row-".concat(t+1,"-cell-").concat(n+1)},r)}return i.a.createElement($e.a,{key:"row-".concat(t+1,"-cell-").concat(n+1)},"".concat(a[e]))})))}))))))))))}var Di=Object(re.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},title:{flex:"1 1 100%"}}})),Ti=function(){var e=Di();return i.a.createElement(un.a,{className:e.root},i.a.createElement(F.a,{className:e.title,variant:"h6",id:"tableTitle",component:"div"},"Esporta dati visite mediche"),i.a.createElement(rt.a,{title:"More"},i.a.createElement(Y.a,null,i.a.createElement(Be.a,null))))},zi=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var Wi=a(180),Ai=a.n(Wi),qi=a(179),Fi=a.n(qi),Li=Object(re.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var Ri=Object(re.a)((function(e){return{root:{padding:e.spacing(3),borderRadius:24},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Bi="male",Mi="error",Vi="info",Gi="success";function Hi(e){return i.a.createElement(fr.a,Object.assign({},e,{direction:"left"}))}var Ui=["children"],Qi=["children"],$i=["children"];Object(xe.a)((function(){return{root:{color:"#ffc107"}}}))((function(e){e.children;var t=Object(L.a)(e,Ui);return i.a.createElement(Le.a,t)})),Object(xe.a)((function(){return{root:{color:"#f44336"}}}))((function(e){e.children;var t=Object(L.a)(e,Qi);return i.a.createElement(qe.a,t)})),Object(xe.a)((function(){return{root:{color:"#4caf50"}}}))((function(e){e.children;var t=Object(L.a)(e,$i);return i.a.createElement(We.a,t)}));function Ki(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Ji(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,r=e.orderBy,c=e.numSelected,o=e.rowCount,l=e.onRequestSort,s=e.headCells;return i.a.createElement(ot.a,null,i.a.createElement(Qe.a,null,i.a.createElement($e.a,{padding:"checkbox"},i.a.createElement(pe.a,{indeterminate:c>0&&c<o,checked:o>0&&c===o,onChange:a,inputProps:{"aria-label":"select all desserts"},color:"primary"})),s.map((function(e){return i.a.createElement($e.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:r===e.id&&n},i.a.createElement(mn.a,{active:r===e.id,direction:r===e.id?n:"asc",onClick:(a=e.id,function(e){l(e,a)})},e.label,r===e.id?i.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))}var Yi=Object(re.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.primary.main,backgroundColor:Object(Ue.e)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.primary.dark},title:{flex:"1 1 100%"}}}));function Xi(e){var t=e.numSelected,a=e.handleSearch,n=e.onRequestNotes,r=e.onRequestVisit,c=Yi();return i.a.createElement(un.a,{className:Object(tn.a)(c.root,Object(S.a)({},c.highlight,t>0))},t>0?i.a.createElement(F.a,{className:c.title,color:"inherit",variant:"subtitle1",component:"div"},t," selezionato/i"):i.a.createElement(F.a,{className:c.title,variant:"h6",id:"tableTitle",component:"div"},"Pazienti Gruppo di controllo"),t>0?i.a.createElement(i.a.Fragment,null,1==t?i.a.createElement(i.a.Fragment,null,i.a.createElement(rt.a,{title:"Note"},i.a.createElement(Y.a,{onClick:n},i.a.createElement(pn.a,null))),i.a.createElement(rt.a,{title:"Visita medica"},i.a.createElement(Y.a,{onClick:r},i.a.createElement(Se.a,null)))):null):i.a.createElement(K.a,{id:"search",type:"search",onChange:function(e){var t=e.target;return a(t.value)},name:"search",margin:"none",size:"small",label:"Cerca",variant:"outlined",InputProps:{endAdornment:i.a.createElement(J.a,{position:"end"},i.a.createElement(Y.a,{"aria-label":"search patient"},i.a.createElement(Ie.a,null)))}}))}var Zi=Object(re.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2),borderRadius:24,padding:e.spacing(3)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ec(e){var t=e.rows,a=e.headCells,n=e.handleSearch,r=e.history,c=e.classes,o=i.a.useState("desc"),l=Object(f.a)(o,2),s=l[0],u=l[1],m=i.a.useState("createdAt"),d=Object(f.a)(m,2),p=d[0],b=d[1],g=i.a.useState([]),h=Object(f.a)(g,2),v=h[0],E=h[1],O=i.a.useState(0),y=Object(f.a)(O,2),j=y[0],k=(y[1],i.a.useState(!1)),_=Object(f.a)(k,2),x=_[0],w=(_[1],i.a.useState(10)),C=Object(f.a)(w,2),P=C[0],S=(C[1],P-Math.min(P,t.length-j*P)),N=Object(ne.a)();return N.overrides={MuiTableRow:{root:{"&$selected, &$selected:hover":{backgroundColor:Object(Ue.a)(N.palette.primary.main,N.palette.action.selectedOpacity)}}}},i.a.createElement("div",{className:c.root},i.a.createElement(ie.a,{theme:N},i.a.createElement(ge.a,{className:c.paper},i.a.createElement(Xi,{numSelected:v.length,handleSearch:n,onRequestNotes:function(){var e=v[0];r.push("/".concat(e,"/notes"),{patientId:e,titlePage:I.pageTitles.notes})},onRequestVisit:function(){var e=v[0];r.push("/".concat(e,"/medical-visit"),{patientId:e,titlePage:I.pageTitles.medical_visit})}}),i.a.createElement(it.a,null,i.a.createElement(ct.a,{className:c.table,"aria-labelledby":"tableTitle",size:x?"small":"medium","aria-label":"enhanced table"},i.a.createElement(Ji,{classes:c,numSelected:v.length,order:s,orderBy:p,onSelectAllClick:function(e){if(e.target.checked){var a=t.map((function(e){return e.uid}));E(a)}else E([])},onRequestSort:function(e,t){u(p===t&&"asc"===s?"desc":"asc"),b(t)},rowCount:t.length,headCells:a}),i.a.createElement(lt.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return Ki(e,a,t)}:function(e,a){return-Ki(e,a,t)}}(s,p)).map((function(e,t){var a,n=(a=e.uid,-1!==v.indexOf(a)),c="enhanced-table-checkbox-".concat(t);return i.a.createElement(Qe.a,{hover:!0,tabIndex:-1,key:e.uid,selected:n},i.a.createElement($e.a,{padding:"checkbox"},i.a.createElement(pe.a,{onClick:function(t){return function(e,t){var a=v.indexOf(t),n=[];-1===a?n=n.concat(v,t):0===a?n=n.concat(v.slice(1)):a===v.length-1?n=n.concat(v.slice(0,-1)):a>0&&(n=n.concat(v.slice(0,a),v.slice(a+1))),E(n)}(0,e.uid)},checked:n,inputProps:{"aria-labelledby":c},color:"primary"})),i.a.createElement($e.a,{align:"left"},e.name),i.a.createElement($e.a,{align:"left"},e.surname),i.a.createElement($e.a,{align:"right"},e.therapyStartDate),i.a.createElement($e.a,{align:"right"},e.therapyEndDate),i.a.createElement($e.a,{align:"right"},i.a.createElement(Y.a,{onClick:function(t){return a=e.uid,void r.push("/".concat(a,"/patient-details"),{patientId:a,titlePage:I.pageTitles.details_patient});var a},size:"small"},i.a.createElement(bn.a,{fontSize:"small"}))))})),S>0&&i.a.createElement(Qe.a,{style:{height:(x?33:53)*S}},i.a.createElement($e.a,{colSpan:6}))))))))}Object(re.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2),borderRadius:24,padding:e.spacing(3)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));Object(re.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.primary.main,backgroundColor:Object(Ue.e)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.primary.dark},title:{flex:"1 1 100%"}}}));var tc=[{path:"/login",component:function(e){var t=e.history,a=A().login,n=Object(r.useState)(!1),c=Object(f.a)(n,2),o=c[0],s=c[1],m=Object(r.useState)(""),b=Object(f.a)(m,2),g=b[0],h=b[1],v=be(),E=function(){var e=Object(p.a)(d.a.mark((function e(n){var r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=new FormData(n.currentTarget),i=r.get("password").toString(),c=r.get("email").toString(),0!==i.length){e.next=6;break}return e.abrupt("return",h("Password missing"));case 6:if(0!==c.length){e.next=8;break}return e.abrupt("return",h("Email is missing"));case 8:return e.prev=8,s(!0),h(""),e.next=13,a(c,i,j);case 13:s(!1),t.push("/"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),h(e.t0.message),s(!1);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}(),O=i.a.useState(!0),y=Object(f.a)(O,2),j=y[0],k=y[1],_=Object(r.useState)(!1),x=Object(f.a)(_,2),w=x[0],C=x[1];return i.a.createElement(ie.a,{theme:fe},i.a.createElement(M.a,{component:"main",maxWidth:"xs"},i.a.createElement(V.a,{className:v.backdrop,open:o},i.a.createElement(G.a,{color:"inherit"})),i.a.createElement(H.a,null),i.a.createElement(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement(Q.a,{alt:"osp",src:"/aovr.png",className:v.mainLogo}),i.a.createElement(F.a,{component:"h1",variant:"h5"},I.account.sign_in),i.a.createElement($.a,{item:!0,xs:12,className:v.errorAlert},g&&i.a.createElement(ce.a,{severity:"error"},i.a.createElement(oe.a,null,I.general.error),g)),i.a.createElement(U.a,{component:"form",onSubmit:E,noValidate:!0,sx:{mt:1}},i.a.createElement(K.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:I.patient.email,name:"email",autoComplete:"email",autoFocus:!0,variant:"outlined"}),i.a.createElement(K.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:I.account.password,type:w?"text":"password",id:"password",autoComplete:"current-password",variant:"outlined",InputProps:{endAdornment:i.a.createElement(J.a,{position:"end"},i.a.createElement(Y.a,{"aria-label":"toggle password visibility",onClick:function(){return C((function(e){return!e}))},onMouseDown:function(e){return e.preventDefault()}},w?i.a.createElement(ee.a,null):i.a.createElement(ae.a,null)))}}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{color:"primary",checked:j,onChange:function(){return k((function(e){return!e}))}}),label:I.account.remember_me}),i.a.createElement(X.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:o,color:"primary"},I.account.sign_in),i.a.createElement($.a,{container:!0,justifyContent:"space-between",spacing:1},i.a.createElement($.a,{item:!0},i.a.createElement(l.b,{to:function(e){return Object(u.a)(Object(u.a)({},e),{},{pathname:"/signup"})},variant:"body2"},"".concat(I.account.no_account," ").concat(I.account.sign_up))),i.a.createElement($.a,{item:!0},i.a.createElement(l.b,{to:function(e){return Object(u.a)(Object(u.a)({},e),{},{pathname:"/forgot-password"})},variant:"body2"},I.account.forgot_password)))))))}},{path:"/signup",component:function(e){var t=e.history,a=Object(r.useState)(""),n=Object(f.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(!1),m=Object(f.a)(s,2),b=m[0],g=m[1],h=A().signup,v=se(),E=function(){var e=Object(p.a)(d.a.mark((function e(a){var n,r,i,c,l,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=new FormData(a.currentTarget),r=n.get("email"),i=n.get("password"),c=n.get("confirmPassword"),l=n.get("firstName"),s=n.get("lastName"),o((function(){return""})),0!==l.toString().trim().length&&0!==s.toString().trim().length){e.next=10;break}return e.abrupt("return",o("Insert your First Name and Last Name."));case 10:if(c===i){e.next=12;break}return e.abrupt("return",o("Passwords do not match."));case 12:return g(!0),e.prev=13,e.next=16,h(r.toString(),i.toString(),{firstname:l.toString(),lastname:s.toString()});case 16:g(!1),t.push("/"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(13),g(!1),o(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(t){return e.apply(this,arguments)}}(),O=Object(r.useState)(!1),y=Object(f.a)(O,2),j=y[0],k=y[1],_=function(){return k((function(e){return!e}))},x=function(e){return e.preventDefault()};return i.a.createElement(ie.a,{theme:le},i.a.createElement(M.a,{component:"main",maxWidth:"xs"},i.a.createElement(V.a,{className:v.backdrop,open:b},i.a.createElement(G.a,{color:"inherit"})),i.a.createElement(H.a,null),i.a.createElement(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement(Q.a,{alt:"osp",src:"/aovr.png",className:v.mainLogo}),i.a.createElement(F.a,{component:"h1",variant:"h5"},I.account.sign_up),i.a.createElement(U.a,{component:"form",noValidate:!0,onSubmit:E,sx:{mt:3}},i.a.createElement($.a,{container:!0,spacing:2},i.a.createElement($.a,{item:!0,xs:12,className:v.errorAlert},c&&i.a.createElement(ce.a,{severity:"error"},i.a.createElement(oe.a,null,I.general.error),c)),i.a.createElement($.a,{item:!0,xs:12,sm:6},i.a.createElement(K.a,{autoComplete:"fname",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:I.patient.first_name,autoFocus:!0,type:"text",variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12,sm:6},i.a.createElement(K.a,{required:!0,fullWidth:!0,id:"lastName",label:I.patient.last_name,name:"lastName",autoComplete:"lname",type:"text",variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(K.a,{required:!0,fullWidth:!0,id:"email",label:I.patient.email,name:"email",autoComplete:"email",variant:"outlined"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(K.a,{required:!0,fullWidth:!0,name:"password",label:I.account.password,type:j?"text":"password",id:"password",autoComplete:"new-password",variant:"outlined",InputProps:{endAdornment:i.a.createElement(J.a,{position:"end"},i.a.createElement(Y.a,{"aria-label":"toggle password visibility",onClick:_,onMouseDown:x},j?i.a.createElement(ee.a,null):i.a.createElement(ae.a,null)))}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(K.a,{required:!0,fullWidth:!0,name:"confirmPassword",label:I.account.confirm_password,type:j?"text":"password",id:"confirm-password",autoComplete:"new-password",variant:"outlined",InputProps:{endAdornment:i.a.createElement(J.a,{position:"end"},i.a.createElement(Y.a,{"aria-label":"toggle password visibility",onClick:_,onMouseDown:x},j?i.a.createElement(ee.a,null):i.a.createElement(ae.a,null)))}})),i.a.createElement($.a,{item:!0,xs:12})),i.a.createElement(X.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:b,color:"primary"},I.account.sign_up),i.a.createElement($.a,{container:!0,justifyContent:"space-between",spacing:1},i.a.createElement($.a,{item:!0},i.a.createElement(l.b,{to:function(e){return Object(u.a)(Object(u.a)({},e),{},{pathname:"/login"})},variant:"body2"},"".concat(I.account.have_account," ").concat(I.account.sign_in))),i.a.createElement($.a,{item:!0},i.a.createElement(l.b,{to:function(e){return Object(u.a)(Object(u.a)({},e),{},{pathname:"/forgot-password"})},variant:"body2"},I.account.forgot_password)))))))}},{path:"/forgot-password",component:function(e){var t=Object(r.useState)(""),a=Object(f.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(!1),s=Object(f.a)(o,2),m=s[0],b=s[1],g=Object(r.useState)(""),h=Object(f.a)(g,2),v=h[0],E=h[1],O=A().resetPassword,y=Mn(),j=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=new FormData(t.currentTarget),n=a.get("email"),r=a.get("confirm-email"),n===r){e.next=6;break}return e.abrupt("return",c("Emails do not much"));case 6:return c(""),E(""),b(!0),e.prev=9,e.next=12,O(n);case 12:E("Check your inbox for further instructions"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),c(e.t0.message);case 18:b(!1);case 19:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(ie.a,{theme:Bn},i.a.createElement(M.a,{component:"main",maxWidth:"xs"},i.a.createElement(V.a,{className:y.backdrop,open:m},i.a.createElement(G.a,{color:"inherit"})),i.a.createElement(H.a,null),i.a.createElement(U.a,{className:y.paper},i.a.createElement(Q.a,{alt:"osp",src:"/aovr.png",className:y.mainLogo}),i.a.createElement(F.a,{component:"h1",variant:"h5"},"".concat(I.account.reset," ").concat(I.account.password)),i.a.createElement($.a,{item:!0,xs:12,className:y.errorAlert},n&&i.a.createElement(ce.a,{severity:"error"},i.a.createElement(oe.a,null,I.general.error),n),v&&i.a.createElement(ce.a,{severity:"success"},i.a.createElement(oe.a,null,I.general.done),v)),i.a.createElement(U.a,{component:"form",onSubmit:j,noValidate:!0,sx:{mt:1}},i.a.createElement(K.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:I.patient.email,name:"email",autoComplete:"email",autoFocus:!0,variant:"outlined"}),i.a.createElement(K.a,{margin:"normal",required:!0,fullWidth:!0,name:"confirm-email",label:I.account.confirm_email,type:"email",id:"confirm-email",variant:"outlined"}),i.a.createElement(X.a,{type:"submit",fullWidth:!0,variant:"contained",disabled:m,color:"primary"},I.account.reset),i.a.createElement($.a,{container:!0,justifyContent:"space-between",spacing:1},i.a.createElement($.a,{item:!0},i.a.createElement(l.b,{to:function(e){return Object(u.a)(Object(u.a)({},e),{},{pathname:"/login"})},variant:"body2"},I.account.sign_in)),i.a.createElement($.a,{item:!0},i.a.createElement(l.b,{to:function(e){return Object(u.a)(Object(u.a)({},e),{},{pathname:"/signup"})},variant:"body2"},"".concat(I.account.no_account," ").concat(I.account.sign_up))))))))}}],ac=[{path:"/",component:function(e){var t=e.history,a=A(),n=a.getPatients,c=a.currentLanguage,o=Object(r.useCallback)((function(){return n()}),[n]),l=Object(r.useState)({patients:[],filtered:[],backdrop:!1}),s=Object(f.a)(l,2),m=s[0],b=s[1],g=Object(r.useRef)(null);Object(r.useEffect)((function(){return g.current=!0,function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.current&&b((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.next=4,o();case 4:if(!(a=e.sent).empty){e.next=7;break}return e.abrupt("return");case 7:n=a.docs.map((function(e){var a=e.data(),n=a.createdAt,r=Object(u.a)({},a);"string"===typeof n?r=Object(u.a)(Object(u.a)({},r),{},{createdAt:new Date(n).toLocaleString(t)}):n instanceof h.a&&(r=Object(u.a)(Object(u.a)({},r),{},{createdAt:n.toDate().toLocaleString(t)})),void 0===a.status&&(r=Object(u.a)(Object(u.a)({},r),{},{status:"green"}));var i=r.therapyStartDate;"string"===typeof i?r=Object(u.a)(Object(u.a)({},r),{},{therapyStartDate:new Date(i).toLocaleDateString(t)}):i instanceof h.a&&(r=Object(u.a)(Object(u.a)({},r),{},{therapyStartDate:i.toDate().toLocaleDateString(t)}));var c=r.therapyEndDate;return"string"===typeof c?r=Object(u.a)(Object(u.a)({},r),{},{therapyEndDate:new Date(c).toLocaleDateString(t)}):c instanceof h.a&&(r=Object(u.a)(Object(u.a)({},r),{},{therapyEndDate:c.toDate().toLocaleDateString(t)})),Object(u.a)(Object(u.a)({},r),{},{uid:e.id})})).filter((function(e){return!("boolean"===typeof e.controlGroup&&e.controlGroup)})),g.current&&b((function(e){return Object(u.a)(Object(u.a)({},e),{},{patients:n,filtered:n,backdrop:!1})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),g.current&&b((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()(c),function(){return g.current=!1}}),[o,c]);var v=A(),E=v.setPatientDroppedOut,O=v.updatePatientStatus,y=v.recoverDroppedPatient,j=i.a.useCallback((function(e){return E(e)}),[E]),k=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t);case 3:b((function(e){var a=e.patients.map((function(e){return e.uid===t?Object(u.a)(Object(u.a)({},e),{},{dropped:!0,droppedAt:h.a.now()}):e}));return Object(u.a)(Object(u.a)({},e),{},{patients:a,filtered:a})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(t,"green");case 3:b((function(e){var a=e.patients.map((function(e){return e.uid===t?Object(u.a)(Object(u.a)({},e),{},{status:"green"}):e}));return Object(u.a)(Object(u.a)({},e),{},{patients:a,filtered:a})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t);case 3:b((function(e){var a=e.patients.map((function(e){return e.uid===t?Object(u.a)(Object(u.a)({},e),{},{dropped:!1}):e}));return Object(u.a)(Object(u.a)({},e),{},{patients:a,filtered:a})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),w=yn(),C=m.filtered,P=m.backdrop,S=C.map((function(e){return function(e,t,a,n,r,i,c,o){return{uid:e,name:t,surname:a,therapyStartDate:n,therapyEndDate:r,status:i,dropped:c,droppedAt:o}}(e.uid,e.name,e.surname,e.therapyStartDate,e.therapyEndDate,e.status,e.dropped,e.droppedAt)}));return P?i.a.createElement(V.a,{timeout:2e3,className:w.backdrop,open:P},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:"lg"},i.a.createElement($.a,{container:!0,spacing:1},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Dn,{classes:w,rows:S,headCells:[{id:"name",numeric:!1,disablePadding:!1,label:"Nome"},{id:"surname",numeric:!1,disablePadding:!1,label:"Cognome"},{id:"therapyStartDate",numeric:!0,disablePadding:!1,label:"Inizio"},{id:"therapyEndDate",numeric:!0,disablePadding:!1,label:"Fine"},{id:"dropped",numeric:!0,disablePadding:!1,label:"Dropped"},{id:"status",numeric:!0,disablePadding:!1,label:"Status"},{id:"seeMore",numeric:!0,disablePadding:!1,label:"See more"}],history:t,handleSearch:function(e){if(void 0===e||0===e.length)return b((function(e){return Object(u.a)(Object(u.a)({},e),{},{filtered:e.patients})}));b((function(t){return Object(u.a)(Object(u.a)({},t),{},{filtered:t.patients.filter((function(t){var a=t.name,n=t.surname;return a.includes(e)||n.includes(e)}))})}))},handleDropout:k,changePatientStatus:_,recoverDropped:x}))))},title:I.pageTitles.patients,description:"Lista dei pazienti sotto controllo"},{path:"/:patientId/medical-visit",component:function(e){var t=e.history,a=i.a.useState({visitId:"",visits:[],visitName:"",createdAt:"",errorVisitName:!1,nextUpdate:1,openBackdrop:!1,snackbar:{open:!1,message:"",severity:"error"},confirmDeletion:!1,open:!1,selectedVisit:""}),n=Object(f.a)(a,2),c=n[0],o=n[1],l=Object(s.g)().patientId,m=A(),b=m.getPatientVisits,g=m.createPatientVisit,v=(m.removePatientVisit,m.currentLanguage),E=m.modifyPatientVisit,O=m.deletePatientVisit,y=Object(r.useCallback)((function(e){return b(e)}),[b]),j=i.a.useRef(null);Object(r.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[i.a.createElement(Kn.a,null),i.a.createElement(Yn.a,null),i.a.createElement(Zn.a,null),i.a.createElement(tr.a,null),i.a.createElement(nr.a,null),i.a.createElement(ir.a,null)],j.current&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{openBackdrop:!0})})),r=[],e.prev=3,e.next=6,y(t);case 6:if(!(c=e.sent).empty){e.next=9;break}return e.abrupt("return",o((function(e){return Object(u.a)(Object(u.a)({},e),{},{openBackdrop:!1})})));case 9:c.docs.forEach((function(e,t){var a=Object(u.a)(Object(u.a)({},e.data()),{},{visitId:e.id}),i=a.createdAt;void 0!==i&&(a=Object(u.a)(Object(u.a)({},a),{},{createdAt:i.toDate().toISOString().split("T")[0]})),t<6&&(a=Object(u.a)(Object(u.a)({},a),{},{icon:n[t]})),r.push(a)})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),j.current&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{openBackdrop:!1,snackbar:{open:!0,message:"An error was thrown",severity:dr}})})),console.error(e.t0);case 16:j.current&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{visits:r,openBackdrop:!1,snackbar:{open:!0,message:"Dati recuperati correttamente",severity:pr}})}));case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}();return j.current=!0,void 0!==l&&e(l,v),function(){return j.current=!1}}),[l,c.nextUpdate,v,y]);var k=function(e,t){"clickaway"!==t&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:Object(u.a)(Object(u.a)({},e.snackbar),{},{open:!1})})}))},_=mr(),x=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c.selectedVisit,e.next=4,O(l,t);case 4:o((function(e){var t=e.visits,a=e.selectedVisit;return Object(u.a)(Object(u.a)({},e),{},{visits:t.filter((function(e,t){return e.visitId!==a})),visitName:"",createdAt:"",selectedVisit:""})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=c.visitName,a=c.createdAt,n=c.selectedVisit,r={visitName:t,createdAt:h.a.fromDate(new Date(a))},e.next=5,E(l,n,r);case 5:o((function(e){var t=e.visits,a=e.createdAt,n=e.visitName,r=e.selectedVisit;return t.forEach((function(e,t){e.visitId===r&&(e.createdAt=a,e.visitName=n)})),Object(u.a)(Object(u.a)({},e),{},{visits:t,visitName:"",createdAt:"",selectedVisit:""})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.visitName,a=c.visits,n=c.createdAt,0!==t.length&&0!==n.length){e.next=3;break}return e.abrupt("return",o((function(e){return Object(u.a)(Object(u.a)({},e),{},{errorVisitName:!0})})));case 3:return e.prev=3,r={visitName:t,createdAt:h.a.fromDate(new Date(n))},i=a[a.length-1],s={patient_age:null===i||void 0===i?void 0:i.patient_age,patient_occupation:null===i||void 0===i?void 0:i.patient_occupation,educational_qualification:null===i||void 0===i?void 0:i.educational_qualification,marital_status:null===i||void 0===i?void 0:i.marital_status,ethnicity:null===i||void 0===i?void 0:i.ethnicity,consent:null===i||void 0===i?void 0:i.consent,gender:null===i||void 0===i?void 0:i.gender,selection:null===i||void 0===i?void 0:i.selection,over:null===i||void 0===i?void 0:i.over,weight:null===i||void 0===i?void 0:i.weight,height:null===i||void 0===i?void 0:i.height,bmi:null===i||void 0===i?void 0:i.bmi,neck_circumference:null===i||void 0===i?void 0:i.neck_circumference,waist_circumference:null===i||void 0===i?void 0:i.waist_circumference,heart_tones:null===i||void 0===i?void 0:i.heart_tones,heart_murmur:null===i||void 0===i?void 0:i.heart_murmur,heart_rate:null===i||void 0===i?void 0:i.heart_rate,mv_chest:null===i||void 0===i?void 0:i.mv_chest,pathological_noises:null===i||void 0===i?void 0:i.pathological_noises,murphy_blumberg:null===i||void 0===i?void 0:i.murphy_blumberg,palpable_liver:null===i||void 0===i?void 0:i.palpable_liver,palpable_thyroid:null===i||void 0===i?void 0:i.palpable_thyroid,declining_edema:null===i||void 0===i?void 0:i.declining_edema,carotid_murmurs:null===i||void 0===i?void 0:i.carotid_murmurs,min_blood_pressure:null===i||void 0===i?void 0:i.min_blood_pressure,max_blood_pressure:null===i||void 0===i?void 0:i.max_blood_pressure,abdomen:null===i||void 0===i?void 0:i.abdomen,eating:null===i||void 0===i?void 0:i.eating,mood:null===i||void 0===i?void 0:i.mood,anxiety:null===i||void 0===i?void 0:i.anxiety,psychosis:null===i||void 0===i?void 0:i.psychosis,personality:null===i||void 0===i?void 0:i.personality,inprogress_pathologies:null===i||void 0===i?void 0:i.inprogress_pathologies,previous_pathologies:null===i||void 0===i?void 0:i.previous_pathologies,foods:null===i||void 0===i?void 0:i.foods,foods_text:null===i||void 0===i?void 0:i.foods_text,medications:null===i||void 0===i?void 0:i.medications,medications_text:null===i||void 0===i?void 0:i.medications_text},Object.keys(s).forEach((function(e){"undefined"!==typeof s[e]&&(r[e]=s[e])})),e.next=10,g(l,r);case 10:o((function(e){return Object(u.a)(Object(u.a)({},e),{},{nextUpdate:e.nextUpdate+1,visitName:"",createdAt:"",errorVisitName:!1,selectedVisit:""})})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}(),P=c.openBackdrop;if(P)return i.a.createElement(V.a,{className:_.backdrop,open:P},i.a.createElement(G.a,{color:"inherit"}));var N=c.visits,D=c.visitName,T=c.errorVisitName,z=c.snackbar;return i.a.createElement(M.a,{maxWidth:"lg"},i.a.createElement(ge.a,{className:_.paper,elevation:2},i.a.createElement($.a,{container:!0,spacing:2,justifyContent:"flex-start",direction:"row",alignItems:"center"},i.a.createElement(wt.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:z.open,onClose:k,autoHideDuration:5e3},i.a.createElement(ce.a,{severity:z.severity,onClose:k},i.a.createElement(oe.a,null,c.snackbar.message))),i.a.createElement(ur,{id:"confirm-deletion",keepMounted:!0,open:c.open,onClose:function(e){o(e?function(e){return Object(u.a)(Object(u.a)({},e),{},{confirmDeletion:!0,open:!1})}:function(e){return Object(u.a)(Object(u.a)({},e),{},{confirmDeletion:!1,open:!1})})}}),i.a.createElement($.a,{item:!0,xs:5},i.a.createElement(K.a,{id:"visitName",value:D,error:T,name:"visitName",label:I.visit.visit_name,variant:"outlined",fullWidth:!0,margin:"none",size:"small",onChange:function(e){var t=e.target;return o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))}})),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(K.a,{id:"visitDate",value:c.createdAt,name:"createdAt",label:"Data visita",variant:"outlined",fullWidth:!0,type:"date",margin:"none",size:"small",InputLabelProps:{shrink:!0},onChange:function(e){var t=e.target;o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))}})),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(nt.a,{size:"large",color:"primary",fullWidth:!0},i.a.createElement(X.a,{endIcon:i.a.createElement(Ft.a,null),onClick:C},"Nuova"),i.a.createElement(X.a,{endIcon:i.a.createElement(mt.a,null),onClick:w,disabled:""===c.selectedVisit},"Modifica"),i.a.createElement(X.a,{endIcon:i.a.createElement(Rt.a,null),onClick:x,disabled:""===c.selectedVisit},"Elimina"))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(je.a,{dense:!0},N.length?N.map((function(e,a){var n=e.visitId,r=e.visitName,s=(e.icon,Object(L.a)(e,sr)),m=c.selectedVisit===n;return i.a.createElement(ke.a,{key:n,button:!0,selected:m,onClick:function(e){return function(e,t){o((function(e){if(e.selectedVisit===t)return Object(u.a)(Object(u.a)({},e),{},{createdAt:"",visitName:"",selectedVisit:""});var a=e.visits.find((function(e,a){return t===e.visitId}));return void 0!==a?Object(u.a)(Object(u.a)({},e),{},{createdAt:a.createdAt,visitName:a.visitName,selectedVisit:t}):Object(u.a)(Object(u.a)({},e),{},{createdAt:"",visitName:"",selectedVisit:""})}))}(0,n)},dense:!0},i.a.createElement(Ee.a,null,i.a.createElement(Qn.a,null)),i.a.createElement(Oe.a,{primary:r,secondary:(null===s||void 0===s?void 0:s.createdAt)||""}),i.a.createElement(_e.a,null,i.a.createElement(Y.a,{edge:"end",onClick:function(){return function(e,a){t.push("/".concat(l,"/visit/").concat(e),{titlePage:a,patientId:l})}(n,r)}},i.a.createElement(or.a,null))))})):i.a.createElement(ke.a,null,i.a.createElement(Ee.a,null,i.a.createElement(Qn.a,null)),i.a.createElement(Oe.a,{primary:I.visit.no_visits})))))))},title:I.pageTitles.medical_visit,description:"Visita paziente"},{path:"/:patientId/nutritional-plan",component:function(){var e,t,a=Object(s.g)().patientId,n=Object(r.useRef)(null),c=Dt(),o=A(),l=o.getPatientNutritionalPlan,m=o.updatePatientNutritionalPlan,b=o.createPatientNutritionalPlan,g=o.newDocRef,v=o.getBackendFoods,E=o.getNutritionalPlanTemplates,O=function(){return x((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1})}))},y=function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,r,i,c,o,l,s,p,f,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.day,r=_.meal,i=_.checked_food,c=_.rows,o=_.template_uid,l=c.uid,s=c[n],p=i.map((function(e){return{food_id:e.food_id,food:e.food,quantity:e.quantity}})),f=Object(u.a)(Object(u.a)({templateId:o},c),{},(t={},Object(S.a)(t,n,Object(u.a)(Object(u.a)({},s),{},Object(S.a)({},r,p))),Object(S.a)(t,"modifiedAt",h.a.now()),t)),e.prev=5,void 0!==l){e.next=13;break}return v=g("patients/".concat(a,"/nutritional_plans")),f.uid=v.id,e.next=11,b(v,f);case 11:e.next=15;break;case 13:return e.next=15,m(f,a,l);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.error(e.t0);case 20:x((function(e){return Object(u.a)(Object(u.a)({},e),{},{messageNotification:"Aggiornato",openNotification:!0,open:!1,rows:f,nextUpdate:e.nextUpdate+1})}));case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}(),j=Object(r.useState)({messageNotification:"",openNotification:!1,checked_food:[],backdrop:!1,open:!1,checked:["0"],day:"mon",meal:"breakfast",foods:[],rows:{mon:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},tue:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},wed:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},thu:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},fri:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},sat:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},sun:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},uid:void 0},templates:[],template_uid:"",nextUpdate:0}),k=Object(f.a)(j,2),_=k[0],x=k[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(d.a.mark((function e(){var t,r,i,c,o,s,m,p,b,g,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.current&&x((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),(t=[]).push(E()),t.push(v()),t.push(l(a)),e.prev=5,e.next=8,Promise.all(t);case 8:r=e.sent,i=Object(f.a)(r,3),c=i[0],o=i[1].data,s=i[2],m=o.map((function(e){return{food_id:String(e.id),food:e.name,carbs:e.carbs,fats:e.fats,proteins:e.proteins,quantity:0}})),p=c.docs.map((function(e){var t=e.data(),a=e.id;return Object(u.a)(Object(u.a)({},t),{},{templateId:a,uid:void 0})})),b=!s.empty,g=s.docs.map((function(e){var t=e.data(),a=e.id;return Object(u.a)(Object(u.a)({},t),{},{uid:a})})),h=p[0],b&&(h=g[0]),n.current&&x((function(e){return Object(u.a)(Object(u.a)({},e),{},{foods:m,rows:h,template_uid:h.templateId,backdrop:!1,templates:p})})),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),console.error(e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[5,22]])})))).apply(this,arguments)}return n.current=!0,function(){e.apply(this,arguments)}(),function(){return n.current=!1}}),[_.nextUpdate]);var w=function(e){return function(t){var a=t.target,n=null===a||void 0===a?void 0:a.value,r=_.checked_food.map((function(t){return t.food_id==e?Object(u.a)(Object(u.a)({},t),{},{quantity:n}):t}));x((function(e){return Object(u.a)(Object(u.a)({},e),{},{checked_food:r})}))}};return i.a.createElement(M.a,{maxWidth:!1},i.a.createElement(V.a,{open:_.backdrop,className:c.backdrop},i.a.createElement(G.a,{color:"inherit"})),i.a.createElement(Pt,{message:_.messageNotification,close:function(){return x((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNotification:!1})}))},open:_.openNotification}),i.a.createElement($.a,{container:!0,spacing:2,justifyContent:"space-between"},i.a.createElement(Je.a,{maxWidth:"md",fullWidth:!0,onClose:O,"aria-labelledby":"customized-dialog-title",open:_.open,disableEscapeKeyDown:!0},i.a.createElement(At,{id:"customized-dialog-title",onClose:O},"Modifica piano nutrizionale"),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement($.a,{container:!0,spacing:2,direction:"row",justifyContent:"center",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(Xe.a,{className:c.formControl,fullWidth:!0},i.a.createElement(Ze.a,{id:"day-select-label"},"Giorni"),i.a.createElement(et.a,{fullWidth:!0,labelId:"day-select-label",id:"day-select",value:_.day,onChange:function(e){var t=e.target.value,a=_.meal,n=_.rows,r=_.foods,i=n[t][a],c=[];void 0!==i&&i.forEach((function(e){var t=r.find((function(t){return t.food_id==String(null===e||void 0===e?void 0:e.food_id)||t.food==(null===e||void 0===e?void 0:e.food)}));void 0!==t&&c.push(Object(u.a)(Object(u.a)({},t),{},{quantity:null===e||void 0===e?void 0:e.quantity}))})),x((function(e){return Object(u.a)(Object(u.a)({},e),{},{day:t,checked_food:c})}))}},yt.map((function(e,t){var a=e.id;return i.a.createElement(ve.a,{key:a,value:a},I.days[a])}))),i.a.createElement(tt.a,null,"1. Seleziona il giorno"))),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(Xe.a,{className:c.formControl,fullWidth:!0},i.a.createElement(Ze.a,{id:"select-meal-label"},I.meals.meals),i.a.createElement(et.a,{fullWidth:!0,labelId:"select-meal-label",id:"select-meal",value:_.meal,onChange:function(e){var t=e.target,a=null===t||void 0===t?void 0:t.value,n=_.day,r=_.rows,i=_.foods,c=r[n][a],o=[];void 0!==c&&c.forEach((function(e){var t=i.find((function(t){return t.food_id==String(null===e||void 0===e?void 0:e.food_id)||t.food==(null===e||void 0===e?void 0:e.food)}));void 0!==t&&o.push(Object(u.a)(Object(u.a)({},t),{},{quantity:null===e||void 0===e?void 0:e.quantity}))})),x((function(e){return Object(u.a)(Object(u.a)({},e),{},{meal:a,checked_food:o})}))}},Ot.map((function(e,t){var a=e.id;return i.a.createElement(ve.a,{key:a,value:a},I.meals[a])}))),i.a.createElement(tt.a,null,"2. Seleziona il pasto"))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(st.a,{multiple:!0,fullWidth:!0,value:_.checked_food,onChange:function(e,t,a){x((function(e){return Object(u.a)(Object(u.a)({},e),{},{checked_food:t})}))},size:"small",id:"checkboxes-foods",options:_.foods,disableCloseOnSelect:!0,getOptionSelected:function(e,t){return e.food_id===t.food_id&&e.food===t.food},getOptionLabel:function(e){return e.food},renderOption:function(e,t){var a=e.food,n=e.food_id,r=t.selected;return i.a.createElement(i.a.Fragment,{key:"food-key-".concat(n)},i.a.createElement(pe.a,{icon:i.a.createElement(ht.a,{fontSize:"small"}),checkedIcon:i.a.createElement(bt.a,{fontSize:"small"}),style:{marginRight:8},checked:r,id:"checkbox-id-".concat(n)}),a)},renderInput:function(e){return i.a.createElement(K.a,Object.assign({},e,{size:"small",label:"Food",helperText:"3. Add/Remove Food from the list"}))}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(je.a,{className:c.foods},null===(e=_.checked_food)||void 0===e?void 0:e.map((function(e,t){var a,n=e.food_id,r=e.food,c=e.quantity,o=e.fats,l=e.carbs,s=e.proteins;return i.a.createElement(ke.a,{key:r},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{checked:void 0!==_.checked_food.find((function(e){return e.food_id==n})),color:"primary",onChange:(a=n,function(){var e=_.checked_food,t=e.indexOf(e.find((function(e){return e.food_id==a}))),n=Object(He.a)(e);-1===t?n.push(a):n.splice(t,1),x((function(e){return Object(u.a)(Object(u.a)({},e),{},{checked_food:n})}))}),inputProps:{"aria-labelledby":"".concat(r)}})),i.a.createElement(Oe.a,{primary:r,secondary:"carbs ".concat(l,"g, fats ").concat(o,"g, prots ").concat(s,"g")}),i.a.createElement(_e.a,null,i.a.createElement(K.a,{label:"Quantity",variant:"outlined",size:"small",value:c,required:!0,type:"number",onChange:w(n),helperText:"grammi"})))})))))),i.a.createElement(at.a,null,i.a.createElement(nt.a,{size:"small",variant:"outlined"},i.a.createElement(X.a,{color:"secondary",startIcon:i.a.createElement(Nt.a,null),onClick:O},"Annulla"),i.a.createElement(X.a,{color:"primary",startIcon:i.a.createElement(Et.a,null),onClick:y},"Salva")))),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(Xe.a,{fullWidth:!0},i.a.createElement(Ze.a,{id:"plan-selection-id",variant:"outlined"},"Piano nutrizionale"),i.a.createElement(et.a,{labelId:"plan-selection-id",id:"plan-selection",variant:"outlined",fullWidth:!0,name:"template_uid",margin:"dense",label:"Piano nutrizionale",value:_.template_uid,onChange:function(e){var t=e.target,a=t.value;x((function(e){var n,r=e.templates,i=e.rows,c=r.find((function(e){return e.templateId===a}));return void 0!==c?Object(u.a)(Object(u.a)({},e),{},(n={},Object(S.a)(n,t.name,a),Object(S.a)(n,"rows",Object(u.a)(Object(u.a)({},c),{},{uid:i.uid})),n)):Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,a))}))}},null===(t=_.templates)||void 0===t?void 0:t.map((function(e){return i.a.createElement(ve.a,{value:e.templateId,key:e.templateId,dense:!0},i.a.createElement(Oe.a,{primary:e.name}))}))))),i.a.createElement($.a,{item:!0},i.a.createElement(rt.a,{title:"Modifica"},i.a.createElement(Y.a,{onClick:function(){var e=_.day,t=_.meal,a=_.rows,n=_.foods,r=a[e][t],i=[];r.forEach((function(e){var t=n.find((function(t){return t.food_id==String(e.food_id)||t.food==e.food}));void 0!==t&&i.push(Object(u.a)(Object(u.a)({},t),{},{quantity:e.quantity}))})),x((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!0,checked_food:i})}))}},i.a.createElement(mt.a,null)))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ge.a,{sx:{width:"100%",mb:2},elevation:3},i.a.createElement(it.a,null,i.a.createElement(ct.a,{"aria-label":"simple table"},i.a.createElement("caption",null,"Nota: aprire modifica piano in alto a destra e poi salvare."),i.a.createElement(ot.a,null,i.a.createElement(Qe.a,{className:c.headerTable},i.a.createElement(zt,null,I.meals.meals),yt.map((function(e,t){var a=e.id;return i.a.createElement(zt,{key:a,align:"left"},I.days[a])})))),i.a.createElement(lt.a,null,Ot.map((function(e,t){var a=e.id;return i.a.createElement(Tt,{key:a},i.a.createElement($e.a,{style:{fontWeight:"bold"}},I.meals[a]),yt.map((function(e){var t;return i.a.createElement($e.a,{key:e.id,padding:"none"},i.a.createElement("ol",{key:e.id},null===(t=_.rows[e.id][a])||void 0===t?void 0:t.map((function(e,t){var a=e.food,n=e.quantity;return"string"===typeof a&&a.length>0?i.a.createElement("li",{key:a},"".concat(a," (").concat(n,"g)")):null}))))})))})))))))))},title:I.pageTitles.nutritional_plan,description:"Piano nutrizionale raccomandato dal dottore"},{path:"/templates-nutritional-plan",component:function(){var e,t,a=Object(r.useRef)(null),n=Gt(),c=A(),o=c.updateNutritionalPlanTemplate,l=c.createNutritionalPlanTemplate,s=c.deleteNutritionalPlanTemplate,m=c.newDocRef,b=c.getBackendFoods,g=c.getNutritionalPlanTemplates,v=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.template,e.prev=1,e.next=4,s(t);case 4:_((function(e){return Object(u.a)(Object(u.a)({},e),{},{nextUpdate:e.nextUpdate+1,template:""})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){return _((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1})}))},O=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,i,c,s,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k.day,a=k.meal,n=k.checked_food,r=k.rows,i=r.uid,c=r[t],s=n.map((function(e){return{food_id:e.food_id,food:e.food,quantity:e.quantity}})),p=Object(u.a)(Object(u.a)({},r),{},Object(S.a)({},t,Object(u.a)(Object(u.a)({},c),{},Object(S.a)({},a,s)))),e.prev=5,void 0!==i){e.next=13;break}return f=m("templates_nutritional_plan"),p.uid=f.id,e.next=11,l(f,p);case 11:e.next=15;break;case 13:return e.next=15,o(p,i);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.error(e.t0);case 20:_((function(e){return Object(u.a)(Object(u.a)({},e),{},{messageNotification:"Aggiornato",openNotification:!0,open:!1,nextUpdate:e.nextUpdate+1})}));case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}(),y=Object(r.useState)({messageNotification:"",openNotification:!1,checked_food:[],backdrop:!1,open:!1,checked:["0"],day:"mon",meal:"breakfast",foods:[],rows:{mon:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},tue:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},wed:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},thu:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},fri:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},sat:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},sun:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},uid:void 0},emptyPlan:{mon:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},tue:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},wed:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},thu:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},fri:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},sat:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},sun:{breakfast:[{food:"",quantity:0}],morning_break:[{food:"",quantity:0}],lunch:[{food:"",quantity:0}],afternoon_break:[{food:"",quantity:0}],dinner:[{food:"",quantity:0}]},uid:void 0,name:"",description:""},name_templates:[{uid:"",name:""}],new_name_template:"",templates:[],template:"",openNewTemplateDialog:!1,nextUpdate:1,isNewTemplate:!1}),j=Object(f.a)(y,2),k=j[0],_=j[1],x=function(){_((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNewTemplateDialog:!1})}))},w=function(e){return function(t){var a=t.target,n=null===a||void 0===a?void 0:a.value,r=k.checked_food.map((function(t){return t.food_id==e?Object(u.a)(Object(u.a)({},t),{},{quantity:n}):t}));_((function(e){return Object(u.a)(Object(u.a)({},e),{},{checked_food:r})}))}};return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(d.a.mark((function e(){var t,n,r,i,c,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current&&_((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),t=[],e.prev=2,t.push(b()),t.push(g()),e.next=7,Promise.all(t);case 7:n=e.sent,r=Object(f.a)(n,2),i=r[0].data,c=r[1],o=i.map((function(e){var t=String(e.id),a=e.name;return Object(u.a)(Object(u.a)({},e),{},{food_id:t,food:a,quantity:0})})),l=c.docs.map((function(e){var t=e.data(),a=e.id;return Object(u.a)(Object(u.a)({},t),{},{uid:a})})),a.current&&_((function(e){var t=e.rows,a=t.uid,n=null;if(void 0===a)n=Object(u.a)(Object(u.a)({},t),l[0]);else{var r=l.find((function(e){return a===e.uid}));n=Object(u.a)(Object(u.a)({},t),r),console.debug(n.uid)}return Object(u.a)(Object(u.a)({},e),{},{foods:o,rows:n,backdrop:!1,templates:l,template:n.uid})})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}return a.current=!0,function(){e.apply(this,arguments)}(),function(){return a.current=!1}}),[k.nextUpdate]),i.a.createElement(M.a,{maxWidth:!1},i.a.createElement(V.a,{open:k.backdrop,className:n.backdrop},i.a.createElement(G.a,{color:"inherit"})),i.a.createElement(Pt,{message:k.messageNotification,close:function(){return _((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNotification:!1})}))},open:k.openNotification}),i.a.createElement($.a,{container:!0,spacing:2,justifyContent:"space-between"},i.a.createElement(Je.a,{maxWidth:"md",fullWidth:!0,onClose:E,"aria-labelledby":"customized-dialog-title",open:k.open,disableEscapeKeyDown:!0},i.a.createElement($t,{id:"customized-dialog-title",onClose:E},"Modifica piano nutrizionale"),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement($.a,{container:!0,spacing:2,direction:"row",justifyContent:"center",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(K.a,{id:"name-nutritional-plan",name:"name_nutritional_plan",value:k.rows.name,type:"text",fullWidth:!0,onChange:function(e){var t=e.target.value;_((function(e){var a=e.rows;return a.name=t,Object(u.a)(Object(u.a)({},e),{},{rows:a})}))}})),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(Xe.a,{className:n.formControl,fullWidth:!0},i.a.createElement(Ze.a,{id:"day-select-label"},"Giorni"),i.a.createElement(et.a,{fullWidth:!0,labelId:"day-select-label",id:"day-select",value:k.day,onChange:function(e){var t=e.target.value,a=k.meal,n=k.rows,r=k.foods,i=n[t][a],c=[];void 0!==i&&i.forEach((function(e){var t=r.find((function(t){return t.food_id==String(null===e||void 0===e?void 0:e.food_id)||t.food==(null===e||void 0===e?void 0:e.food)}));void 0!==t&&c.push(Object(u.a)(Object(u.a)({},t),{},{quantity:null===e||void 0===e?void 0:e.quantity}))})),_((function(e){return Object(u.a)(Object(u.a)({},e),{},{day:t,checked_food:c})}))}},yt.map((function(e,t){var a=e.id;return i.a.createElement(ve.a,{key:a,value:a},I.days[a])}))),i.a.createElement(tt.a,null,"1. Seleziona il giorno"))),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(Xe.a,{className:n.formControl,fullWidth:!0},i.a.createElement(Ze.a,{id:"select-meal-label"},I.meals.meals),i.a.createElement(et.a,{fullWidth:!0,labelId:"select-meal-label",id:"select-meal",value:k.meal,onChange:function(e){var t=e.target,a=null===t||void 0===t?void 0:t.value,n=k.day,r=k.rows,i=k.foods,c=r[n][a],o=[];void 0!==c&&c.forEach((function(e){var t=i.find((function(t){return t.food_id==String(null===e||void 0===e?void 0:e.food_id)||t.food==(null===e||void 0===e?void 0:e.food)}));void 0!==t&&o.push(Object(u.a)(Object(u.a)({},t),{},{quantity:null===e||void 0===e?void 0:e.quantity}))})),_((function(e){return Object(u.a)(Object(u.a)({},e),{},{meal:a,checked_food:o})}))}},Ot.map((function(e,t){var a=e.id;return i.a.createElement(ve.a,{key:a,value:a},I.meals[a])}))),i.a.createElement(tt.a,null,"2. Seleziona il pasto"))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(st.a,{multiple:!0,fullWidth:!0,value:k.checked_food,onChange:function(e,t,a){_((function(e){return Object(u.a)(Object(u.a)({},e),{},{checked_food:t})}))},size:"small",id:"checkboxes-foods",options:k.foods,disableCloseOnSelect:!0,getOptionSelected:function(e,t){return e.food_id===t.food_id&&e.food===t.food},getOptionLabel:function(e){return e.food},renderOption:function(e,t){var a=e.food,n=e.food_id,r=t.selected;return i.a.createElement(i.a.Fragment,{key:"food-key-".concat(n)},i.a.createElement(pe.a,{icon:i.a.createElement(ht.a,{fontSize:"small"}),checkedIcon:i.a.createElement(bt.a,{fontSize:"small"}),style:{marginRight:8},checked:r,id:"checkbox-id-".concat(n)}),a)},renderInput:function(e){return i.a.createElement(K.a,Object.assign({},e,{size:"small",label:"Food",helperText:"3. Add/Remove Food from the list"}))}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(je.a,{className:n.foods},null===(e=k.checked_food)||void 0===e?void 0:e.map((function(e,t){var a,n=e.food_id,r=e.food,c=e.quantity,o=e.fats,l=e.carbs,s=e.proteins;return i.a.createElement(ke.a,{key:r},i.a.createElement(Ee.a,null,i.a.createElement(pe.a,{checked:void 0!==k.checked_food.find((function(e){return e.food_id==n})),color:"primary",onChange:(a=n,function(){var e=k.checked_food,t=e.indexOf(e.find((function(e){return e.food_id==a}))),n=Object(He.a)(e);-1===t?n.push(a):n.splice(t,1),_((function(e){return Object(u.a)(Object(u.a)({},e),{},{checked_food:n})}))}),inputProps:{"aria-labelledby":"".concat(r)}})),i.a.createElement(Oe.a,{primary:r,secondary:"carbs ".concat(l,"g, fats ").concat(o,"g, prots ").concat(s,"g")}),i.a.createElement(_e.a,null,i.a.createElement(K.a,{label:"Quantity",variant:"outlined",size:"small",value:c,required:!0,type:"number",onChange:w(n),helperText:"grammi"})))})))))),i.a.createElement(at.a,null,i.a.createElement(nt.a,{size:"small",variant:"outlined"},i.a.createElement(X.a,{color:"secondary",startIcon:i.a.createElement(Nt.a,null),onClick:E},"Annulla"),i.a.createElement(X.a,{color:"primary",startIcon:i.a.createElement(Et.a,null),onClick:O},"Salva")))),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(Xe.a,{fullWidth:!0},i.a.createElement(Ze.a,{id:"templates-selection",variant:"outlined"},"Piano nutrizionale"),i.a.createElement(et.a,{margin:"dense",variant:"outlined",fullWidth:!0,name:"template",label:"Piano nutrizionale",labelId:"templates-selection",value:k.template,onChange:function(e){var t=e.target.value;_((function(a){var n,r=a.templates.find((function(e){return e.uid===t}));return void 0!==r?Object(u.a)(Object(u.a)({},a),{},(n={},Object(S.a)(n,e.target.name,t),Object(S.a)(n,"rows",r),n)):Object(u.a)(Object(u.a)({},a),{},Object(S.a)({},e.target.name,t))}))}},null===(t=k.templates)||void 0===t?void 0:t.map((function(e){var t=e.name,a=e.uid;return i.a.createElement(ve.a,{value:a,key:a,dense:!0},i.a.createElement(Oe.a,{primary:t}))}))))),i.a.createElement($.a,{item:!0},i.a.createElement(rt.a,{title:"Crea una copia"},i.a.createElement(Y.a,{onClick:function(){_((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNewTemplateDialog:!0,isNewTemplate:!1})}))}},i.a.createElement(Mt.a,null))),i.a.createElement(rt.a,{title:"Crea nuovo"},i.a.createElement(Y.a,{onClick:function(){_((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNewTemplateDialog:!0,isNewTemplate:!0})}))}},i.a.createElement(Ft.a,null))),i.a.createElement(rt.a,{title:"Modifica"},i.a.createElement(Y.a,{onClick:function(){var e=k.day,t=k.meal,a=k.rows,n=k.foods,r=a[e][t],i=[];r.forEach((function(e){var t=n.find((function(t){return t.food_id==String(e.food_id)||t.food==e.food}));void 0!==t&&i.push(Object(u.a)(Object(u.a)({},t),{},{quantity:e.quantity}))})),_((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!0,checked_food:i})}))}},i.a.createElement(mt.a,null))),i.a.createElement(rt.a,{title:"Rimuovi"},i.a.createElement(Y.a,{onClick:v},i.a.createElement(Rt.a,null)))),i.a.createElement(Je.a,{open:k.openNewTemplateDialog,onClose:x,maxWidth:"xs",fullWidth:!0},i.a.createElement(Ke.a,null,k.isNewTemplate?"Crea nuovo":"Crea copia"),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(K.a,{id:"new-np-name",name:"new_name_template",label:"Nome piano nutrizionale",value:k.new_name_template,onChange:function(e){var t=e.target;return _((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))},type:"text",fullWidth:!0,variant:"outlined"})),i.a.createElement(at.a,null,i.a.createElement(X.a,{onClick:x,color:"secondary"},"Annulla"),i.a.createElement(X.a,{onClick:Object(p.a)(d.a.mark((function e(){var t,a,n,r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0,openNewTemplateDialog:!1})})),t=k.rows,a=k.new_name_template,n=k.isNewTemplate,r=k.emptyPlan,i=m("templates_nutritional_plan"),c=null,c=n?Object(u.a)(Object(u.a)({},r),{},{uid:i.id,name:a,createdAt:h.a.now(),description:""}):Object(u.a)(Object(u.a)({},t),{},{uid:i.id,name:a,createdAt:h.a.now(),description:""}),e.prev=5,e.next=8,l(i,c);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error(e.t0);case 13:_((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1,nextUpdate:e.nextUpdate+1})}));case 14:case"end":return e.stop()}}),e,null,[[5,10]])}))),color:"primary",disabled:0===k.new_name_template.length},"Crea"))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ge.a,{sx:{width:"100%",mb:2},elevation:3},i.a.createElement(it.a,null,i.a.createElement(ct.a,{"aria-label":"simple table"},i.a.createElement(ot.a,null,i.a.createElement(Qe.a,{className:n.headerTable},i.a.createElement(Ut,null,I.meals.meals),yt.map((function(e,t){var a=e.id;return i.a.createElement(Ut,{key:a,align:"left"},I.days[a])})))),i.a.createElement(lt.a,null,Ot.map((function(e,t){var a=e.id;return i.a.createElement(Ht,{key:a},i.a.createElement($e.a,{style:{fontWeight:"bold"}},I.meals[a]),yt.map((function(e){var t;return i.a.createElement($e.a,{key:e.id,padding:"none"},i.a.createElement("ol",{key:e.id},null===(t=k.rows[e.id][a])||void 0===t?void 0:t.map((function(e,t){var a=e.food,n=e.quantity;return"string"===typeof a&&a.length>0?i.a.createElement("li",{key:a},"".concat(a," (").concat(n,"g)")):null}))))})))})))))))))},title:I.pageTitles.nutritional_plans,description:"Piani nutrizionali"},{path:"/foods",component:function(e){var t=A(),a=t.getBackendFoods,n=t.updateFood,c=t.getFoodsAfter,o=t.getFoodsBefore,l=t.getFoodsWithLimit,s=t.searchFoodByName,m=Object(r.useCallback)((function(){return a()}),[a]),b=Object(r.useState)({foods:[],filteredFood:[],selectedFood:{},open:!1,docs:[],searchFood:""}),g=Object(f.a)(b,2),h=g[0],v=g[1],E=Object(r.useRef)(null);Object(r.useEffect)((function(){return E.current=!0,function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(25);case 3:(t=e.sent).empty||(a=t.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})})),v((function(e){return Object(u.a)(Object(u.a)({},e),{},{foods:a,filteredFood:a,docs:t.docs})}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()(),function(){return E.current=!1}}),[m]);var O=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,r,i,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}return a=h.foods,r=t.id,i={},c=a.map((function(e){return e.id===r?i=Object(u.a)(Object(u.a)({},e),t):e})),e.prev=5,o={calcium:parseFloat(i.calcium),chol:parseFloat(i.chol),carbs:parseFloat(i.carbs),energy:parseFloat(i.energy),fats:parseFloat(i.fats),proteins:parseFloat(i.proteins),name:i.name,id:i.id},e.next=9,n(i.uid,o);case 9:v((function(e){return Object(u.a)(Object(u.a)({},e),{},{foods:c,filteredFood:c,open:!1,selectedFood:i})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0);case 15:e.next=18;break;case 17:v((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1})}));case 18:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=h.docs,a=t[t.length-1],e.next=5,c(25,a);case 5:(n=e.sent).empty||(r=n.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})})),v((function(e){return Object(u.a)(Object(u.a)({},e),{},{foods:r,filteredFood:r,docs:n.docs})}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=h.docs,a=t[0],e.next=5,o(25,a);case 5:(n=e.sent).empty||(r=n.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})})),v((function(e){return Object(u.a)(Object(u.a)({},e),{},{foods:r,filteredFood:r,docs:n.docs})}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.searchFood,e.prev=1,e.next=4,s(t);case 4:(a=e.sent).empty||(n=a.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})})),v((function(e){return Object(u.a)(Object(u.a)({},e),{},{foods:n,filteredFood:n,searchFood:""})}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error();case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),_=h.filteredFood,x=h.open;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ea,{inputMeal:h.selectedFood,open:x,onClose:O}),i.a.createElement(M.a,{maxWidth:"lg"},i.a.createElement($.a,{container:!0,spacing:1},i.a.createElement($.a,{item:!0,xs:9},i.a.createElement(K.a,{fullWidth:!0,id:"search-food",name:"searchFood",label:"Nome pasto",onChange:function(e){var t=e.target,a=t.value;v((function(e){if(void 0===a||0===a.length)return Object(u.a)(Object(u.a)({},e),{},{filteredFood:e.foods});var n=e.foods,r=a.trim().toLowerCase(),i=n.filter((function(e){return e.name.trim().toLowerCase().includes(r)}));return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({foods:n,filteredFood:i},t.name,a))}))},variant:"outlined",color:"primary",size:"small",margin:"none",helperText:"Cerca pasto per nome"})),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(X.a,{fullWidth:!0,onClick:k,variant:"outlined"},"Search")),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(Yt,{foods:_,handleModifyDialog:function(e){v((function(t){var a=t.foods.find((function(t){return t.id===e}));return Object(u.a)(Object(u.a)({},t),{},{selectedFood:a,open:!0})}))}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(nt.a,{variant:"contained",color:"primary"},i.a.createElement(X.a,{onClick:j},"previous"),i.a.createElement(X.a,{onClick:y},"next"))))))},title:I.pageTitles.foods,description:"Pasti disponibili"},{path:"/workouts",component:function(e){var t=A().getWorkouts,a=Object(r.useState)({workouts:[]}),n=Object(f.a)(a,2),c=n[0],o=n[1],l=Object(r.useCallback)((function(){return t()}),[t]),s=Object(r.useRef)();Object(r.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:if(!(t=e.sent).empty){e.next=6;break}return e.abrupt("return");case 6:a=t.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})})),o((function(e){return Object(u.a)(Object(u.a)({},e),{},{workouts:a})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return s.current=!0,e(),function(){return s.current=!1}}),[l]);var m=c.workouts;return i.a.createElement(M.a,{maxWidth:"lg"},i.a.createElement($.a,{container:!0,spacing:1},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(aa,{workouts:m}))))},title:I.pageTitles.workouts,description:"Allenamenti disponibili"},{path:"/create-patient",component:pa,title:I.pageTitles.add_patient,description:"Registra nuovo paziente alla base di dati"},{path:"/statistics",component:function(){var e=i.a.useState({patients:[],openBackdrop:!1,statistics:{}}),t=Object(f.a)(e,2),a=t[0],n=t[1],r=A(),c=r.getPatients,o=(r.currentLanguage,r.getStatistics),l=i.a.useCallback((function(){return c()}),[c]),s=i.a.useCallback((function(){return o()}),[o]),m=i.a.useRef(null),b=ha();i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,r,i,c,o,p,b,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.current&&n((function(e){return Object(u.a)(Object(u.a)({},e),{},{openBackdrop:!0})})),t=[],e.prev=2,e.next=5,l();case 5:e.sent.docs.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id}))})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),m.current&&n((function(e){return Object(u.a)(Object(u.a)({},e),{},{openBackdrop:!1})})),console.error(e.t0);case 13:return a={eldest:[],lowest:[],tallest:[],youngest:[]},e.prev=14,e.next=17,s();case 17:r=e.sent,i=r.status,c=r.statusText,o=r.data,p=Object(f.a)(o.eldest,2),b=p[0].male,g=p[1].female,console.debug(i,c,b,g),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(14),console.error(e.t1);case 28:m.current&&n((function(e){return Object(u.a)(Object(u.a)({},e),{},{patients:t,openBackdrop:!1,statistics:a})}));case 29:case"end":return e.stop()}}),e,null,[[2,9],[14,25]])})));return function(){return e.apply(this,arguments)}}();return m.current=!0,e(),function(){return m.current=!1}}),[l]);var g=a.openBackdrop;return g?i.a.createElement(V.a,{className:b.backdrop,open:g,timeout:1e3},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(ge.a,{className:b.paper,elevation:2},i.a.createElement(M.a,{maxWidth:"md"},i.a.createElement($.a,{container:!0,spacing:3},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{variant:"h5",gutterBottom:!0,align:"center",color:"textSecondary"},"Statistiche pazienti")),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(fa.a,{className:b.card},i.a.createElement(ba.a,null,i.a.createElement(F.a,{variant:"caption"},"il paziente piu' vecchio")))),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(fa.a,{className:b.card},i.a.createElement(ba.a,null,i.a.createElement(F.a,{variant:"caption"},"il paziente piu' giovane")))),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(fa.a,{className:b.card},i.a.createElement(ba.a,null,i.a.createElement(F.a,{variant:"caption"},"il paziente piu' attivo")))),i.a.createElement($.a,{item:!0,xs:3},i.a.createElement(fa.a,{className:b.card},i.a.createElement(ba.a,null,i.a.createElement(F.a,{variant:"caption"},"il paziente meno attivo")))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ga.a,{data:{labels:["massima altezza","minima altezza"],datasets:[{label:"Donne",data:[5,3],borderWidth:1,borderColor:"rgba(255, 1, 1, 0.9)",backgroundColor:["rgba(75, 192, 192, 0.3)"]},{label:"Uomini",data:[4,2],borderWidth:1,borderColor:"rgba(255, 1, 1, 0.9)",backgroundColor:["rgba(153, 102, 255, 0.3)"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Altezza (cm)"}}}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ga.a,{data:{labels:["giovani","anziani"],datasets:[{label:"Donne",data:[8,4],borderWidth:1,borderColor:"rgba(255, 1, 1, 0.9)",backgroundColor:["rgba(75, 192, 192, 0.3)"]},{label:"Uomini",data:[7,3],borderWidth:1,borderColor:"rgba(255, 1, 1, 0.9)",backgroundColor:["rgba(153, 102, 255, 0.3)"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Eta'"}}}})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ga.a,{data:{labels:[""],datasets:[{label:"Donne",data:[8],borderWidth:1,borderColor:"rgba(255, 1, 1, 0.9)",backgroundColor:["rgba(75, 192, 192, 0.3)"]},{label:"Uomini",data:[3],borderWidth:1,borderColor:"rgba(255, 1, 1, 0.9)",backgroundColor:["rgba(153, 102, 255, 0.3)"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Peso (kg)"}}}})))))},title:I.pageTitles.patient_statistics,description:"Statistiche pazienti"},{path:"/:patientId/therapy-status",component:function(e){var t=Va(),a=i.a.useState(0),n=Object(f.a)(a,2),r=n[0],c=n[1],o=Object(s.g)().patientId;return i.a.createElement(ge.a,null,i.a.createElement("div",{className:t.root},i.a.createElement(va.a,{orientation:"vertical",variant:"scrollable",value:r,onChange:function(e,t){c(t)},"aria-label":"Vertical tabs example",className:t.tabs},i.a.createElement(Ea.a,Object.assign({label:I.general.graphs},Ma(0),{icon:i.a.createElement(Aa.a,null)})),i.a.createElement(Ea.a,Object.assign({label:I.general.tables},Ma(1),{icon:i.a.createElement(Fa.a,null)}))),i.a.createElement(Ba,{value:r,index:0},i.a.createElement(Ha,Object.assign({patientId:o},e))),i.a.createElement(Ba,{value:r,index:1},i.a.createElement(F.a,null,I.general.under_construction))))},title:I.pageTitles.therapy_status,description:"Status terapia"},{path:"/:patientId/notifications",component:en,title:I.pageTitles.notifications,description:"Notifiche"},{path:"/physical-exercises",component:function(e){var t,a,n=null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.patient,c=Object(r.useState)({workouts:[],patient_workouts:[],updateWorkouts:1}),o=Object(f.a)(c,2),l=o[0],s=o[1],m=A(),b=m.listWorkouts,g=m.updatePatientWorkouts,h=m.getPatient,v=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=l.patient_workouts,e.next=4,g({workouts:t},n);case 4:s((function(e){return Object(u.a)(Object(u.a)({},e),{},{updateWorkouts:e.updateWorkouts+1})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,r,i,c,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=[]).push(h(n),b()),e.prev=2,e.next=5,Promise.all(t);case 5:a=e.sent,r=Object(f.a)(a,2),i=r[0],c=r[1],o=i.data().workouts||[],l=c.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})})),E.current&&s((function(e){return Object(u.a)(Object(u.a)({},e),{},{workouts:l,patient_workouts:o})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return E.current=!0,e(),function(){return E.current=!1}}),[n,l.updateWorkouts]),i.a.createElement(M.a,{maxWidth:"lg",id:"wrapper"},i.a.createElement(ie.a,{theme:Rn},i.a.createElement(ge.a,{elevation:3},i.a.createElement($.a,{spacing:2,container:!0,id:"container",justifyContent:"center",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:8},i.a.createElement(je.a,null,l.workouts&&l.workouts.map((function(e){var t=e.name,a=e.uid,n=e.id,r=e.difficulty,c=l.patient_workouts.find((function(e){return e.uid===a})),o=(null===c||void 0===c?void 0:c.from)||Ln.a.fromDate(new Date),m=(null===c||void 0===c?void 0:c.to)||Ln.a.fromDate(new Date);return i.a.createElement(ke.a,{key:a,id:n.toString(),divider:!0},i.a.createElement(Tn.a,null,i.a.createElement(Q.a,null,i.a.createElement(An.a,null))),i.a.createElement(Oe.a,{primary:"(".concat(r,") ").concat(t),secondary:"".concat(o.toDate().toLocaleString()," - ").concat(m.toDate().toLocaleString())}),i.a.createElement(_e.a,null,i.a.createElement(rt.a,{title:"Programma questo workout"},i.a.createElement(Y.a,null,i.a.createElement(Fn.a,null))),i.a.createElement(zn.a,{checked:-1!==l.patient_workouts.map((function(e){return e.id})).indexOf(n),onChange:function(e){return function(e,t){s((function(a){var n=a.workouts,r=a.patient_workouts;if(e){var i=n.find((function(e){return e.uid===t}));r.push(Object(u.a)(Object(u.a)({},i),{},{from:Ln.a.fromDate(new Date),to:Ln.a.fromDate(new Date)}))}else{var c=r.map((function(e){return e.uid})).indexOf(t);-1!==c&&r.splice(c,1)}return Object(u.a)(Object(u.a)({},a),{},{patient_workouts:r})}))}(e.target.checked,a)}})))})))),i.a.createElement($.a,{item:!0,xs:8,style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(X.a,{onClick:v,variant:"contained",color:"primary",endIcon:i.a.createElement(Et.a,null)},"Salva"))))))},title:I.pageTitles.physical_exercises,description:"Allenamenti del paziente"},{path:"/profile",component:function(){var e=i.a.useState({patients:[],backdropOpen:!1}),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Vn(),o=A().getPatients,l=Object(r.useCallback)((function(){return o()}),[o]),s=i.a.useRef(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.current&&n((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!0})})),e.next=4,l();case 4:t=e.sent,a=t.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})})),s.current&&n((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!1,patients:a})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),s.current&&n((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdropOpen:!1})}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return s.current=!0,e(),function(){return s.current=!1}}),[l]);var m=a.backdropOpen;if(m)return i.a.createElement(V.a,{className:c.backdrop,open:m},i.a.createElement(G.a,{color:"inherit"}));var b=a.patients;return i.a.createElement(M.a,null,i.a.createElement($.a,{container:!0,spacing:3,direction:"row",justifyContent:"flex-start",alignItems:"flex-start"},i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(ge.a,{elevation:3,variant:"elevation",style:{padding:12}},i.a.createElement(F.a,{variant:"h6",gutterBottom:!0,color:"textSecondary"},"Lista pazienti"),i.a.createElement(je.a,null,b.length?b.map((function(e){var t=e.name,a=e.surname,n=e.email,r=e.uid;return i.a.createElement(ke.a,{key:r},i.a.createElement(Oe.a,{primary:"".concat(a," ").concat(t),secondary:n}))})):i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:I.general.empty_list})))))))},title:I.account.profile,description:"Profilo dottore"},{path:"/update-profile",component:function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),o=Object(f.a)(c,2),l=o[0],s=o[1],m=Object(r.useState)(""),b=Object(f.a)(m,2),g=b[0],h=b[1],v=Object(r.useRef)(null),E=Object(r.useState)({displayName:"",email:""}),O=Object(f.a)(E,2),y=O[0],j=O[1],k=A(),_=k.currentUser,x=k.updateEmail,w=k.updatePassword,C=k.updateProfile,P=Hn();i.a.useEffect((function(){v.current=!0;return function(){var e=_.displayName,t=_.email;v.current&&j((function(a){return Object(u.a)(Object(u.a)({},a),{},{displayName:e,email:t})}))}(),function(){return v.current=!1}}),[_]);var S=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,r,i,c,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=new FormData(t.currentTarget),r=a.get("displayName"),i=a.get("email"),c=a.get("password"),o=a.get("confirm-password"),c===o){e.next=8;break}return e.abrupt("return",n("Passwords do not match"));case 8:n(""),h(""),s(!0),l=[],r.toString().length&&r.toString()!==y.displayName&&l.push(C({displayName:r})),i.toString()!==y.email&&i.toString().length&&l.push(x(i)),void 0!==c&&c.toString().length&&l.push(w(c)),Promise.all(l).then((function(){h("Your informations has been updated")})).catch((function(e){n((function(){return e.message}))})).finally((function(){return s((function(){return!1}))}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(ie.a,{theme:Gn},i.a.createElement(M.a,{component:"main",maxWidth:"xs"},i.a.createElement(V.a,{className:P.backdrop,open:l},i.a.createElement(G.a,{color:"inherit"})),i.a.createElement(H.a,null),i.a.createElement(U.a,{className:P.paper},i.a.createElement(Q.a,{sx:{m:1,bgcolor:"secondary.main"}},i.a.createElement(Se.a,null)),i.a.createElement(F.a,{component:"h1",variant:"h5"},I.account.modify_profile),i.a.createElement($.a,{item:!0,xs:12,className:P.errorAlert},a&&i.a.createElement(ce.a,{severity:"error"},i.a.createElement(oe.a,null,I.general.error),a),g&&i.a.createElement(ce.a,{severity:"success"},i.a.createElement(oe.a,null,I.general.done),g)),i.a.createElement(U.a,{component:"form",onSubmit:S,noValidate:!0,sx:{mt:1},className:P.innerBox},i.a.createElement(K.a,{margin:"normal",fullWidth:!0,id:"displayName",label:I.formatString(I.patient.full_name,I.patient.first_name,I.patient.last_name),name:"displayName",value:y.displayName,autoFocus:!0,type:"text",variant:"outlined",helperText:I.account.doctor}),i.a.createElement(K.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"email",value:y.email,variant:"outlined"}),i.a.createElement(K.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",variant:"outlined"}),i.a.createElement(K.a,{margin:"normal",required:!0,fullWidth:!0,name:"confirm-password",label:"Conferma password",type:"password",id:"confirm-password",variant:"outlined"}),i.a.createElement(X.a,{type:"submit",fullWidth:!0,variant:"contained",disabled:l,color:"primary"},"Modifica")))))},title:I.pageTitles.update_profile,description:"Aggiorna profilo dottore"},{path:"/:patientId/patient-details",component:function(){var e,t=Object(s.g)().patientId,a=ki(),n=Object(r.useState)({backdrop:!1,patient:{dateOfBirth:new Date,name:"",surname:"",gender:I.general.male,email:"",appointments:[]},refreshPage:1}),c=Object(f.a)(n,2),o=c[0],l=c[1],m=A(),b=m.getPatient,g=m.currentLanguage,v=i.a.useCallback((function(e){return b(e)}),[b]),E=i.a.useState(!1),O=Object(f.a)(E,2),y=O[0],j=O[1],k=function(e){return function(t,a){j(!!a&&e)}},_=Object(r.useRef)(null);i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r,i,c,o,s,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.current&&l((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),n=[],e.prev=2,e.next=5,v(t);case 5:r=e.sent,i=r.data(),c=r.id,o=I.general[i.gender],void 0!==i.appointments&&i.appointments.sort((function(e,t){return t.valueOf()-e.valueOf()})).forEach((function(e){n.push(e)})),s={appointments:n,email:i.email,gender:o,id:c,name:i.name,surname:i.surname,height:i.height,therapyEndDate:i.therapyEndDate,therapyStartDate:i.therapyStartDate},void 0!==(m=i.createdAt)&&("string"===typeof m?s.createdAt=new Date(m):m instanceof h.a&&(s.createdAt=m.toDate())),void 0!==(p=i.dateOfBirth)&&("string"===typeof p?s.dateOfBirth=new Date(p):p instanceof h.a&&(s.dateOfBirth=p.toDate())),_.current&&l((function(e){return Object(u.a)(Object(u.a)({},e),{},{patient:s,backdrop:!1})})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),_.current&&l((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})}));case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,a){return e.apply(this,arguments)}}();return _.current=!0,void 0!==t&&e(t,g),function(){return _.current=!1}}),[t,g,o.refreshPage,v]);var x=o.backdrop,w=o.patient;return x?i.a.createElement(V.a,{open:x,className:a.backdrop},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:"md"},i.a.createElement($.a,{container:!0,direction:"row",spacing:2},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(vi.a,{expanded:"panel1"===y,onChange:k("panel1")},i.a.createElement(Oi.a,{expandIcon:i.a.createElement(cn.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},i.a.createElement(F.a,{className:a.heading},"Anagrafica"),i.a.createElement(F.a,{className:a.secondaryHeading},"Dati personali")),i.a.createElement(Ei.a,null,i.a.createElement(je.a,{dense:!0},i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:"Nome Cognome",primary:"".concat(w.name," ").concat(w.surname)})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.patient.dateOfBirth,primary:w.dateOfBirth.toLocaleDateString(g)})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.patient.gender,primary:w.gender})))))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(vi.a,{expanded:"panel2"===y,onChange:k("panel2")},i.a.createElement(Oi.a,{expandIcon:i.a.createElement(cn.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},i.a.createElement(F.a,{className:a.heading},"Account"),i.a.createElement(F.a,{className:a.secondaryHeading},"Utenza digitale")),i.a.createElement(Ei.a,null,i.a.createElement(je.a,null,i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:"Data creazione",primary:null===(e=w.createdAt)||void 0===e?void 0:e.toLocaleDateString(g)})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:"E-mail",primary:w.email})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:"ID univoco paziente",primary:w.id})))))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(vi.a,{expanded:"panel3"===y,onChange:k("panel3")},i.a.createElement(Oi.a,{expandIcon:i.a.createElement(cn.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},i.a.createElement(F.a,{className:a.heading},"Appuntamenti"),i.a.createElement(F.a,{className:a.secondaryHeading},"Elenco di tutti gli appuntamenti (in ordine)")),i.a.createElement(Ei.a,{style:{flexDirection:"initial",flexWrap:"wrap"}},i.a.createElement($.a,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center"},i.a.createElement($.a,{item:!0},i.a.createElement(rt.a,{title:"Ricarica"},i.a.createElement(Y.a,{onClick:function(){return l((function(e){return Object(u.a)(Object(u.a)({},e),{},{refreshPage:e.refreshPage+1})}))}},i.a.createElement(hi.a,null)))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(je.a,{style:{width:"100%"},dense:!0},w.appointments.length?w.appointments.map((function(e,t){var a="appointment-key-".concat(t+1);if(e instanceof h.a){var n=h.a.now(),r=e.valueOf()<n.valueOf(),c=e.toDate().toLocaleString(g);return i.a.createElement(ke.a,{key:a,button:!0,dense:!0},i.a.createElement(Oe.a,{primary:c}),i.a.createElement(_e.a,null,r?i.a.createElement(We.a,null):i.a.createElement(ji.a,null)))}return i.a.createElement(ke.a,{key:a},i.a.createElement(Oe.a,{primary:"Wrong timestamp",secondary:"Timestamp is not instance of firebase Timestamp"}))})):i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:"Nessun appuntamento"}))))))))))},title:I.pageTitles.details_patient,description:"Dettagli paziente"},{path:"/export",component:function(){var e=i.a.useState({patients:[],backdrop:!1}),t=Object(f.a)(e,2),a=t[0],n=t[1],r=zi(),c=A(),o=c.getPatients,l=c.currentLanguage,s=i.a.useRef(null);return i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:a=e.sent,r=a.docs.map((function(e){var a=e.data(),n=a.dateOfBirth;n instanceof h.a&&(n=n.toDate().toLocaleDateString(t));var r=a.therapyStartDate;r instanceof h.a&&(r=r.toDate().toLocaleDateString(t));var i=a.therapyEndDate;return i instanceof h.a&&(i=i.toDate().toLocaleDateString(t)),Object(u.a)(Object(u.a)({},a),{},{uid:e.id,dateOfBirth:n,therapyStartDate:r,therapyEndDate:i})})),s.current&&n((function(e){return Object(u.a)(Object(u.a)({},e),{},{patients:r})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return s.current=!0,e(l),function(){return s.current=!1}}),[l]),a.backdrop?i.a.createElement(V.a,{timeout:1e3,className:r.backdrop,open:a.backdrop},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:!1},i.a.createElement($.a,{container:!0},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ge.a,{style:{width:"100%"}},i.a.createElement(Ti,null),i.a.createElement(it.a,null,i.a.createElement(ct.a,{"aria-label":"collapsible table"},i.a.createElement("caption",null,"Ulteriore descrizione su questa tabella."),i.a.createElement(ot.a,null,i.a.createElement(Qe.a,null,i.a.createElement($e.a,null),i.a.createElement($e.a,{style:{fontWeight:"bold"}},I.formatString(I.patient.full_name,I.patient.first_name,I.patient.last_name)),i.a.createElement($e.a,{align:"right",style:{fontWeight:"bold"}},I.patient.dateOfBirth),i.a.createElement($e.a,{align:"right",style:{fontWeight:"bold"}},I.therapy.start),i.a.createElement($e.a,{align:"right",style:{fontWeight:"bold"}},I.therapy.end),i.a.createElement($e.a,{align:"right",style:{fontWeight:"bold"}},I.patient.email),i.a.createElement($e.a,null))),i.a.createElement(lt.a,null,a.patients.map((function(e){return i.a.createElement(Ii,{key:e.uid,patient:e})})))))))))},title:I.pageTitles.export_data,description:"Esporta dati visite"},{path:"/visit-export",component:function(){var e,t=i.a.useState({patients:[],visits:[],header:["patient_id","visit_id","patient_age","gender","patient_occupation","educational_qualification","marital_status","ethnicity","consent","smoker","ex_smoker","alcoholic","use_laxatives","incontinence","snoring","insomnia","menopause","pregnancies","abortions","amount_cigarettes","alvo","menstrual_cycles","eating","mood","anxiety","psychosis","personality","weight","height","bmi","neck_circumference","waist_circumference","heart_tones","heart_murmur","heart_rate","mv_chest","pathological_noises","murphy_blumberg","palpable_liver","palpable_thyroid","declining_edema","carotid_murmurs","min_blood_pressure","max_blood_pressure","abdomen","waist_circumference_iliac_spine_height","waist_circumference_narrowest_point","hb","cholesterol","hdl","ldl","triglycerides","glycemia","glycated_hb","uric_acid","creatininemia","alt","ggt","tsh","exam_date","daily_energy_expenditure","tot_energy_expenditure","body_fat","lean_mass","body_water","yourselfDiets","proDiets","weightLoss","weightGain","heavyweight","weightMaintained","maximumWeightLoss","yearGetFat","monthsGetFat","diets","averageCalories","nutrients","alcoholCalories","grams_carbs","grams_lipidi","grams_prots","prandial_hyperphagia","compulsive_binge","plucking","emotional_eating","night_eating","selective_craving","createdAt","kcal_therapeutic_target","kcal_carb_target","kcal_lipids_target","kcal_prot_target","exercise_target","foods","foods_text","medications","medications_text","lifted_from_chair","gate_speed","walking_test_meters","walking_test_time","handgripMano","som","obs_comp","interp_sens","dep","anx","anger_host","phob","paran","psych","sleep","tot_tefq51","tot_orwell","restriz","disinibiz","fame","sint_fis","impatto_psisoc","bes_score","scl90_score","free_desc_psycho_test","scoreIpaq","active"],pats:[],isLoading:!1}),a=Object(f.a)(t,2),n=a[0],r=a[1],c=A(),o=c.exportPatientVisits,l=c.getPatients,s=i.a.useCallback((function(e,t){return o(e,t)}),[]),m=i.a.useRef(null);i.a.useEffect((function(){return m.current=!0,function(){return m.current=!1}}),[s,n.header,n.patients]);var b=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,r,i,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.patients,a=n.header,e.prev=1,e.next=4,s(t,a);case 4:r=e.sent,i=r.data,c="data:text/csv;charset=utf-8,",c+=a.join(";").concat("\n"),i.visits.forEach((function(e,t){a.forEach((function(t,a){c+=e[t],c+=";"})),c+="\n"})),(o=document.createElement("a")).setAttribute("href",encodeURI(c)),o.setAttribute("download","download.csv".toLowerCase()),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0})})),e.prev=1,e.next=4,l();case 4:t=e.sent,m.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,pats:t.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{uid:e.id})}))})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),m.current&&r((function(e){return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1})})),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return m.current=!0,e(),function(){return m.current=!1}}),[]);var g=function(e,t){var a=n.patients,i=a.indexOf(t),c=[];-1===i?c=c.concat(a,t):0===i?c=c.concat(a.slice(1)):i===a.length-1?c=c.concat(a.slice(0,-1)):i>0&&(c=c.concat(a.slice(0,i),a.slice(i+1))),r((function(e){return Object(u.a)(Object(u.a)({},e),{},{patients:c})}))},h=Li(),v=n.isLoading;return v?i.a.createElement(V.a,{timeout:1e3,className:h.backdrop,open:v},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:"md"},i.a.createElement($.a,{container:!0,justifyContent:"center",alignItems:"center"},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(F.a,{variant:"body1",align:"center"},"Esporta i dati delle visite mediche dei pazienti")),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(je.a,{dense:!0},null===(e=n.pats)||void 0===e?void 0:e.map((function(e,t){var a,r=(a=e.uid,-1!==n.patients.indexOf(a));return i.a.createElement(ke.a,{key:"".concat(t,"-list-item-key"),button:!0,onClick:function(t){return g(0,e.uid)}},i.a.createElement(Tn.a,null,i.a.createElement(Q.a,null,!0!==e.controlGroup?i.a.createElement(Fi.a,null):i.a.createElement(Ai.a,null))),i.a.createElement(Oe.a,{primary:"".concat(e.name," ").concat(e.surname),secondary:e.uid}),i.a.createElement(_e.a,null,i.a.createElement(pe.a,{checked:r,onClick:function(t){return g(0,e.uid)}})))})))),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(X.a,{variant:"outlined",fullWidth:!0,onClick:function(){return b()}},I.pageTitles.export_data))))},title:I.pageTitles.export_data,description:"Esporta dati"},{path:"/:patientId/notes",component:function(e){var t=Object(r.useState)({title:"",description:"",notes:[],open:!1}),a=Object(f.a)(t,2),n=a[0],c=a[1],o=Object(s.g)().patientId,l=A(),m=l.getPatientNotes,b=l.createPatientNote,g=l.deletePatientNote,v=Object(r.useCallback)((function(e){return m(e)}),[m]),E=Object(r.useCallback)((function(e,t){return b(e,t)}),[b]),O=Object(r.useCallback)((function(e,t){return g(e,t)}),[g]),y=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t);case 3:if(!(a=e.sent).empty){e.next=6;break}return e.abrupt("return");case 6:y.current&&c((function(e){return Object(u.a)(Object(u.a)({},e),{},{notes:a.docs.map((function(e){return Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})}))})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return y.current=!0,void 0!==o&&e(o),function(){return y.current=!1}}),[o,v]);var j=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.title,a=n.description,r={description:a,title:t,time:h.a.now()},e.prev=2,e.next=5,E(o,r);case 5:i=e.sent,c((function(e){var t=e.notes;return t.unshift(Object(u.a)(Object(u.a)({},r),{},{id:i.id})),Object(u.a)(Object(u.a)({},e),{},{notes:t,open:!1,title:"",description:""})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),c((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1})})),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),k=function(e){return Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O(o,e);case 3:c((function(t){return Object(u.a)(Object(u.a)({},t),{},{notes:t.notes.filter((function(t){return t.id!==e}))})})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))},_=function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!1,title:"",description:""})}))},x=function(e){var t=e.target;return c((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.value))}))};return i.a.createElement(M.a,{maxWidth:"md"},i.a.createElement($.a,{container:!0,spacing:3},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(X.a,{variant:"contained",startIcon:i.a.createElement(Ft.a,null),size:"large",color:"primary",onClick:function(){return c((function(e){return Object(u.a)(Object(u.a)({},e),{},{open:!0,description:"",title:""})}))}},"Nuova nota"),i.a.createElement(Je.a,{maxWidth:"xs",fullWidth:!0,open:n.open,onClose:_},i.a.createElement(Ke.a,null,"Nuova nota"),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(an.a,null,"Crea una nuova nota"),i.a.createElement(K.a,{onChange:x,value:n.title,name:"title",type:"text",fullWidth:!0,label:"Titolo",id:"title-note",variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{onChange:x,value:n.description,name:"description",type:"text",fullWidth:!0,id:"description-note",label:"Descrizione",multiline:!0,variant:"outlined",margin:"normal",maxRows:5,minRows:2})),i.a.createElement(at.a,null,i.a.createElement(X.a,{variant:"text",color:"secondary",onClick:_},"Annulla"),i.a.createElement(X.a,{variant:"contained",color:"primary",onClick:j},"Crea")))),n.notes.length?n.notes.map((function(e){return i.a.createElement($.a,{item:!0,xs:4,key:e.id},i.a.createElement(sn,{time:e.time,title:e.title,description:e.description,id:e.id,deleteRequest:k}))})):i.a.createElement($.a,{item:!0})))},title:I.pageTitles.notes,description:"Note del paziente"},{path:"/:patientId/visit/:visitId",component:function(){var e=Object(s.g)(),t=e.patientId,a=e.visitId,n=i.a.useState(0),r=Object(f.a)(n,2),c=r[0],o=r[1],l=i.a.useState({snackbar:!1,csvContent:"data:text/csv;charset=utf-8,"}),m=Object(f.a)(l,2),b=m[0],g=m[1],h=A().pullPatientVisitData,v=i.a.useCallback((function(e,t){return h(e,t)}),[h]),E=bi(),O=[I.visit.steps.data_patient,I.visit.steps.family_history,I.visit.steps.physiological_anamnesis,I.visit.steps.pathological_anamnesis,I.visit.steps.physical_examination,I.visit.steps.blood_chemistry,I.visit.steps.calculation_metabolism,I.visit.steps.bioimpedance,I.visit.steps.weight_history,I.visit.steps.food_anamnesis,I.visit.steps.eating_behavior,I.visit.steps.nutritional_plan,I.visit.steps.allergies,I.visit.steps.test_performance,I.visit.steps.test_psychometric],y=function(){o((function(e){var t=e+1;return t===O.length&&g((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:!0})})),t}))},j=function(){var e=Object(p.a)(d.a.mark((function e(){var n,r,i,c,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(a,t);case 3:if((n=e.sent).exists()){e.next=6;break}return e.abrupt("return");case 6:r=n.data(),i=[],c=[],Object.keys(r).forEach((function(e){var t=e.toLowerCase(),a=r[e];i.push(t),c.push(a)})),o=b.csvContent,o+=i.join(";").concat("\n"),o+=c.join(";").concat("\n"),(l=document.createElement("a")).setAttribute("href",encodeURI(o)),l.setAttribute("download","".concat(t,".csv").toLowerCase()),document.body.appendChild(l),l.click(),l.parentNode.removeChild(l),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),k=function(){o((function(e){var t=e-1;return t>=0?t:0}))},_=function(e,t){"clickaway"!==t&&g((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:!1})}))};return i.a.createElement("div",{className:E.root,id:"visit-wrapper-page"},i.a.createElement(ge.a,{className:E.paper},i.a.createElement(na.a,{nonLinear:!0,activeStep:c,className:E.stepper,alternativeLabel:!0},O.map((function(e,t){return i.a.createElement(ra.a,{key:e.toString().toLowerCase().trim()},i.a.createElement(br.a,{onClick:(a=t,function(){o(a)})},e));var a}))),c===O.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(wt.a,{id:"success-snackbar",key:"succcess-snackbar",autoHideDuration:5e3,TransitionComponent:fi,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:b.snackbar,onClose:_},i.a.createElement(ce.a,{onClose:_,severity:"success"},i.a.createElement(oe.a,null,"Dati recuperati correttamente"))),i.a.createElement($.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center"},i.a.createElement($.a,{item:!0,xs:2},i.a.createElement(X.a,{fullWidth:!0,startIcon:i.a.createElement(hr.a,null),onClick:j},I.pageTitles.export_data)))):function(e){switch(e){case 0:return i.a.createElement(Wr,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 1:return i.a.createElement(Pr,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 2:return i.a.createElement(qr,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 3:return i.a.createElement(Gr,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 4:return i.a.createElement(Ur,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 5:return i.a.createElement($r,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 6:return i.a.createElement(Jr,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 7:return i.a.createElement(Xr,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 8:return i.a.createElement(ti,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 9:return i.a.createElement(ni,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 10:return i.a.createElement(ii,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 11:return i.a.createElement(oi,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 12:return i.a.createElement(si,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 13:return i.a.createElement(ui,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});case 14:return i.a.createElement(di,{onClickBack:k,onClickNext:y,patient:t,pageName:O[e],visit:a});default:return null}}(c)))},title:I.pageTitles.medical_visit,description:"Visita medica"},{path:"/:patientId/modify-patient",component:function(){var e=Object(s.g)().patientId,t=A(),a=t.updatePatient,n=t.getPatient,c=t.getPatientProtected,o=i.a.useCallback((function(e){return n(e)}),[n]),l=i.a.useCallback((function(e){return c(e)}),[c]),m=Ri(),b=Object(r.useState)({readOnly:!0,patient:{uid:"",name:"",surname:"",phoneNumber:"",email:"",isPregnant:!1,height:0,weights:[{time:"",value:0}],weight:0,gender:"male"},error_name:!1,error_surname:!1,error_phone_number:!1,error_email:!1,error_password:!1,backdrop:!1,snackbar:{open:!1,message:"",severity:"error"}}),g=Object(f.a)(b,2),v=g[0],E=g[1],O=Object(r.useRef)(null);Object(r.useEffect)((function(){if(O.current=!0,void 0!==e)return function(){return O.current=!1}}),[e,o]),i.a.useEffect((function(){var t=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.current&&E((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:{open:!0,message:"Caricamento...",severity:Vi}})})),e.prev=1,e.next=4,l(t);case 4:n=e.sent,r=n.weight,i=r.sort((function(e,t){return e.time.valueOf()>=t.time.valueOf()})),n=Object(u.a)(Object(u.a)({},n),{},{weights:i,weight:null===(a=i[0])||void 0===a?void 0:a.value}),O.current&&E((function(e){return Object(u.a)(Object(u.a)({},e),{},{patient:n,snackbar:{open:!0,message:"Dati recuperati correttamente",severity:Gi}})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),O.current&&E((function(t){return Object(u.a)(Object(u.a)({},t),{},{snackbar:{open:!0,message:e.t0.message,severity:Mi}})}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();O.current=!0,void 0!==e&&t(e)}),[e,l]);var y=function(){var t=Object(p.a)(d.a.mark((function t(){var n,r,i,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.patient,(r=n.weights).splice(0,1,{time:h.a.now(),value:parseInt(n.weight)}),t.prev=3,i={name:n.name,email:n.email,surname:n.surname,phoneNumber:n.phoneNumber,isPregnant:n.isPregnant,weight:r,height:n.height,gender:n.gender},t.next=7,a(e,i);case 7:c=t.sent,console.debug(c),E((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:{open:!0,message:"Data aggiornati correttamente",severity:Gi}})})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),E((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:{open:!0,message:t.t0.message,severity:Mi}})})),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(p.a)(d.a.mark((function t(n){var r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=new FormData(n.currentTarget),i=r.get("password"),r.get("confirmPassword")===i){t.next=6;break}return t.abrupt("return",E((function(e){return Object(u.a)(Object(u.a)({},e),{},{error_password:!0})})));case 6:return t.prev=6,t.next=9,a(e,{password:Object(ue.hashSync)(i,Object(ue.genSaltSync)(10)).toString()});case 9:E((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:{open:!0,message:"Password aggiornata",severity:Gi}})})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(6),console.error(t.t0),E((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:{open:!0,message:t.t0.message,severity:Mi}})}));case 16:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),k=function(e){var t=e.target;E((function(e){return Object(u.a)(Object(u.a)({},e),{},{patient:Object(u.a)(Object(u.a)({},e.patient),{},Object(S.a)({},t.name,t.value))})}))},_=function(e,t){"clickaway"!==t&&E((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:Object(u.a)(Object(u.a)({},e.snackbar),{},{open:!1})})}))},x=v.patient,w=v.snackbar;return i.a.createElement(M.a,{id:"wrapper-content",maxWidth:"md"},i.a.createElement(ge.a,{className:m.root,elevation:2},i.a.createElement($.a,{id:"container-page",container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",spacing:2},i.a.createElement(wt.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:w.open,onClose:_,autoHideDuration:5e3,TransitionComponent:Hi},i.a.createElement(ce.a,{severity:w.severity,onClose:_},i.a.createElement(oe.a,null,w.message))),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(F.a,{variant:"h5"},I.account.modify_patient_data)),i.a.createElement($.a,{item:!0,xs:6},i.a.createElement(F.a,{align:"right",variant:"h5"},"Modifica password")),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(K.a,{id:"patient-id",name:"uid",type:"text",InputProps:{readOnly:!0},value:x.uid,margin:"normal",fullWidth:!0,variant:"outlined",label:I.patient.patient_id}),i.a.createElement(K.a,{id:"patient-name",name:"name",type:"text",InputProps:{readOnly:v.readOnly},error:v.error_name,value:x.name,onChange:k,margin:"normal",fullWidth:!0,variant:"outlined",label:I.patient.first_name}),i.a.createElement(K.a,{id:"patient-surname",name:"surname",type:"text",InputProps:{readOnly:v.readOnly},error:v.error_surname,value:x.surname,onChange:k,margin:"normal",fullWidth:!0,variant:"outlined",label:I.patient.last_name}),i.a.createElement(K.a,{id:"patient-phone-number",name:"phoneNumber",type:"tel",InputProps:{readOnly:v.readOnly},error:v.error_phone_number,value:x.phoneNumber,onChange:k,margin:"normal",fullWidth:!0,variant:"outlined",label:I.general.phone_number}),i.a.createElement(K.a,{id:"patient-weight",name:"weight",type:"number",InputProps:{readOnly:v.readOnly},inputProps:{min:0},error:v.error_weight,value:x.weight,onChange:k,margin:"normal",fullWidth:!0,variant:"outlined",label:I.measures.weight}),i.a.createElement(K.a,{id:"patient-height",name:"height",type:"number",inputProps:{min:0},InputProps:{readOnly:v.readOnly},error:v.error_height,value:x.height,onChange:k,margin:"normal",fullWidth:!0,variant:"outlined",label:I.measures.height}),i.a.createElement(Xe.a,{disabled:v.readOnly},i.a.createElement(Ir.a,null,I.patient.gender),i.a.createElement(Nr.a,{"aria-label":"gender",name:"gender",value:x.gender,onChange:function(e){E((function(t){return Object(u.a)(Object(u.a)({},t),{},{patient:Object(u.a)(Object(u.a)({},t.patient),{},{gender:e.target.value})})}))},row:!0},i.a.createElement(de.a,{value:"female",control:i.a.createElement(Sr.a,{color:"secondary"}),label:I.general.female}),i.a.createElement(de.a,{value:"male",control:i.a.createElement(Sr.a,{color:"primary"}),label:I.general.male}))),i.a.createElement(ca.a,{row:!0},i.a.createElement(de.a,{control:i.a.createElement(zn.a,{size:"medium",checked:x.isPregnant,onChange:function(e){E((function(t){return Object(u.a)(Object(u.a)({},t),{},{patient:Object(u.a)(Object(u.a)({},t.patient),{},{isPregnant:e.target.checked})})}))},name:"isPregnant"}),label:I.patient.pregnant,disabled:x.gender===Bi})),i.a.createElement(nt.a,{variant:"outlined",fullWidth:!0},i.a.createElement(X.a,{onClick:function(){E((function(e){return Object(u.a)(Object(u.a)({},e),{},{readOnly:!e.readOnly})}))},id:"modify-patient-data",color:"primary"},v.readOnly?I.general.modify:I.general.cancel),i.a.createElement(X.a,{onClick:y,id:"save-patient-data",color:"secondary"},I.general.save))),i.a.createElement($.a,{item:!0,xs:4},i.a.createElement(U.a,{component:"form",noValidate:!0,onSubmit:j},i.a.createElement($.a,{container:!0,spacing:2},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(K.a,{required:!0,fullWidth:!0,id:"email",label:I.patient.email,name:"email",autoComplete:"email",variant:"outlined",InputProps:{readOnly:!0},error:v.error_email,value:x.email,margin:"normal",type:"email"}),i.a.createElement(K.a,{required:!0,fullWidth:!0,name:"password",label:I.account.password,type:"password",id:"password",autoComplete:"new-password",variant:"outlined",margin:"normal"}),i.a.createElement(K.a,{required:!0,fullWidth:!0,name:"confirmPassword",label:I.account.confirm_password,type:"password",id:"confirm-password",autoComplete:"new-password",variant:"outlined",margin:"normal"})),i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(X.a,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary"},"Aggiorna email e password"))))))))},title:"Modify patient",description:"Modifica dati paziente"},{path:"/control-group",component:function(e){var t=e.history,a=Object(r.useState)({patients:[],filtered:[],backdrop:!1}),n=Object(f.a)(a,2),c=n[0],o=n[1],l=A(),s=l.getPatients,m=l.currentLanguage,b=l.removeControlGroupPatient,g=Object(r.useCallback)((function(){return s()}),[s]),v=Object(r.useRef)(null);Object(r.useEffect)((function(){return v.current=!0,function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v.current&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!0})})),e.next=4,g();case 4:if(!(t=e.sent).empty){e.next=7;break}return e.abrupt("return");case 7:a=t.docs.map((function(e){var t=e.data(),a=t.createdAt,n=Object(u.a)({},t);"string"===typeof a?n=Object(u.a)(Object(u.a)({},n),{},{createdAt:new Date(a).toLocaleString(m)}):a instanceof h.a&&(n=Object(u.a)(Object(u.a)({},n),{},{createdAt:a.toDate().toLocaleString(m)})),void 0===t.status&&(n=Object(u.a)(Object(u.a)({},n),{},{status:"green"}));var r=n.therapyStartDate;"string"===typeof r?n=Object(u.a)(Object(u.a)({},n),{},{therapyStartDate:new Date(r).toLocaleDateString(m)}):r instanceof h.a&&(n=Object(u.a)(Object(u.a)({},n),{},{therapyStartDate:r.toDate().toLocaleDateString(m)}));var i=n.therapyEndDate;return"string"===typeof i?n=Object(u.a)(Object(u.a)({},n),{},{therapyEndDate:new Date(i).toLocaleDateString(m)}):i instanceof h.a&&(n=Object(u.a)(Object(u.a)({},n),{},{therapyEndDate:i.toDate().toLocaleDateString(m)})),Object(u.a)(Object(u.a)({},n),{},{uid:e.id})})).filter((function(e){var t=e.controlGroup;return"boolean"===typeof t&&t})),v.current&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{patients:a,filtered:a,backdrop:!1})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),v.current&&o((function(e){return Object(u.a)(Object(u.a)({},e),{},{backdrop:!1})})),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()(),function(){return v.current=!1}}),[g,m]);var E=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),O=Zi(),y=c.filtered,j=c.backdrop,k=y.map((function(e){return function(e,t,a,n,r){return{uid:e,name:t,surname:a,therapyStartDate:n,therapyEndDate:r}}(e.uid,e.name,e.surname,e.therapyStartDate,e.therapyEndDate)}));return j?i.a.createElement(V.a,{open:j,timeout:2e3,className:O.backdrop},i.a.createElement(G.a,{color:"inherit"})):i.a.createElement(M.a,{maxWidth:"lg"},i.a.createElement($.a,{container:!0,spacing:1},i.a.createElement($.a,{item:!0,xs:12},i.a.createElement(ec,{classes:O,rows:k,headCells:[{id:"name",numeric:!1,disablePadding:!1,label:"Nome"},{id:"surname",numeric:!1,disablePadding:!1,label:"Cognome"},{id:"therapyStartDate",numeric:!0,disablePadding:!1,label:"Inizio"},{id:"therapyEndDate",numeric:!0,disablePadding:!1,label:"Fine"},{id:"seeMore",numeric:!0,disablePadding:!1,label:"See more"}],handleSearch:function(e){if(void 0===e||0===e.length)return o((function(e){return Object(u.a)(Object(u.a)({},e),{},{filtered:e.patients})}));o((function(t){return Object(u.a)(Object(u.a)({},t),{},{filtered:t.patients.filter((function(t){var a=t.name,n=t.surname;return a.includes(e)||n.includes(e)}))})}))},handleRemovePatients:E,history:t}))))},title:"Gruppo controllo",description:"Gruppo di controllo"}];var nc=function(){return i.a.createElement(s.d,null,tc.map((function(e){var t=e.path,a=e.component;return i.a.createElement(s.b,{path:t,key:t,component:a})})))},rc=a(608),ic=a(326),cc=a.n(ic),oc=a(329),lc=a.n(oc),sc=a(333),uc=a.n(sc),mc=a(325),dc=a.n(mc),pc=a(332),fc=a.n(pc),bc=a(328),gc=a.n(bc),hc=a(324),vc=a.n(hc),Ec=a(327),Oc=a.n(Ec),yc=a(212),jc=a.n(yc),kc=a(331),_c=a.n(kc),xc=a(330),wc=a.n(xc),Cc=a(609),Pc=a(611),Sc=a(334),Nc=a.n(Sc),Ic=(a(618),a(610)),Dc=a(321),Tc=a(612),zc=["onClose","value","open"],Wc=["open","onClose","value"],Ac=["component"],qc=Object(re.a)((function(e){var t;return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},toolbar:e.mixins.toolbar,drawerContainer:{overflow:"auto"},grow:{flexGrow:1},content:{flexGrow:1,padding:e.spacing(3)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightBold,textTransform:"capitalize"},avatar:{width:e.spacing(7),height:e.spacing(7)},sectionDesktop:(t={},Object(S.a)(t,e.breakpoints.up("md"),{display:"flex"}),Object(S.a)(t,"display","flex"),Object(S.a)(t,"& > *",{margin:e.spacing(1)}),t),nested:{paddingLeft:e.spacing(4)}}}));function Fc(e){var t=e.children,a=e.window,n=Object(rc.a)({disableHysteresis:!0,threshold:0,target:a?a():void 0});return i.a.cloneElement(t,{elevation:n?4:0})}Object(xe.a)((function(e){return{colorPrimary:{color:"#fff"}}}))(or.a);var Lc=Object(xe.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(Cc.a);function Rc(e){var t=e.onClose,a=e.value,n=e.open,r=Object(L.a)(e,zc),c=i.a.useState(a),o=Object(f.a)(c,2),l=o[0],s=o[1];i.a.useEffect((function(){n||s((function(){return a}))}),[a,n]);var m=function(){t()},d=function(e){var t=e.target;s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t.name,t.checked))}))};return i.a.createElement(Je.a,Object.assign({maxWidth:"sm",fullWidth:!0,"aria-labelledby":"confirmation-dialog-title",open:n,onClose:m},r),i.a.createElement(Ke.a,{id:"confirmation-dialog-title"},I.general.confirm),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(Xe.a,{component:"fieldset"},i.a.createElement(Ir.a,{component:"legend"},"Rimuovi"),i.a.createElement(ca.a,null,i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:l.remove,onChange:d,name:"remove"}),label:I.general.from_patient_list}),i.a.createElement(de.a,{control:i.a.createElement(pe.a,{checked:l.delete,onChange:d,name:"delete"}),label:I.general.all_patient_data})),i.a.createElement(tt.a,null,I.general.select_choice_before_confirmation))),i.a.createElement(at.a,null,i.a.createElement(X.a,{autoFocus:!0,onClick:m,color:"secondary",variant:"text"},I.general.cancel),i.a.createElement(X.a,{onClick:function(){t(l)},color:"primary",variant:"contained"},I.general.confirm)))}function Bc(e){var t=e.open,a=e.onClose,n=e.value,r=Object(L.a)(e,Wc);i.a.useEffect((function(){t||m((function(){return n}))}),[n,t]);var c=function(){a()},o=i.a.useState(n),l=Object(f.a)(o,2),s=l[0],m=l[1];return i.a.createElement(Je.a,Object.assign({fullWidth:!0,maxWidth:"xs"},r,{open:t,onClose:c}),i.a.createElement(Ke.a,null,I.general.create_new_appointment),i.a.createElement(Ye.a,{dividers:!0},i.a.createElement(an.a,null,I.general.select_day_time),i.a.createElement(K.a,{fullWidth:!0,margin:"normal",id:"date-appointment",variant:"outlined",type:"date",helperText:I.general.day,name:"date",value:s.date,onChange:function(e){e.persist();var t=e.target.name,a=e.target.value;m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t,a))}))}}),i.a.createElement(K.a,{id:"time-appointment",type:"time",name:"time",fullWidth:!0,variant:"outlined",helperText:I.general.time,margin:"normal",value:s.time,onChange:function(e){e.persist();var t=e.target.name,a=e.target.value;m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},t,a))}))}})),i.a.createElement(at.a,null,i.a.createElement(X.a,{variant:"text",color:"secondary",onClick:c},I.general.cancel),i.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){a(s)}},I.general.create)))}function Mc(e){var t,a,n,c,o,l,m,b,g=qc(),h=e.history,v=e.location,E=v.pathname,O=Object(s.g)().patientId;O=void 0===O?null===(t=v.state)||void 0===t?void 0:t.patientId:O;var y=null===(a=v.state)||void 0===a?void 0:a.titlePage,j=i.a.useCallback((function(e){var t;return(null===(t=ac.find((function(t){return t.path===e})))||void 0===t?void 0:t.title)||y}),[ac,y]),k=i.a.useState({patient:{name:"",surname:"",therapyEndDate:"",therapyStartDate:"",weight:"",height:"",age:"",id:""},meanHeight:0,meanWeight:0,meanAges:0,patients:[],males:0,females:0,openConfirmationDialog:!1,confirmState:{delete:!1,remove:!0},openNewAppointmentDialog:!1,newAppointment:{time:"",date:""},updatePatientData:1,anchorEl:null,openMenu:!1,menu:"",notifications:[{body:"body",event_time:Ln.a.now(),title:"title",uid:"1",seen:!1}],openExportCollapseMenuList:!1}),_=Object(f.a)(k,2),x=_[0],w=_[1],C=A(),P=C.logout,S=C.currentUser,N=C.verifyEmail,D=C.getPatient,T=C.getPatients,z=C.removePatient,W=C.unlinkPatient,q=C.updatePatientAppointments,R=C.currentLanguage,B=C.updateCurrentLanguage,M=C.getPatientById,V=i.a.useCallback((function(e){return D(e)}),[D]),G=i.a.useCallback((function(){return T()}),[T]),$=Object(r.useCallback)((function(e){return M(e)}),[M]),K=function(){w((function(e){return Object(u.a)(Object(u.a)({},e),{},{anchorEl:null,openMenu:!1})}))},J=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:h.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Y=Object(r.useRef)(null),X=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Z=i.a.createElement(he.a,{anchorEl:x.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:x.openMenu&&"notifications"===x.menu,onClose:K},x.notifications.map((function(e,t){var a=e.uid,n=e.title,r=e.body,c=e.event_time;e.seen;return i.a.createElement(ve.a,{key:"".concat(t+1,"-").concat(a),dense:!0,button:!0},i.a.createElement(Ee.a,null,i.a.createElement(Te.a,{fontSize:"small"})),i.a.createElement(Oe.a,{primary:n,secondary:i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{component:"span",variant:"body2",color:"textPrimary"},c.toDate().toLocaleString()),i.a.createElement("br",null),i.a.createElement(F.a,{variant:"caption"},r))}))}))),ee=i.a.createElement(he.a,{anchorEl:x.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},id:"account-control",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},getContentAnchorEl:null,open:x.openMenu&&"user"===x.menu,onClose:K},i.a.createElement(ve.a,{button:!0,onClick:function(){K(),h.push("/profile")}},i.a.createElement(Oe.a,{primary:"".concat(S.displayName),secondary:S.email})),!0===S.emailVerified?null:i.a.createElement(ve.a,{button:!0,onClick:X},i.a.createElement(Ee.a,null,i.a.createElement(vc.a,null)),i.a.createElement(Oe.a,{primary:I.account.verify_email})),i.a.createElement(ve.a,{button:!0,onClick:function(){h.push("/update-profile",{titlePage:"Modifica profilo",patientId:O})}},i.a.createElement(Ee.a,null,i.a.createElement(dc.a,null)),i.a.createElement(Oe.a,{primary:I.account.modify_profile})),i.a.createElement(ye.a,null),i.a.createElement(ve.a,{button:!0,onClick:J},i.a.createElement(Ee.a,null,i.a.createElement(cc.a,null)),i.a.createElement(Oe.a,{primary:I.account.sign_out}))),te=function(e){return e===E},ae=i.a.useState(!1),ne=Object(f.a)(ae,2),re=ne[0],ie=ne[1],ce=function(e){return function(t,a){ie(!!a&&e)}},oe=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=15;break}return e.prev=1,void 0===(a=x.patient.appointments)&&(a=[]),a.push(Ln.a.fromDate(new Date("".concat(t.date,"T").concat(t.time)))),e.next=7,q(a,O);case 7:w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNewAppointmentDialog:!1,newAppointment:t})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:e.next=16;break;case 15:w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNewAppointmentDialog:!1})}));case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=19;break}if(e.prev=1,!t.delete){e.next=7;break}return e.next=5,z(O);case 5:e.next=10;break;case 7:if(!t.remove){e.next=10;break}return e.next=10,W(O);case 10:w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openConfirmationDialog:!1,confirmState:t})})),h.push("/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.debug(null===e.t0||void 0===e.t0?void 0:e.t0.message);case 17:e.next=20;break;case 19:w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openConfirmationDialog:!1})}));case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();i.a.useEffect((function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t);case 3:n=e.sent,r=n.therapyStartDate,(i=n.therapyEndDate)instanceof Ln.a&&(i=i.toDate().toLocaleDateString(a)),r instanceof Ln.a&&(r=r.toDate().toLocaleDateString(a)),c=Object(u.a)(Object(u.a)({},n),{},{weight:n.weight[0].value,id:t,therapyEndDate:i,therapyStartDate:r}),Y.current&&w((function(e){return Object(u.a)(Object(u.a)({},e),{},{patient:c})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}();return Y.current=!0,void 0!==O&&e(O,R),function(){return Y.current=!1}}),[O,R,V]),i.a.useEffect((function(){var e=function(e,t,a){return e+(t-e)/(a+1)},t=function(){var t=Object(p.a)(d.a.mark((function t(){var a,n,r,i,c,o,l,s,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=[]).push(G()),t.prev=2,t.next=5,Promise.all(a);case 5:n=t.sent,r=Object(f.a)(n,1),i=r[0],c=i.docs.map((function(e){var t=e.data(),a=e.id,n=Object(u.a)(Object(u.a)({},t),{},{weights:t.weight,height:parseInt(t.height)}),r=n.weights.map((function(e){return{time:e.time.toDate(),value:e.value}})),i=r.reduce((function(e,t){return e.time>t.time?e:t}));return Object(u.a)(Object(u.a)({},n),{},{id:a,weights:r,weight:i})})),o=c.filter((function(e){return"male"===e.gender.toString().toLowerCase()})).length,l=Math.abs(c.length-o),s=c.map((function(e){var t=e.age;return void 0===t?0:t})).reduce(e,0),m=c.map((function(e){var t=e.weight;return parseInt(t.value)})).reduce(e,0),p=c.map((function(e){var t=e.height;return parseInt(t)})).reduce(e,0),Y.current&&w((function(e){return Object(u.a)(Object(u.a)({},e),{},{patients:c,meanAges:parseFloat(s).toFixed(2),meanWeight:parseFloat(m).toFixed(2),meanHeight:parseFloat(p).toFixed(2),males:o,females:l})})),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(2),console.error(t.t0.code),console.error(t.t0.message);case 21:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}();return Y.current=!0,t(),function(){return Y.current=!1}}),[G]);var se,ue=i.a.useState(!0),me=Object(f.a)(ue,2);me[0],me[1];return i.a.createElement("div",{className:g.root},i.a.createElement(H.a,null),i.a.createElement(Rc,{id:"confirm-deletion",keepMounted:!0,open:x.openConfirmationDialog,onClose:le,value:x.confirmState}),i.a.createElement(Bc,{id:"new-appointment-dialog",keepMounted:!0,open:x.openNewAppointmentDialog,onClose:oe,value:x.newAppointment}),i.a.createElement(Fc,e,i.a.createElement(Oa.a,{position:"fixed",className:g.appBar},i.a.createElement(un.a,null,i.a.createElement(F.a,{variant:"h6"}," ",j(E)||""),i.a.createElement("div",{className:g.grow}),i.a.createElement("div",{className:g.sectionDesktop},i.a.createElement(Xe.a,{fullWidth:!0},i.a.createElement(et.a,{labelId:"lang-label-id",id:"lang-id",name:"currentLanguage",value:R,onChange:function(e){var t=e.target;return B(t.value)},fullWidth:!0},[{locale:"it-IT",label:"ITA",code:"IT"},{locale:"en-us",label:"ING",code:"GB"}].map((function(e){return i.a.createElement(ve.a,{value:e.locale,key:e.code.toLowerCase().concat("-key")},i.a.createElement(Oe.a,{primary:(t=e.code,"undefined"!==typeof String.fromCodePoint?t.toUpperCase().replace(/./g,(function(e){return String.fromCodePoint(e.charCodeAt(0)+127397)})):t)}));var t})))),i.a.createElement(rt.a,{disableFocusListener:!0,disableTouchListener:!0,title:i.a.createElement(i.a.Fragment,null,i.a.createElement(F.a,{variant:"button"},"".concat(S.displayName)),i.a.createElement(F.a,{variant:"body2"},S.email))},i.a.createElement(Lc,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},onClick:(se="user",function(e){var t=e.currentTarget;w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openMenu:Boolean(t),anchorEl:t,menu:se})}))}),variant:"dot","aria-label":"account of current user","aria-controls":"account-control","aria-haspopup":"true"},i.a.createElement(Q.a,{alt:"".concat(S.displayName)}))))))),ee,Z,i.a.createElement(Pc.a,{className:g.drawer,variant:"permanent",classes:{paper:g.drawerPaper},anchor:"left"},i.a.createElement(un.a,null),i.a.createElement("div",{className:g.drawerContainer},void 0!==O?i.a.createElement(i.a.Fragment,null,i.a.createElement(vi.a,{expanded:"panel1"===re,onChange:ce("panel1")},i.a.createElement(Oi.a,{expandIcon:i.a.createElement(cn.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement(F.a,{className:g.heading},null===(n=x.patient)||void 0===n?void 0:n.name,"\xa0 ",null===(c=x.patient)||void 0===c?void 0:c.surname)),i.a.createElement(Ei.a,null,i.a.createElement(je.a,{dense:!0,style:{width:"100%"}},i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.measures.height,primary:null===(o=x.patient)||void 0===o?void 0:o.height})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.measures.weight,primary:"".concat(null===(l=x.patient)||void 0===l?void 0:l.weight)})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.measures.age,primary:x.patient.age})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.therapy.start,primary:null===(m=x.patient)||void 0===m?void 0:m.therapyStartDate})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{secondary:I.therapy.end,primary:null===(b=x.patient)||void 0===b?void 0:b.therapyEndDate}))))),i.a.createElement(je.a,{dense:!0},[{path:"/".concat(O,"/notifications"),titlePage:I.pageTitles.notifications,icon:i.a.createElement(Te.a,null),id:4},{path:"/".concat(O,"/therapy-status"),titlePage:I.pageTitles.therapy_status,icon:i.a.createElement(Oc.a,null),id:3},{path:"/".concat(O,"/nutritional-plan"),titlePage:I.pageTitles.nutritional_plan,icon:i.a.createElement(jc.a,null),id:2},{path:"/".concat(O,"/medical-visit"),titlePage:I.pageTitles.medical_visit,icon:i.a.createElement(Se.a,null),id:5},{path:"/".concat(O,"/notes"),titlePage:I.pageTitles.notes,icon:i.a.createElement(pn.a,null),id:1},{path:"/".concat(O,"/modify-patient"),titlePage:"Modifica dati paziente",icon:i.a.createElement(Tc.a,null),id:6}].map((function(e){return i.a.createElement(ke.a,{key:e.path,button:!0,selected:te(e.path),onClick:function(){4===e.id?h.push(e.path,{patientId:O,titlePage:e.titlePage,token:x.patient.firebase_device_token}):h.push(e.path,{patientId:O,titlePage:e.titlePage})}},i.a.createElement(Ee.a,null,e.icon),i.a.createElement(Oe.a,{primary:e.titlePage}))})),i.a.createElement(ke.a,{button:!0,onClick:function(){return w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openNewAppointmentDialog:!0})}))}},i.a.createElement(Ee.a,null,i.a.createElement(gc.a,null)),i.a.createElement(Oe.a,{primary:I.general.create_new_appointment})),i.a.createElement(ke.a,{button:!0,onClick:function(){return w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openConfirmationDialog:!0,confirmState:{remove:!0,delete:!1}})}))}},i.a.createElement(Ee.a,null," ",i.a.createElement(lc.a,null)),i.a.createElement(Oe.a,{primary:I.patient.remove_patient})))):i.a.createElement(i.a.Fragment,null,i.a.createElement(vi.a,{elevation:0,expanded:"panel1"===re,onChange:ce("panel1")},i.a.createElement(Oi.a,{expandIcon:i.a.createElement(cn.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement(F.a,{className:g.heading},I.pageTitles.patient_statistics)),i.a.createElement(Ei.a,null,i.a.createElement(je.a,{dense:!0,style:{width:"100%"},disablePadding:!0},i.a.createElement(ke.a,{component:"li"},i.a.createElement(Oe.a,{primary:"".concat(x.patients.length),secondary:I.general.patients_number})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:"".concat(x.females),secondary:I.general.female})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:"".concat(x.males),secondary:I.general.male})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:"".concat(x.meanWeight),secondary:I.visit.middleweight})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:"".concat(x.meanHeight),secondary:I.visit.middleheight})),i.a.createElement(ke.a,null,i.a.createElement(Oe.a,{primary:"".concat(x.meanAges),secondary:I.measures.middle_age})),i.a.createElement(ke.a,{button:!0,onClick:function(){return h.push("/statistics",{patientId:O,titlePage:I.pageTitles.patient_statistics})}},i.a.createElement(Oe.a,{primary:I.general.see_more})))))),i.a.createElement(ye.a,null),i.a.createElement(je.a,{dense:!0},[{path:"/",titlePage:I.pageTitles.patients,icon:i.a.createElement(Fi.a,null)},{path:"/control-group",titlePage:"Gruppo controllo",icon:i.a.createElement(Ai.a,null)},{path:"/statistics",titlePage:I.pageTitles.patient_statistics,icon:i.a.createElement(wc.a,null)},{path:"/export",titlePage:I.pageTitles.export_data,icon:i.a.createElement(_c.a,null)},{path:"/create-patient",titlePage:I.pageTitles.add_patient,icon:i.a.createElement(fc.a,null)},{path:"/foods",titlePage:I.pageTitles.foods,icon:i.a.createElement(uc.a,null)},{path:"/workouts",titlePage:I.pageTitles.workouts,icon:i.a.createElement(An.a,null)},{path:"/templates-nutritional-plan",titlePage:I.pageTitles.nutritional_plans,icon:i.a.createElement(jc.a,null)}].map((function(e,t){return"/export"===e.path?i.a.createElement(i.a.Fragment,null,i.a.createElement(ke.a,{key:e.path,button:!0,onClick:function(){w((function(e){return Object(u.a)(Object(u.a)({},e),{},{openExportCollapseMenuList:!e.openExportCollapseMenuList})}))}},i.a.createElement(Ee.a,null,e.icon),i.a.createElement(Oe.a,{primary:e.titlePage}),x.openExportCollapseMenuList?i.a.createElement(Nc.a,null):i.a.createElement(cn.a,null)),i.a.createElement(nn.a,{in:x.openExportCollapseMenuList,timeout:"auto",unmountOnExit:!0},i.a.createElement(je.a,{component:"div",disablePadding:!0},i.a.createElement(ke.a,{key:"/view-data",button:!0,selected:te(e.path),onClick:function(){return h.push(e.path,{titlePage:e.titlePage,patientId:O})}},i.a.createElement(Oe.a,{primary:"Visulizza dati"})),i.a.createElement(ke.a,{key:"/export-data",button:!0,selected:te("/visit-export"),onClick:function(){return h.push("/visit-export")}},i.a.createElement(Oe.a,{primary:"Esporta dati"}))))):i.a.createElement(ke.a,{key:e.path,button:!0,selected:te(e.path),onClick:function(){return h.push(e.path,{titlePage:e.titlePage,patientId:O})}},i.a.createElement(Ee.a,null,e.icon),i.a.createElement(Oe.a,{primary:e.titlePage}))}))))),i.a.createElement("main",{className:g.content},i.a.createElement(un.a,null),i.a.createElement(U.a,{my:2},i.a.createElement(s.d,null,ac.map((function(e){var t=e.component,a=Object(L.a)(e,Ac);return i.a.createElement(s.b,{exact:!0,path:a.path,render:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Dc.a,null,i.a.createElement("title",null,"".concat(a.title," | JP Obesity")),i.a.createElement("meta",{name:"author",content:"M. Jereghi"}),i.a.createElement("meta",{name:"description",content:a.description})),i.a.createElement(t,e))},key:a.path})})),i.a.createElement(s.a,{from:"*",to:"/404"})))))}function Vc(){return i.a.createElement(F.a,{variant:"body2",color:"textSecondary"},"Copyright \xa9 ",i.a.createElement(Ic.a,{color:"inherit",href:"https://jp-obesity.web.app"},"JP Obesity web app")," ",(new Date).getFullYear(),".")}var Gc=Object(re.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(3,2),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800]}}}));function Hc(){var e=Gc();return i.a.createElement("div",{className:e.root},i.a.createElement(H.a,null),i.a.createElement(M.a,{component:"main",className:e.main,maxWidth:"sm"},i.a.createElement(F.a,{variant:"h2",component:"h1",gutterBottom:!0},"Page not found"),i.a.createElement(F.a,{variant:"h5",component:"h2",gutterBottom:!0},"Error 404.")),i.a.createElement("footer",{className:e.footer},i.a.createElement(M.a,{maxWidth:"sm"},i.a.createElement(F.a,{variant:"body1"},"Universit\xe0 degli studi di Verona"),i.a.createElement(Vc,null))))}var Uc=function(){return i.a.createElement(l.a,null,i.a.createElement(q,null,i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/signup",component:nc}),i.a.createElement(s.b,{path:"/login",component:nc}),i.a.createElement(s.b,{path:"/forgot-password",component:nc}),i.a.createElement(s.b,{path:"/404",component:Hc}),i.a.createElement(B,{path:"/",component:Mc}),i.a.createElement(s.a,{from:"*",to:"/404"}))))};o.a.render(i.a.createElement(Uc,null),document.getElementById("root"))}},[[370,1,2]]]);
//# sourceMappingURL=main.90571305.chunk.js.map